!function(t){"use strict";function n(t,e){var r=this;if(t instanceof n)return t;if(!(r instanceof n))return new n(t,e);if(!t)return r;if(a(t)){if(e=e?n(e):J,!G.test(t))return t=t.trim(),e.find(t);b(r,L(t,e))}else b(r,t)}function e(){}function r(t){return"undefined"==typeof t}function i(t){return!r(t)}function a(t){return"string"==typeof t}function o(t){return en(t)||!!t&&"object"===nn(t)&&s(t.length)&&!l(t)&&!h(t)}function u(t){return!(!t||"object"!==nn(t)||t.constructor!==Object)}function c(t){for(var n in t)return!1;return!0}function s(t){return"number"==typeof t&&!isNaN(t)}function f(t){return"function"===nn(t)}function l(t){return null!=t&&t.window===t}function h(t){return!!t.nodeType}function d(t){return!t||!t.parentNode||t.parentNode.nodeType===Z}function p(t){return t.trim().replace(/^-+/,"").replace(/-([a-z])/g,function(t,n){return n.toUpperCase()})}function m(t){var n=Array.prototype.slice;return n.apply(t,n.call(arguments,1))}function v(t,n){for(var e=0,r=t.length;r>e&&!1!==n(e,t[e]);++e);}function g(t,n){for(var e in t)if(t.hasOwnProperty(e)&&!1===n(e,t[e]))break}function y(t,n){(o(t)?v:g)(t,n)}function w(t,n){null!=n&&(t[t.length++]=n)}function b(t,n){return n=m(arguments,1),y(n,function(n,e){o(e)?v(e,function(n,e){w(t,e)}):w(t,e)}),t}function T(t,n,e){var r=e||[];return y(t,function(t,e){b(r,n(e,t))}),r}function x(t,n){return t||(t={}),n=m(arguments,1),y(n,function(n,e){g(e,function(n,e){t[n]=e})}),t}function A(t,n){if(!t.getAttribute)return!1;var e=(t.getAttribute("class")||"").match(R)||[];return e.indexOf(n)>=0}function N(t,n){D(t,n,function(t,n){-1===t.indexOf(n)&&t.push(n)})}function C(t,n){D(t,n,function(t,n){var e=t.indexOf(n);-1!==e&&t.splice(e,1)})}function D(t,n,e){if(n&&t.setAttribute){var r=(t.getAttribute("class")||"").match(R)||[];y(n.match(R)||[],function(t,n){var i;do i=r.length,e(r,n);while(r.length!==i)}),r.length?t.setAttribute("class",r.join(" ")):t.removeAttribute("class")}}function O(t,n){var e,r;return n=n||document,n=h(n)?n:n[0],n=n.ownerDocument||n,G.test(t)?(t=t.replace(K,"<$1></$2>"),un.innerHTML=t,e=m(un.childNodes)):e=t?[n.createTextNode(t)]:[],r=n.createDocumentFragment(),y(e,function(t,n){r.appendChild(n)}),un.innerHTML="",r}function L(t,n){return m(O(t,n).childNodes)}function E(t){return t.getElementsByTagName?t.getElementsByTagName("*"):t.querySelectorAll?t.querySelectorAll("*"):[]}function I(t,e){if(n.hasData(t)&&n.acceptData(e)){var r=n._data(t),i=n._data(e,r);delete i[tn],i.data&&(i.data=x({},i.data))}}function M(t,n){function e(t){return 1-n(1-t)}cn.easing["easeIn"+t]=n,cn.easing["easeOut"+t]=e,cn.easing["easeInOut"+t]=function(t){return.5>t?.5*n(2*t):.5*e(2*(t-.5))+.5}}function S(t){var n=0,e="";if(s(t))n=t,e="px";else if(a(t)){var r=t.match(z);r&&(n=Number(r[1]),e=r[2])}return{val:n,unit:e}}function _(t,r,i){n._data(t,tn)&&$.error(t,"already has an animation"),i=x({complete:e,duration:400,easing:"swing"},i);var a=T(r,function(e,r){return n.tween(t,r,e,cn.easing[i.easing])}),o=x({},i,{start:n.now(),tweens:a,go:function(t){y(o.tweens,function(n,e){e(t)}),1===t&&o.complete()},stop:function(e){n.removeData(t,tn,!0),e&&o.go(1)}}),u=function(){var t=Math.min(1,(n.now()-o.start)/o.duration);return o.go(t),1>t};u.anim=o,n._data(t,tn,u),cn.addTimer(u)}function F(n,e,r,a){var o=!0;return i(a)?y(n,function(t,n){e(n,r,a)}):u(r)?g(r,function(t,r){F(n,e,t,r)}):o=!1,o?n:n.length?e(n[0],r):t}function j(t,n,e){return t.each(function(){n(this,e)})}function k(t,n){return function(e,r){return t(this,n,e,r)}}function B(t,n,e,r){var i=r||[];return e=!!e,y(t,function(t,r){e===!n(t,r)&&w(i,r)}),i}function H(t,n){if(t.nodeType!==V)return!1;var e=n.match(U);e||$.raise('Only element and class selectors are supported by tfcJQuery. "'+n+'"');var r=e[2],i=e[1];return"."===i?A(t,r):":"===i?(sn[r]||$.raise("tfcJQuery does not support the :"+r+" selector"),sn[r](t)):t.tagName.toLowerCase()===r.toLowerCase()}function P(t,e,r){var i;return i=f(e)?function(t,n){return e.call(n,t,n)}:h(e)?function(t,n){return n===e}:a(e)?function(t,n){return H(n,e)}:function(t,r){return-1!==n.inArray(r,e)},B(t,i,r,n())}function Q(t,n,e){!a(n)&&t.length>1&&$.raise(e+" does not behave the same way as jQuery with multiple elements")}function q(t,n){var e;if(l(t))return t.document.documentElement["client"+n];if(t.nodeType===Y)return e=t.documentElement,Math.max(e["scroll"+n],t.body["scroll"+n],e["offset"+n],t.body["offset"+n],e["client"+n]);var r=t["offset"+n],i=getComputedStyle(t);return y(fn[n],function(t,n){r-=S(i["padding"+n]).val,r-=S(i["border"+n+"Width"]).val}),r}/*!
   * This library is heavily derived from:
   *
   * jQuery JavaScript Library v1.8.3
   * http://jquery.com/
   *
   * Includes Sizzle.js
   * http://sizzlejs.com/
   *
   * Copyright 2012 jQuery Foundation and other contributors
   * Released under the MIT license
   * http://jquery.org/license
   *
   * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
   */
var J,W=window.console,$={},R=/\S+/g,z=/^(\d+(?:\.\d+)?)(px|%|)$/i,U=/^(\.|:)?([-a-z]+)$/i,G=/<|&#?\w+;/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,V=1,X=3,Y=9,Z=11,tn="animTick";n.fn=n.prototype,n.extend=n.fn.extend=function(t){return 1===arguments.length?x(this,t):x.apply(null,arguments)};var nn=function(){var t,n,e={},r="Boolean Number String Function Array Date RegExp Object".split(" ");for(t=0;t<r.length;++t)n=r[t],e["[object "+n+"]"]=n.toLowerCase();return function(t){return null==t?String(t):e[Object.prototype.toString.call(t)]||"object"}}(),en=Array.isArray||function(t){return"array"===nn(t)},rn=function(){/*!
     * Copyright 2012 jQuery Foundation and other contributors
     * Released under the MIT license
     * http://jquery.org/license
     */
var t=String.prototype.trim,n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return t&&!t.call("﻿ ")?function(n){return null==n?"":t.call(n)}:function(t){return null==t?"":(t+"").replace(n,"")}}(),an={},on="__tfc__"+Math.random();n.extend({cache:an,expando:on,guid:1,_data:function(t,e,r){return n.data(t,e,r,!0)},data:function(t,e,r,a){var o;if(n.acceptData(t)){if(o=an[t[on]]||{},null==e)return(a?o:o.data)||{};if(u(e))a?x(o,e):o.data=x(o.data,e);else{if(!i(r))return a?o[e]:o.data&&o.data[e];(a?o:o.data=o.data||{})[e]=r}return an[t[on]=t[on]||n.guid++]=o,a?o:o.data}},removeData:function(t,e,r){var i,a;n.acceptData(t)&&(i=an[t[on]])&&(!e||(a=r?i:i.data,a&&delete a[e],a&&c(a)))&&(r||(delete i.data,c(i)))&&n.cleanData([t])},cleanData:function(e){v(e,function(e,r){var i;if(n.acceptData(r)&&(i=an[r[on]])){if(i.events){if(!i.handle)throw new Error("No store.handle while calling cleanData with remaining events");y(i.events,function(t){r.removeEventListener(t,i.handle,!1)})}delete an[r[on]],r[on]=t}})},acceptData:function(t){return t&&(t.nodeType===V||t.nodeType===Y)},hasData:function(t){return!!an[t[on]]}});var un=document.createElement("div");n.extend({logging:!0,access:F,each:y,map:T,isArray:en,isFunction:f,isPlainObject:u,trim:rn,type:nn,parseHTML:L,inArray:function(t,n,e){if(o(n)){var i=Array.prototype.indexOf;if(i)return i.call(n,t,e);var a=n.length;for(r(e)?e=0:0>e&&(e=Math.max(0,a+e));a>e;++e)if(n[e]===t)return e}return-1},css:function(t,e,r){e=p(e);var i=n.style(t,e,r);return""===i&&(i=getComputedStyle(t)[e]),i},style:function(t,n,e){return n=p(n),i(e)?(s(e)&&(e+=cn.numberOnly[n]?"":"px"),void(t.style[n]=e)):t.style[n]},attr:function(n,e,i){var a=n.nodeType;if(e&&a===V)if(e=e.toLowerCase(),hn[e]){var o=hn[e];if(r(i)){var u;return n[o]||(u=n.attributes.getNamedItem(e))&&u.specified?e:t}n[o]=!!i,i?n.setAttribute(e,e):n.removeAttribute(e)}else{if(r(i)){var c=-1!=="href,src,width,height".split(",").indexOf(e),s=c?n.getAttribute(e,2):n.getAttribute(e);return null===s?t:s}n.setAttribute(e,i)}},prop:function(t,n,e){return i(e)?void(t[n]=e):t[n]},now:function(){return(new Date).getTime()},clone:function(t,n){var e,r,i=t.cloneNode(!0);return n&&(I(t,i),e=E(t),r=E(i),y(e,function(t,n){I(n,r[t])})),i},contains:function(t,n){do{if(t===n)return!0;n=n.parentNode}while(n);return!1}});var cn=n.fx={timers:[],interval:13,timeoutId:null,addTimer:function(t){cn.timers.push(t),cn.timeoutId||cn.start()},start:function(){cn.timeoutId=setInterval(cn.tick,cn.interval)},tick:function(){for(var t,n=cn.timers,e=0;e<n.length;++e)t=n[e],t()||(t.anim.stop(),n.splice(e--,1));n.length||cn.stop()},stop:function(){clearInterval(cn.timeoutId),cn.timeoutId=null},numberOnly:{opacity:!0}};cn.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},M("Quad",function(t){return t*t}),M("Cubic",function(t){return t*t*t}),M("Sine",function(t){return 1-Math.cos(t*Math.PI/2)}),n.extend({Animation:_,tweenFn:function(t,n,e,r){return function(i){r(t+(n-t)*e(i))}},tweenCss:function(t,e,r,i,a,o){return n.tweenFn(r,i,o,function(r){n.css(t,e,r+a)})},tweenProp:function(t,e,r,i,a){return n.tweenFn(r,i,a,function(r){n.prop(t,e,r)})},tween:function(t,e,r,i){var a,o;return n.propTweens[e]?(a=+n.prop(t,e),o=+r,n.tweenProp(t,e,a,o,i)):(e=p(e),a=S(n.css(t,e)),o=S(r),cn.numberOnly[e]&&(a.unit=o.unit=""),a.unit===o.unit?n.tweenCss(t,e,a.val,o.val,o.unit,i):void $.raise("different start/end units for",e,a,o))},propTweens:{scrollTop:!0}});var sn={visible:function(t){return t.offsetWidth>0||t.offsetHeight>0},focus:function(t){return document.activeElement===t}};n.fn.extend({length:0,css:k(F,n.css),style:k(F,n.style),attr:k(F,n.attr),prop:k(F,n.prop),data:k(F,n.data),removeData:k(j,n.removeData),addClass:k(j,N),removeClass:k(j,C),get:function(t){return r(t)?this.toArray():this[(0>t?this.length:0)+t]},eq:function(t){return n(this.get(t||0))},each:function(t){return y(this,function(n,e){return t.call(e,n,e)}),this},map:function(t){return T(this,function(n,e){return t.call(n,e,n)},n())},filter:function(t){return P(this,t,!1)},not:function(t){return P(this,t,!0)},is:function(t){return this.filter(t).length>0},toArray:function(){var t=[];return y(this,function(n,e){t.push(e)}),t},hasClass:function(t){return this.length?A(this[0],t):!1},removeAttr:function(t){return t&&y(this,function(n,e){e.removeAttribute(t)}),this},toggleClass:function(t,n){return t&&y(this,function(e,i){y(t.match(R)||[],function(t,e){var a=n;r(a)&&(a=!A(i,e)),(a?N:C)(i,e)})}),this},children:function(){return this.map(function(t,n){return T(n.childNodes,function(t){return t.nodeType===V?t:void 0})})},contents:function(){return this.map(function(){return this.childNodes})},add:function(t){return b(n(),this,n(t))},find:function(t){return this.map(function(){return this.querySelectorAll?this.querySelectorAll(t):void 0})},animate:function(t,n,e){var r={};return u(n)?x(r,n):s(n)?r.duration=n:f(n)&&(e=n),f(e)&&(r.complete=e),this.stop(!0).each(function(){_(this,t,r)})},fadeIn:function(t,n){return this.css({opacity:0}).show().animate({opacity:1},t,n)},fadeOut:function(t){if(i(t)&&!f(t))throw new Error("tfcJQuery#fadeOut currently only supports an optional callback argument");var n=this;return this.animate({opacity:0},function(){n.hide(),t&&t()})},stop:function(t){return this.each(function(){var e,r=n._data(this,tn);r&&(e=cn.timers.indexOf(r),-1!==e&&cn.timers.splice(e,1),r.anim.stop(t))})},remove:function(t){return y(this,function(e,r){t||r.nodeType!==V||(n.cleanData(r.getElementsByTagName("*")),n.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r)}),this},detach:function(){return this.remove(!0)},empty:function(){return this.contents().remove(),this},html:function(t){return r(t)?this.length?this[0].innerHTML:"":(a(t)?(this.empty(),this.each(function(){this.innerHTML=t})):t instanceof n&&(this.empty(),this.append(t)),this)},text:function(t){var e=!1;return r(t)&&(e=!0,t=""),this.each(function(){var r=this,i=r.nodeType;(i===X||i===V)&&(e?t+=this.textContent:(n(r).empty(),this.textContent=t))}),e?t:this},parents:function(t){var n=this.map(function(){for(var t=[],n=this.parentNode;n;)t.push(n),n=n.parentNode;return t});return t&&(n=n.filter(t)),n},parent:function(t){var n=this.map(function(){return this.parentNode});return t&&(n=n.filter(t)),n},hide:function(){return this.style("display","none")},show:function(){return this.each(function(){var t=this;if(t.nodeType===V){var n,e=t.nodeName.toLowerCase();switch(e){case"div":case"iframe":n="block";break;case"span":n="inline";break;default:$.raise("Calling show on unsupported element ["+e+"]")}t.style.display=n}})},append:function(t){return Q(this,t,"append"),this.each(function(){var e=this,r=e.nodeType;(r===Z||r===V)&&n(t).each(function(){e.appendChild(this)})})},prepend:function(t){return Q(this,t,"prepend"),this.each(function(){var e=this,r=e.nodeType;if(r===Z||r===V){var i=e.firstChild;n(t).each(function(){e.insertBefore(this,i)})}})},before:function(t){return d(this[0])?b(n(),n(t),this):(Q(this,t,"before"),this.each(function(){var e=this;n(t).each(function(){e.parentNode.insertBefore(this,e)})}))},replaceWith:function(t){return d(this[0])?this.length?b(n(),n(t)):this:(Q(this,t,"replaceWith"),a(t)||(t=n(t).detach()),this.each(function(){var e=this.parentNode,r=this.nextSibling;n(this).remove(),r?n(r).before(t):n(e).append(t)}))},clone:function(t){return this.map(function(){return n.clone(this,t)})},offset:function(){var t,n=this[0];return n&&n.getBoundingClientRect?(t=n.getBoundingClientRect(),{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}):void 0},bind:function(t,e){return this.each(function(){n.event.add(this,t,e)})},unbind:function(t,e){return this.each(function(){n.event.remove(this,t,e)})}});var fn={Width:["Left","Right"],Height:["Top","Bottom"]};y(fn,function(t){var e=t.toLowerCase();n.fn[e]=function(){return arguments.length&&$.raise("tfcJQuery#"+e+" is only a getter"),this.length?q(this[0],t):null}});var ln={};n.event={special:ln,add:function(t,e,r){if(n.acceptData(t)){r.guid||(r.guid=n.guid++);var i=n._data(t,{}),a=i.handle;a||(a=i.handle=function(t){return n.event.dispatch.call(a.elem,t)},a.elem=t);var o=e;e=(ln[e]||{}).fixType||e;var u={type:e,origType:o,handler:r,guid:r.guid},c=i.events=i.events||{},s=c[e];s||(s=c[e]=[],t.addEventListener(e,a,!1)),s.push(u),t=null}},dispatch:function(t){var e,r=t.type,i=this,a=n._data(i,"events");if(a&&a[r])for(var o=a[r],u=0,c=o.length;c>u;++u){var s=o[u],f=(ln[s.origType]||{}).handle;e=f?f.call(i,t,s):s.handler.call(i,t),e===!1&&(t.preventDefault(),t.stopPropagation())}},remove:function(t,e,r){if(n.acceptData(t)&&n.hasData(t)){var i=n._data(t),a=i.events;e=(ln[e]||{}).fixType||e,a&&a[e]&&(a[e]=B(a[e],function(t,n){return!r||n.guid===r.guid},!0),0===a[e].length&&(delete a[e],t.removeEventListener(e,i.handle,!1)),c(a)&&(delete i.handle,n.removeData(t,"events",!0)))}}},y({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ln[t]={fixType:e,handle:function(t,e){var r,i=this,a=t.relatedTarget;return(!a||a!==i&&!n.contains(i,a))&&(r=e.handler.call(i,t)),r}}});var hn={};y("selected,checked,disabled,multiple,readOnly,required,open".split(","),function(t,n){hn[n.toLowerCase()]=n}),y(["log","debug","warn","error"],function(t,e){$[e]=function(){n.logging&&W&&W[e].apply(W,arguments)}}),$.raise=function(){throw new Error(m(arguments).join(" "))},J=n(document),window.tfcJQuery=n}();
var TFCApp;!function(){"use strict";var e;TFCApp={getRunMode:function(){return e},isDevMode:function(){return e===TFCApp.RunModes.dev},RunModes:{dev:1,test:2,staging:3,prod:4},Constants:{RequestParameter:{UserSession:"userCookie",Gender:"gender",SetupGender:"setupGender",Department:"department",Category:"category",ProductType:"productType",IPS:"ips",FirstName:"firstName",OrderId:"orderid",StyleColorId:"colorId",AvailableSizes:"availableSizes",Style:"style",StoreEmbedded:"storeEmbedded",Placement:"placement",UserId:"userid",Locale:"locale",StoreRegistered:"storeRegistered",OriginWidget:"originWidget",Container:"container",ScreenSize:"screenSize",SessionParams:"sessionParams",SessionParamOverrides:"sessionParamOverrides",AnalyticsSession:"analyticsSession",AnalyticsScreenSize:"analyticsScreenSize",AnalyticsArgs:"analyticsArgs",UniversalAnalyticsArgs:"universalAnalyticsArgs",PageName:"pageName",Funnels:"funnels",CookiesEnabled:"cookiesEnabled",SourceTrigger:"sourceTrigger",AlternateUserId:"alternateUserId",StoreTla:"storeId",WindowParams:"windowParams",ServiceSecureURI:"serviceSecureURI",StoreVersionPath:"storeVersionPath",ProfileComplete:"profileComplete",FitRecResult:"fitrecResult",CustomProfileJs:"customjs",IsEnteringData:"isEnteringData",WidgetContext:"widgetContext",Widget:"widget",JavascriptIntegrated:"javascriptIntegrated",AutoCalculate:"autoCalculate",ClientToServerLogging:"clientToServerLogging",Token:"token",UserHasLegacyCookie:"userHasLegacyCookie",IntegrationPlatform:"platform",ThirdPartyAuth:"thirdPartyAuth",RecipientLinkId:"recipientLinkId",RecipientAlias:"recipientAlias",DeviceType:"deviceType",ServiceMode:"serviceMode",IsSettingUpNewRecipient:"isSettingUpNewRecipient",NewRecipientAlias:"newRecipientAlias",EditRecipientLinkId:"editRecipientLinkId",IsShoppingForOther:"isShoppingForOther",OriginUrl:"originUrl"},Header:{UserSession:"X-TF-UserSession",SessionParams:"X-TF-SessionParams",SessionParamMaxAge:"X-TF-SessionParamMaxAge",IsUserRecognized:"X-TF-IsUserRecognized"},Attributes:{FIRST_NAME:"data-x-firstname",ALT_USER_ID:"data-x-altuserid",ORDER_ID:"data-orderid",GENDER:"data-gender",IPS:"data-ips",LOCALE:"data-locale",STYLE_ID:"id",USERID:"data-userid",USER_ID:"data-user-id",STORE_REGISTERED:"data-registered",STYLE_COLOR_ID:"data-colorid",AVAILABLE_SIZES:"data-availablesizes",CONTEXT:"data-context",RECIPIENT_ID:"data-recipient-id"},DeviceType:{Mobile:"mobile",Desktop:"desktop",Responsive:"responsive"},Department:{Men:"Mens",Unisex:"Unisex",Women:"Womens"},Gender:{Male:"Male",Female:"Female"},ProductType:{Tops:"Tops",Bottoms:"Bottoms",Shoes:"Shoes",DressShirts:"DressShirts",Dresses:"Dresses",Suits:"Suits"},IPS:{FitDetails:"fitdetails",Login:"login",NewProfile:"newprofile",UpdateProfile:"profile",Unknown:"unknown",Welcome:"welcome",GeneralSizeAdvice:"generalsizeadvice",Manage:"manage",Save:"save",SfoNew:"sfonew",SfoEdit:"sfoedit"},Context:{QuickView:"quickview"},SourceTrigger:{Banner:"Banner",Widget:"Widget",Popup:"Popup"},Container:{Modal:"modal",Tip:"tip"},IntegrationPlatform:{Web:"web",App:"app"},Message:{Open:"open",Close:"close",Update:"update",Complete:"complete",PageLoad:"pageload",SessionParams:"sessionparams",SessionParamsMaxAge:"sessionparamsmaxage",LogOut:"logout",Resize:"resize",Refresh:"refresh",UserSession:"usersession",AddToBag:"addtobag",ScreenSizeChange:"screensizechange",FitRecResults:"fitrecresults",Chat:"chat"},NGEvents:{UpdateProfileStrength:"UpdateProfileStrength"},ScreenSize:{Small:"small",Large:"large"},FitRec:{Event:{LogOut:"logout",OpenDialog:"opendialog",MoreInfo:"moreinfo",OpenRegistration:"openreg",Render:"render"},Status:{EstimationInProgress:"estimationinprogress",Error:"error",IncompleteGarment:"incompletegarment",IncompleteProfile:"incompleteprofile",InvalidGender:"invalidgender",NoUser:"nouser",NoStyle:"nostyle",NoStyleNoUser:"nostylenouser",SizeNotAvailable:"sizenotavailable",Success:"success",UserDisabled:"userdisabled"},TemplateName:{AnonymousNotRecommended:"anonymousnotrecommended",AnonymousRecommended:"anonymousrecommended",EstimationInProgress:"estimationinprogress",Error:"error",IncompleteGarment:"incompletegarment",IncompleteProfile:"incompleteprofile",InvalidGender:"invalidgender",NoUser:"nouser",NoStyle:"nostyle",NoStyleNoUser:"nostylenouser",NotRecommended:"notrecommended",Recommended:"recommended",RecommendedGarmentUserSizeOnly:"garmentusersizeonly",RecommendedGarmentSizeOnly:"garmentsizeonly",RecommendedUserSizeOnly:"usersizeonly",BrandAdvice:"brandadvice"}}},analytics:{},component:{},manager:{},tips:{},utility:{}},e=TFCApp.RunModes.prod||TFCApp.RunModes.dev}();
!function(){"use strict";TFCApp.bind=function(n,t){if("function"!=typeof n)throw"Cannot bind to non-function";var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return n.apply(t,r.concat(o))}}}();
/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
!function(t,r){"use strict";var n,o,e,i,s,f;n=function(){var t=/^(?:body|html)$/i;return{_getWindow:function(t){return this.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1},_scroll:function(t,r,n,o,e){var i=this._getWindow(t);return void 0===r?i?n in i?i[n]:i.document.documentElement[o]:t[o]:void(i?i.scrollTo(e?this.scrollLeft(t):r,e?r:this.scrollTop(t)):t[o]=r)},isWindow:function(t){return null!=t&&t==t.window},position:function(n){var o=n[0],e=this.offsetParent(n),i=n.offset(),s=t.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(r.css(o,"marginTop"))||0,i.left-=parseFloat(r.css(o,"marginLeft"))||0,s.top+=parseFloat(r.css(e[0],"borderTopWidth"))||0,s.left+=parseFloat(r.css(e[0],"borderLeftWidth"))||0,{top:i.top-s.top,left:i.left-s.left}},offsetParent:function(n){return n.map(function(){for(var n=this.offsetParent||document.body;n&&!t.test(n.nodeName)&&"static"===r.css(n,"position");)n=n.offsetParent;return n||document.body})},scrollLeft:function(t,r){return this._scroll(t,r,"pageXOffset","scrollLeft")},scrollTop:function(t,r){return this._scroll(t,r,"pageYOffset","scrollTop",!0)}}}(),e=function(t,r){var n=t.css(r),o=n?parseInt(n.replace("px","")):0/0;return isNaN(o)?0:o},i=function(t){var r=e(t,"paddingLeft"),n=t.width(),o=e(t,"paddingRight");return r+n+o},s=function(t,r){var n=r?e(t,"marginTop"):0,o=e(t,"borderTopWidth"),i=e(t,"paddingTop"),s=t.height(),f=e(t,"fontSize"),u=e(t,"paddingBottom"),l=e(t,"borderBottomWidth"),c=r?e(t,"marginBottom"):0;return f>s&&(s=f),n+o+i+s+u+l+c},f=function(t,r){var n=r?e(t,"marginLeft"):0,o=e(t,"borderLeftWidth"),i=e(t,"paddingLeft"),s=t.width(),f=e(t,"paddingRight"),u=e(t,"borderRightWidth"),l=r?e(t,"marginRight"):0;return n+o+i+s+f+u+l},o=function(){return r.apply(r,arguments)},o.innerWidth=function(t){return r.fn.innerWidth?t.innerWidth():i(t)},o.outerHeight=function(t,n){var o=n?n:!1;return r.fn.outerHeight?t.outerHeight(o):s(t,o)},o.outerWidth=function(t,n){var o=n?n:!1;return r.fn.outerWidth?t.outerWidth(o):f(t,o)},o.position=function(t){return r.fn.position?t.position():n.position(t)},o.scrollTop=function(t,o){return r.fn.scrollTop?function(t,r){return t.scrollTop.apply(t,r)}(r(t),Array.prototype.slice.call(arguments,1)):n.scrollTop(t,o)},o.scrollLeft=function(t,o){return r.fn.scrollLeft?function(t,r){return t.scrollLeft.apply(t,r)}(r(t),Array.prototype.slice.call(arguments,1)):n.scrollLeft(t,o)},o.parseHtml=function(t){return o(r.parseHTML(r.trim(t)))},o.isWithinBounds=function(t,r,n){var e=t.offset(),i=e.left,s=e.top,f=o.outerWidth(t),u=o.outerHeight(t);return r>i&&i+f>r&&n>s&&s+u>n},t.extLibs=o}(TFCApp,tfcJQuery);
!function(e){"use strict";var t=e.extLibs=e.extLibs||{};t.contains=function(e,t){do{if(t===e)return!0;t=t.parentNode}while(t);return!1};var n={canBubble:!0,cancelable:!0,view:window,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null};t.mouseEvent=function(e,t,c){var i,a=document.createEvent("MouseEvent");"object"==typeof t?c=t:(c=c||{},c.type=t);for(i in n)n.hasOwnProperty(i)&&!c.hasOwnProperty(i)&&(c[i]=n[i]);c.button=0,a.initMouseEvent(c.type,c.canBubble,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),e.dispatchEvent(a)},t.click=function(e,n){t.mouseEvent(e,"click",n)}}(TFCApp);
/*!
 * Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 *
 * Extended to included support for private methods and variables
 * through the use of a proxy object on instantiation.
 */
!function(t){"use strict";function n(){function t(){var t=this;f||t._constructor&&t._constructor.apply(t,arguments)}return t}function r(t,n){var r;return f=!0,r=new n,f=!1,s(t,r,n),r}function o(){throw new Error("Unimplemented abstract function")}function e(t,n){return function(){var r,o=this._super;return this._super=n,r=t.apply(this,arguments),this._super=o,r}}function s(t,n,r){var o;for(o in t)t.hasOwnProperty(o)&&(n[o]=r&&"function"==typeof t[o]&&"function"==typeof r.prototype[o]&&a.test(t[o])?e(t[o],r.prototype[o]):t[o])}function u(o){var e,s;return s=this,e=n(),e.prototype=r(o,s),e.prototype.constructor=e,e.extend=t.bind(u,e),e.isSubClassOf=i,e}function i(t){return this.prototype instanceof t}function p(){var t,n=this;for(t in n)n.hasOwnProperty(t)&&delete n[t]}var c,f=!1,a=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;c=n(),c.prototype.destroy=p,c.extend=t.bind(u,c),c.isSubClassOf=i,c.unimplemented=o,t.Class=c}(TFCApp);
!function(e){var n,i=e.Class,l={TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,OFF:6};e.utility.LoggerEngine=n=i.extend({log:i.unimplemented,raise:i.unimplemented}),n.LevelMap=l}(TFCApp);
!function(n){var o=n.utility,e=o.LoggerEngine,i=(e.LevelMap,window.console),l=!!i,t={TRACE:"log",DEBUG:"log",INFO:"info",WARN:"warn",ERROR:"error"};n.utility.ConsoleLoggerEngine=e.extend({_constructor:function(n){this.level=n},log:function(n,o){var e=t[n];l&&i[e]&&(i[e].apply?i[e].apply(i,o):i[e](o))},raise:function(){}})}(TFCApp);
!function(n){"use strict";function e(n){var e=(new Error).stack;this.name="RaiseError",this.message=n,e&&(this.stack=e)}function r(e,r,t){return[[n.util.isoDateString(),e,"["+r+"]"].join(" ")].concat(t)}function t(e,t){var i,o,s=g[e];i=r(e,t,n.util.slice(arguments,2));for(var u=0;u<l.length;++u)o=l[u],o.level<=s&&l[u].log(e,i)}function i(t){var i,o;i=r("EXCEPTION",t,n.util.slice(arguments,1));for(var s=new e(i.join(" ")),u=0;u<l.length;++u)o=l[u],o.level!==g.OFF&&o.raise(s);throw s}var o=n.utility,g=o.LoggerEngine.LevelMap,l=[];e.prototype=Object.create(Error.prototype),e.prototype.constructor=e;var s={RaiseError:e,getLogger:function(e){return{trace:n.bind(t,null,"TRACE",e),debug:n.bind(t,null,"DEBUG",e),info:n.bind(t,null,"INFO",e),warn:n.bind(t,null,"WARN",e),error:n.bind(t,null,"ERROR",e),raise:n.bind(i,null,e)}},registerLoggingEngine:function(n){l.push(n)}};s.registerLoggingEngine(s.console=new o.ConsoleLoggerEngine(n.isDevMode()?g.DEBUG:g.WARN)),o.Logger=s}(TFCApp);
/*!
 * domready (c) Dustin Diaz 2012 - License MIT
 */
!function(t){"use strict";function e(t){for(g=1;t=d.shift();)n(t)}function n(t){try{t()}catch(e){r.error(e)}}var o,c,r=t.utility.Logger.getLogger("TFCdomready"),d=[],a=!1,i=document,u=i.documentElement,f=u.doScroll,s="DOMContentLoaded",l="addEventListener",h="onreadystatechange",m="readyState",y=f?/^loaded|^c/:/^loaded|c/,g=y.test(i[m]);i[l]&&i[l](s,o=function(){i.removeEventListener(s,o,a),e()},a),f&&i.attachEvent(h,o=function(){/^c/.test(i[m])&&(i.detachEvent(h,o),e())}),t.extLibs.domready=c=f?function(t){self!=top?g?n(t):d.push(t):function(){try{u.doScroll("left")}catch(e){return setTimeout(function(){c(t)},50)}n(t)}()}:function(t){g?n(t):d.push(t)}}(TFCApp);
!function(){"use strict";window.TFPApp={analytics:{},component:{},utility:{},manager:{},view:{},nav:{}}}();
!function(t){"use strict";var e=t.Class,n=e.unimplemented,i=e.extend({getElem:n,setElem:n,removeElem:n,_each:n,_eachReverse:n,_size:function(){var e=0;return t.util.each(this,function(){++e}),e},_containsKey:function(e){var n=this;return!!t.util.find(n,function(i){return t.util.objEquals(i,e,n._strictKeys)})},_containsVal:function(e,n){return!!t.util.find(this,function(i,u){return t.util.objEquals(u,e,n)})},_isSorted:!1,_strictKeys:!0});t.Collection=i}(TFCApp);
!function(t){"use strict";var e=t.Collection.extend({_constructor:function(e,i){var n=this;void 0!==e&&(n._strictKeys=e),i?t.util.usesStrictKeys(i)&&!n._strictKeys?(n._map=[],t.util.each(i,t.bind(n.setElem,n))):n._map=t.util.keyValPairs(i):n._map=[]},getElem:function(t){var e=this._findEntry(t);return e&&e.val.val},setElem:function(t,e){var i=this._map,n=this._findEntry(t);n?n.val.val=e:i.push({key:t,val:e})},removeElem:function(t){var e=this._findEntry(t);return e&&this._map.splice(e.key,1),e&&e.val.val},_each:function(t){var e,i,n=this._map;for(e=0;e<n.length&&(i=n[e],t(i.key,i.val)!==!1);++e);},_eachReverse:function(t){var e,i,n=this._map;for(e=n.length-1;e>=0&&(i=n[e],t(i.key,i.val)!==!1);--e);},_findEntry:function(e){var i=this;return t.util.find(i._map,function(n,r){return t.util.objEquals(r.key,e,i._strictKeys)})},_size:function(){return this._map.length},_map:null,_isSorted:!0});t.SortedMap=e}(TFCApp);
!function(n,t,e){"use strict";function r(){return h.getLogger("TFCUtil")}function o(n,t){return t}function i(n){return n===e?!0:n}function a(n){var t;return n instanceof m?n:(t=p.type(n),"array"===t?new f(e,n):"object"===t||"function"===t?new l(e,n):void d.raise("Object is not a collection-like type",n))}function u(n){return n instanceof s?n.obj():n}function c(n,t){p[n+p.capitalize(t)]=function(){var e=p[n].apply(p,arguments);return e&&e[t]}}var s,f,l,p=n.util={},h=n.utility.Logger,d=r(),m=n.Collection,g=Array.prototype,y=g.slice,v=navigator.userAgent;s=m.extend({getElem:function(n){return this._obj[n]},setElem:function(n,t){this._obj[n]=t},obj:function(){return this._obj},_containsKey:function(n){return n in this._obj},_obj:null,_strictKeys:!0}),f=s.extend({_constructor:function(n,t){this._obj=t||[]},pushElem:function(n){this._obj.push(n)},removeElem:function(n){var t=this.getElem(n);return this._obj.splice(n,1),t},_each:function(n){var t,e=this._obj;for(t=0;t<e.length&&n(t,e[t])!==!1;++t);},_eachReverse:function(n){var t,e=this._obj;for(t=e.length-1;t>=0&&n(t,e[t])!==!1;--t);},_size:function(){return this._obj.length},_containsVal:function(n,t){var e=g.indexOf;return t&&e?e.call(this._obj,n)>=0:this._super(n,t)},_isSorted:!0}),l=s.extend({_constructor:function(n,t){this._obj=t||{}},removeElem:function(n){var t=this.getElem(n);return delete this._obj[n],t},_each:function(n){var t,e=this._obj;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(t,e[t])===!1)break}}),p.stringToBool=function(n){return"true"===n},p.stringStartsWith=function(n,t){return 0===n.lastIndexOf(t,0)},p.stringEndsWith=function(n,t){return n.indexOf(t,n.length-t.length)>=0},p.filter=function(n,t){return p.partition(n,t)["true"]},p.partition=function(n,t){var e=a(n),r=new e.constructor(e._strictKeys),o=new e.constructor(e._strictKeys);return p.each(e,function(n,e){var i=t(n,e)?r:o;i instanceof f?i.pushElem(e):i.setElem(n,e)}),{"true":u(r),"false":u(o)}},p.map=function(n,t){var e=a(n),r=new e.constructor(e._strictKeys);return p.each(e,function(n,e){r instanceof f?r.pushElem(t(n,e)):r.setElem(n,t(n,e))}),u(r)},p.flatMap=function(n,t){return p.filter(p.map(n,t),function(n,t){return null!==t&&t!==e})},p.reverse=function(n){var t,e=a(n);return t=new e.constructor(e._strictKeys),p.eachReverse(e,function(n,e){t instanceof f?t.pushElem(e):t.setElem(n,e)}),u(t)},p.count=function(n,t){return p.size(p.filter(n,t))},p.sum=function(n){var t=0;return p.each(n,function(n,e){t+=e}),t},p.noop=function(){},p.reduce=function(n,t,r){var o,i=!1;if(r!==e)o=r;else{if(!p.isArray(n))throw new Error("you must provide an initial value when reducing an object");if(0===n.length)throw new TypeError("Reduce of empty array with no initial value");o=n[0],n=n.slice(1),i=!0}return p.each(n,function(e,r){e=i?e+1:e,o=t(o,e,r,n)}),o},p.groupByPreservingOrder=function(t,e,r){var o,c=a(t);if(r=i(r),o=new n.SortedMap(r),!c._isSorted)throw"TFCApp.util.groupByPreservingOrder cannot preserve order on unordered inputs";return p.each(c,function(n,t){var r,i=e(n,t);p.containsKey(o,i)?r=o.getElem(i):(r=new c.constructor(c._strictKeys),o.setElem(i,r)),c instanceof f?r.pushElem(t):r.setElem(n,t)}),p.map(o,function(n,t){return u(t)})},p.objKeys=function(n){var t=[];return p.each(n,function(n){t.push(n)}),t},p.objVals=function(n){var t=[];return p.each(n,function(n,e){t.push(e)}),t},p.keyValPairs=function(n){var t=[];return p.each(n,function(n,e){t.push({key:n,val:e})}),t},p.forAll=function(n,t){var e=!0;return p.each(n,function(n,r){return e=t(n,r)}),e},p.objEquals=function(n,t,e){var r,o;return n===t?!0:(e=i(e))?n===t:(r=p.type(n),o=p.type(t),"object"===r||"array"===r?r===o&&p.size(n)===p.size(t)&&p.forAll(n,function(n,r){return p.objEquals(r,t[n],e)}):n===t)},p.size=function(n){return a(n)._size()},p.isEmpty=function(n){return 0===p.size(n)},p.nonEmpty=function(n){return p.size(n)>0},p.containsKey=function(n,t){return a(n)._containsKey(t)},p.containsVal=function(n,t,e){return e=i(e),a(n)._containsVal(t,e)},p.distinctVals=function(n,t){var e=[];return t=i(t),p.each(n,function(n,r){p.containsVal(e,r,t)||e.push(r)}),e},p.loadScript=function(n){function t(n){return function(){o.removeChild(e),n&&n()}}var e,r,o=document.body;return p.isNonZeroLengthString(n.url)||d.raise("loadScript options must have a non-empty url",n),n.cache=!1!==n.cache,n.cache||(n.data&&n.data.hasOwnProperty("_")&&d.error("do not use _ as a parameter name! loadScript will overwrite data._"),n.data=p.extend(n.data,{_:p.now()})),"object"===p.type(n.data)&&(r=n.url.indexOf("?")>-1?"&":"?",n.url+=r+p.param(n.data)),e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src=n.url,e.onload=t(n.success),e.onerror=t(n.error),void o.appendChild(e)},p.getCookie=function(n){var t=null;return p.each(document.cookie.split("; "),function(e,r){var o=r.indexOf("="),i=r.substr(0,o);return i===n?(t=r.substr(o+1),!1):void 0}),t},p.setCookie=function(n){var t,e,r,o,i;"object"===p.type(n)&&"string"===p.type(n.name)&&"string"===p.type(n.value)&&(t=n.name+"="+n.value,e="string"==typeof n.domain?n.domain:p.parseParentDomain(),p.isNonZeroLengthString(e)&&(t+=";domain="+e),r=p.isNonZeroLengthString(n.path)?n.path:"/",t+=";path="+r,o=parseInt(n.maxAge),isNaN(o)||(0>=o?o=i=0:i=(new Date).getTime()+1e3*o,t+=";max-age="+o,t+=";expires="+new Date(i).toUTCString()),document.cookie=t)},p.deleteCookie=function(n){"object"===p.type(n)&&p.setCookie({name:n.name,value:"",domain:n.domain,path:n.path,maxAge:0})},function(){var n,t,e;n="\\[]{}()+*?!=^$,.-|:",t="\\"+n.split("").join("\\"),e=new RegExp("(["+t+"])","g"),p.regexSafe=function(n){return n.replace(e,"\\$1")},n=t=null}(),p.parseOrigin=function(n){return n.replace(/^\s*([^:]+:[\/\\]{2}[^\/\?\#\\]*).*$/,"$1")},p.parseParentDomain=function(n){var t,e,o=r();return n=n||document.location.href,t=p.parseOrigin(n).replace(/^[^:]+:[\/\\]{2}([^:]*)(:[0-9]+)?$/,"$1"),""===t||"localhost"===t||"about:blank"===t?null:t===n?(o.error("Could not parse domain from URL "+n),null):(e=/(^[^\.]+$)|([^\.]+\.([^\.]{2}\.)?[^\.]+\.?$)/.exec(t),e?e[0]:(o.error("Could not parse parent domain from domain "+t),null))},p.isNonZeroLengthString=function(n){return"string"===p.type(n)&&n.length>0},p.addParamIfNonZeroLengthString=function(n,t,e){p.isNonZeroLengthString(e)&&(n[t]=e)},p.addParamIfDefined=function(n,t,r){r!==e&&(n[t]=r)},p.chooseUri=function(n,t){return"https:"===document.location.protocol?n:t},p.arrayToPairs=function(n){var t={};return p.each(n,function(n,e){t[e]=e}),t},p.param=function(n,t){if("object"!==p.type(n))throw"Invalid argument passed to util.param ["+p.type(n)+"]";var e=[];return p.each(n,function(n,r){var o=p.type(r);p.isPrimitive(r)?e.push(encodeURIComponent(n)+"="+encodeURIComponent(r)):"array"===o&&t?p.each(r,function(t,r){e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):"array"===o||"object"===o?e.push(encodeURIComponent(n)+"="+encodeURIComponent(JSON.stringify(r))):d.raise("Invalid type passed to util.param",n,r)}),e.join("&")},p.deparam=function(n){var t,e,r,o,i,a={},u=n.split("&");for(t=0,e=u.length;e>t;++t)if(r=u[t].split("=",2),2===r.length)try{o=decodeURIComponent(r[0]),i=decodeURIComponent(r[1]),a[o]=i}catch(c){d.warn("Failed to decode query parameters[key="+r[0]+",value="+r[1]+"]")}return a},p.getAttributes=function(n){var t={};return p.each(n.get(0).attributes,function(n,e){t[e.nodeName]=e.nodeValue}),t},p.keyToPrintableCharacter=function(n){var t=String.fromCharCode(n),e=t.charCodeAt(0);return e>=32&&126>=e?t:""},p.arrayIndexOf=function(n,t){var e=-1;return p.each(n,function(n,r){return r===t?(e=n,!1):void 0}),e},p.getQueryParams=function(n){return p.deparam((n||p.getLocationWithoutHash()).split("?",2)[1]||"")},p.getLocationWithoutHash=function(){return document.location.href.split("#",2)[0]},p.getLocationHash=function(){return/^[^#]+#?(.*)$/.exec(document.location.href)[1]},p.isMobileSafari=/mobile.+safari/i.test(navigator.userAgent),p.isTouchSupported="object"==typeof t.Touch,p.syncTiming=function(n){return p.asyncTiming(function(t){var e=n();return{elapsed:t(),result:e}})},p.asyncTiming=function(n){var t=(new Date).getTime();return n(function(){return(new Date).getTime()-t})},p.defaultValue=function(n,t){return n!==e?n:t},p.addIfDefined=function(n,t,r){var o=t[n];o!==e&&(r[n]=o)},p.randomInt=function(n,t){return n+Math.floor((t-n+1)*Math.random())},p.uuid=function(){function n(n){for(var t="",e=0;e<n.length;++e)t+=n[e].toString(16);return t}var e=t.crypto||t.msCrypto;return e&&t.Uint8Array?function(){for(var t=new Uint8Array(16),r=e.getRandomValues(t),o=[],i=0;i<r.length;++i)o.push(12===o.length?4:16===o.length?3&r[0]|8:r[i]>>4),o.push(15&r[i]);return n(o.splice(0,8))+"-"+n(o.splice(0,4))+"-"+n(o.splice(0,4))+"-"+n(o.splice(0,4))+"-"+n(o)}:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){return("x"===n?p.randomInt(0,15):8|p.randomInt(0,3)).toString(16)})}}(),p.each=function(n,t){n&&a(n)._each(t)},p.eachReverse=function(n,t){n&&a(n)._eachReverse(t)},p.usesStrictKeys=function(n){return a(n)._strictKeys},p.extend=function(n){var t=p.slice(arguments,1);return n=n||{},p.each(t,function(t,e){e&&p.each(e,function(t,e){n[t]=e})}),n},p.slice=function(n){return p.isArrayLike(n)||d.raise("You must provide an array-like object to util#slice"),y.apply(n,y.call(arguments,1))},p.last=function(n){return p.isArrayLike(n)||d.raise("You must provide an array-like object to util#last"),n[n.length-1]},p.drop=function(n,t){return p.isArrayLike(n)||d.raise("You must provide an array-like object to util#drop"),t===e&&(t=1),y.call(n,Math.max(0,t))},p.dropRight=function(n,t){return p.isArrayLike(n)||d.raise("You must provide an array-like object to util#dropRight"),t===e&&(t=1),t=n.length-t,y.call(n,0,Math.max(0,t))},p.pad=function(n){return("number"!==p.type(n)||0>n||n%1!==0)&&d.raise("util.pad called with non-natural number:",n),10>n&&"0"+n||n.toString()},/*! Adapted from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString
   *  Any copyright is dedicated to the Public Domain. http://creativecommons.org/publicdomain/zero/1.0/ */
p.isoDateString=function(){var n=p.pad,t=new Date;return t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+" "+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+"."+(t.getMilliseconds()/1e3).toFixed(3).slice(2)},p.now=function(){return(new Date).getTime()},p.isNaN=function(n){return"number"===p.type(n)&&isNaN(n)},p.isPrimitive=function(n){var t=p.type(n);return"boolean"===t||"number"===t||"string"===t},/*!
   * Start of code derived from jQuery
   */
/*!
   * jQuery JavaScript Library v1.8.3
   * http://jquery.com/
   *
   * Includes Sizzle.js
   * http://sizzlejs.com/
   *
   * Copyright 2012 jQuery Foundation and other contributors
   * Released under the MIT license
   * http://jquery.org/license
   *
   * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
   */
function(){var n,t,e=Object.prototype.toString,r={},o="Boolean Number String Function Array Date RegExp Object".split(" ");for(n=0;n<o.length;++n)t=o[n],r["[object "+t+"]"]=t.toLowerCase();p.type=function(n){return null==n?String(n):r[e.call(n)]||"object"}}(),p.isPlainObject=function(n){return!(!n||"object"!==p.type(n)||n.constructor!==Object)},p.isArray=function(n){return"array"===p.type(n)},p.isFunction=function(n){return"function"===p.type(n)},p.isVisible=function(n){return n.offsetWidth>0||n.offsetHeight>0},/*!
   * End of code derived from jQuery
   */
p.isConstructor=function(n){try{return!0}catch(t){return!1}},p.capitalize=function(n){return n.charAt(0).toUpperCase()+n.substr(1)},p.camelCase=function(){var n=/-(\w)/g;return function(t){return t.toLowerCase().replace(n,function(n,t){return t.toUpperCase()})}}(),p.find=function(n,t){var r=e;return p.each(n,function(n,e){return t(n,e)?(r={key:n,val:e},!1):void 0}),r},p.head=function(n){var t;if(n!==e){if(t=a(n),!t._isSorted)throw new Error("TFCApp.util.head is not intended for unordered inputs");return p.find(t,function(){return!0})}return e},p.each(["find","head"],function(n,t){c(t,"key"),c(t,"val")}),p.readOnly=function(n){return"object"===p.type(n)&&p.isFunction(Object.defineProperty)&&p.each(n,function(t){Object.defineProperty(n,t,{writable:!1})}),n},p.hashKey=function(n){var t,e,r,o=p.type(n);switch(o){case"array":return t=p.map(n,function(n,t){return p.hashKey(t)}),"["+t.join(",")+"]";case"object":return e=p.objKeys(n).sort(),r=p.map(e,function(t,e){return JSON.stringify(e)+":"+p.hashKey(n[e])}),"{"+r.join(",")+"}";case"date":return n.toUTCString();case"string":return JSON.stringify(n);case"null":case"undefined":return o;case"boolean":case"number":case"regexp":case"function":return n.toString()}},p.isArrayLike=function(n){return!(!n||"number"!==p.type(n.length))},/*!
   * Code in this section is derived from underscore.js
   *
   *     Underscore.js 1.8.3
   *     http://underscorejs.org
   *     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *     Underscore may be freely distributed under the MIT license.
   */
p.debounce=function(n,t,e){var r,o,i,a,u,c=function(){var s=p.now()-a;t>s&&s>=0?r=setTimeout(c,t-s):(r=null,e||(u=n.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,a=p.now();var s=e&&!r;return r||(r=setTimeout(c,t)),s&&(u=n.apply(i,o),i=o=null),u}},/*!
   End underscore.js code
   */
p.each({max:-1/0,min:1/0},function(n,t){p[n]=function(e,r){var i=t,a=null;return r=r||o,p.each(e,function(e,o){var u=r(e,o);(u!==i&&Math[n](i,u)===u||u===t&&null===a)&&(i=u,a={key:e,val:o},a[n]=u)}),a},p[n+"Val"]=function(t,e){var r=p[n](t,e);return r&&r[n]}}),p.requestAnimationFrame=n.bind(t.requestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||t.mozRequestAnimationFrame||function(n){return setTimeout(n,1e3/60)},t),p.round=function(n,t){t=t||0;var e=Math.pow(10,t);return Math.round(n*e)/e},p.retry=function(n,t,e){function r(a){o=(new Date).getTime(),n(function(){t()},function(){var n=100*(1<<a-1),t=(new Date).getTime()-o,u=n-t;a===i?e():setTimeout(function(){r(++a)},Math.max(0,u))})}var o,i=10;r(1)},p.isHttpSuccess=function(n){return n>=200&&300>n},p.isRealMouseEvent=function(n){return n.isTrusted===!1?!1:!(0===n.screenX&&0===n.screenY&&0===n.clientX&&0===n.clientY)},p.browser=p.readOnly({isEdge:/Edge/.test(v),isIE:/MSIE/.test(v),isIE10:/MSIE 10/.test(v)})}(TFCApp,window,void 0);
!function(e){"use strict";e.KeyCodes={Enter:13,Escape:27,Up:38,Down:40,Tab:9}}(TFCApp);
!function(t){"use strict";function n(){for(var t="",n=0;I>n;n++)t+="  ";return t}function e(t,e,r){var i=!0,u=T.slice(arguments,3),s=u.length>1;return T.each(u,function(r,o){var c,p=t[r];if(o instanceof a){if(!o.test(p))return c=["Invalid argument(s) passed to "+(e||"function")+". \nExpected type"+(s?"s":"")+":(",T.map(u,function(t,e){return"\n"+n()+e.expected()}),"\n)\nbut got:\n"],i=[c.join(""),t,". Additionally, Function.prototype.bind=",Function.prototype.bind.toString()],!1}else S.raise("Invalid argument passed to TFCApp.checkArgs (curry 2)")}),r(i)}function r(n,r,i){return T.isArrayLike(n)&&(void 0===r||T.isNonZeroLengthString(r))?t.bind(e,null,n,r,i):void S.raise("Invalid argument passed to TFCApp.checkArgs (curry 1)")}function i(t,n){return r(t,n,function(t){return t!==!0&&(S.error.apply(S,t),S.raise("Invalid arguments found by checkArgs. See error log.")),t})}function u(t,n){return r(t,n,function(t){return t!==!0&&S.error.apply(S,t),t})}function s(t,n){(!T.isArray(t)||t.length<2||!o(t))&&S.raise(n+" requires an array of at least two types as its type")}function o(t){var n=T.isPlainObject(t)||T.isArray(t);return n&&T.each(t,function(t,e){return e instanceof a?void 0:(n=!1,!1)}),n}var c,a,p,_,f,l,h,d,y,g,v,x,m,w,b,A,j=t.Class,O=j.unimplemented,T=t.util,S=t.utility.Logger.getLogger("TypeHelper"),I=1;a=j.extend({_constructor:function(t,n,e){this._type=t,this.__not=!!n,this.__optional=!!e},not:function(){return new(this._class())(this._type,!this.__not,this.__optional)},optional:function(){return new(this._class())(this._type,this.__not,!0)},test:function(t){return this.__optional&&void 0===t||this.__not&&!this._test(t)||!this.__not&&this._test(t)},_test:O,expected:function(){var t=(this.__not?"not ":"")+this._expected();return this.__optional?"optional("+t+")":t},_expected:O,_class:O,_type:null,__not:null,__optional:null}),p=a.extend({_test:function(t){return T.type(t)===this._type},_expected:function(){return this._type},_class:function(){return p}}),l=p.extend({_constructor:function(t,n,e){this._super("number",n,e)},_class:function(){return l},fromString:function(t){i(arguments)(c.String);var n=parseFloat(t);return isFinite(n)?n:void 0}}),h=l.extend({_test:function(t){return this._super(t)&&t%1===0},_expected:function(){return"integer"},_class:function(){return h},fromString:function(t){i(arguments)(c.String);var n=this._super(t);return this._test(n)?n:void 0}}),d=p.extend({_constructor:function(t,n,e){this._super("boolean",n,e)},_class:function(){return d},fromString:function(t){switch(i(arguments)(c.String),t){case"true":return!0;case"false":return!1}return void 0}}),y=p.extend({_constructor:function(t,n,e){this._super("string",n,e)},_class:function(){return y},fromString:function(t){return i(arguments)(c.String),t}}),g=p.extend({_constructor:function(t,n,e){this._super("array",n,e)},_class:function(){return g}}),w=a.extend({_constructor:function(t,n,e){s(t,"TupleType"),this._super(t,n,e)},_test:function(t){var n=T.isArray(t)&&t.length===this._type.length;return n&&T.each(this._type,function(e,r){return r.test(t[e])?void 0:(n=!1,!1)}),n},_expected:function(){var t=T.map(this._type,function(t,n){return n.expected()});return"Tuple"+t.length+"["+t.join(", ")+"]"},_class:function(){return w}}),b=a.extend({_constructor:function(t,n,e){s(t,"OrType"),this._super(t,n,e)},_test:function(t){var n=!1;return T.each(this._type,function(e,r){return r.test(t)?(n=!0,!1):void 0}),n},_expected:function(){var t=T.map(this._type,function(t,n){return n.expected()});return"one of ("+t.join(", or ")+")"},_class:function(){return b}}),A=a.extend({_constructor:function(n,e,r){var i=t.type.Tuple(t.type.Or(t.type.Instance(g),t.type.Instance(v)),t.type.Instance(a));i.test(n)||S.raise("OfType requires "+i.expected()+" as its type"),this._super(n,e,r)},_test:function(t){var n=this._type,e=n[0].test(t);return e&&T.each(t,function(t,r){return n[1].test(r)?void 0:(e=!1,!1)}),e},_expected:function(){var t=this._type;return t[0].expected()+" of "+t[1].expected()},_class:function(){return A}}),_=p.extend({_constructor:function(t,n,e){var r=T.isPlainObject(t);r&&T.each(t,function(t,n){return n instanceof a?void 0:(r=!1,!1)}),r||S.raise("ObjectType type argument must be a plain object with Type values"),this._super(t,n,e)},_test:function(t){var n=T.isPlainObject(t);return n&&T.each(this._type,function(e,r){return r.test(t[e])?void 0:(n=!1,!1)}),n},_expected:function(){var t=[];return I++,T.each(this._type,function(e,r){t.push(n()+e+":"+r.expected())}),I--,"{\n"+t.join(", \n")+"\n"+n()+"}"},_class:function(){return _}}),v=_.extend({_constructor:function(t,n,e){this._super({},n,e)},_expected:function(){return"object"},_class:function(){return v}}),f=a.extend({_constructor:function(t,n,e){T.isConstructor(t)||S.raise("InstanceType type argument must be a function/constructor"),this._super(t,n,e)},_test:function(t){return t instanceof this._type},_expected:function(){return"instance of "+(this._type.name||"anonymous")},_class:function(){return f}}),m=a.extend({_test:function(){return!0},_expected:function(){return"any"},_class:function(){return m}}),x=new p("function"),c={Any:new m,Null:new p("null"),Boolean:new d,Number:new l,Integer:new h,String:new y,Function:x,Array:new g,PlainObject:new v,Promise:new _({then:x}),Object:function(t){return new _(t)},Instance:function(t){return new f(t)},Tuple:function(t){return t=T.slice(arguments),new w(t)},Or:function(t){return t=T.slice(arguments),new b(t)},ArrayOf:function(t){return new A([c.Array,t])},ObjectOf:function(t){return new A([c.PlainObject,t])}},t.type=c,t.checkArgs=i,t.checkArgsSoft=u}(TFCApp);
!function(e){"use strict";var t=e.util,n=e.type,i=e.checkArgs,r=function(e,n){var i={};return n&&t.each(n,function(e,n){t.addParamIfNonZeroLengthString(i,e,n)}),e+"?"+t.param(i,!1)},a={post:function(e){i(arguments)(n.Object({serviceUrl:n.String.optional(),serviceSecureUrl:n.String,data:n.Or(n.String,n.PlainObject),queryParameters:n.PlainObject.optional(),success:n.Function.optional(),failure:n.Function.optional()}));var a,s,o,c=e.serviceUrl,u=e.serviceSecureUrl,p=e.data,l=e.success,g=e.failure,S=e.queryParameters;a=t.isPlainObject(p)||t.isArray(p)?JSON.stringify(p):p,t.isNonZeroLengthString(u)&&(t.isNonZeroLengthString(c)||void 0===c)&&(o=new XMLHttpRequest,"withCredentials"in o?(s=r(u,S),o.open("POST",s,!0),o.setRequestHeader("Content-Type","application/json; charset=UTF-8")):"undefined"!=typeof XDomainRequest&&(o=new XDomainRequest,s=r(t.chooseUri(u,c),S),o.open("POST",s))),o&&(o.send(a),o.onreadystatechange=function(){4===o.readyState&&(t.isHttpSuccess(o.status)?l&&l(o):g&&g(o))})}};e.utility.Http=a}(TFCApp);
!function(e){"use strict";e.FitRecUtil={animateFitScore:function(t,c,i,s,n){function r(){setTimeout(function(){d.text(s[a]),u.text(n[a]),f.hide().show(0)},1),m.animate({opacity:1},o/2)}var o=i||500,a=this.fitDescriptionKey(c),f=e.extLibs(".tfc-fitrec-result",t),d=e.extLibs(".tfc-fit-score-description",f),u=e.extLibs(".tfc-fit-score-description-legacy",f),m=e.extLibs(".tfc-fit-score",f),l=e.extLibs(".tfc-fit-score-background",f),p=e.extLibs(".tfc-fit-score-foreground",l),x=c/5*100+"%";d.text(""),m.text(""),p.css("width",""),this.recommended(c)?f.removeClass("tfc-not-recommended"):f.addClass("tfc-not-recommended"),p.length?p.css("width","0%").animate({width:x},o,r):r()},fitDescriptionKey:function(e){switch(parseFloat(e)){case 5:case 4.5:case 4:return"excellentFit";case 3.5:case 3:return"goodFit";case 2.5:case 2:case 1.5:case 1:case.5:case 0:return"notRecommended";default:return""}},recommended:function(e){return"undefined"!=typeof e&&parseFloat(e)>=3},evalTemplate:function(t,c){var i,s,n="img[src]";if("boolean"!=typeof c&&(c=!1),"string"==typeof t)try{i=e.extLibs.parseHtml(t)}catch(r){}return void 0===i&&(i=e.extLibs()),c&&(s=i.filter(n),i.each(function(e,t){s=s.add(n,t)}),s.each(function(t,c){var i=new Image;i.src=e.extLibs(c).attr("src")})),i}}}(TFCApp);
!function(){"use strict";TFCApp.Signal=TFCApp.Class.extend({_constructor:function(){this._slots=[]},listen:function(t){if("function"!=typeof t)throw"Slot passed into Signal.listen must be a function";this._slots.push(t)},unlisten:function(t){var n,s,i=null,l=this._slots;if("function"!=typeof t)throw"Slot passed into Signal.unlisten must be a function";for(n=0,s=l.length;s>n;++n)if(l[n]===t){i=n;break}null!==i&&l.splice(i,1)},trigger:function(){for(var t=0;t<this._slots.length;++t)this._slots[t].apply(null,arguments)},_slots:null})}();
/*!
 * jQuery postMessage - v0.5 - 9/11/2009
 * http://benalman.com/projects/jquery-postmessage-plugin/
 *
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
!function(n,e,t){"use strict";var r,i=1,a=n.util,o=n.type,s=!!e.postMessage,g=n.Constants.RequestParameter.WindowParams;r={postMessage:function(e,t,r,i,a){if(n.checkArgs(arguments)(o.Any,o.String,o.String,o.String,o.PlainObject.optional()),t&&r){var g={sourceWindowId:r,message:i,data:a};s&&e.postMessage(JSON.stringify(g),t)}},receiveMessage:function(t,i,a){n.checkArgs(arguments)(o.Function,o.String,o.String);var g;s&&(g=function(n){var e;return n.origin!==i&&n.origin+":80"!==i?!1:(e=JSON.parse(n.data),e.sourceWindowId!==a&&r.globalWindowId()!==a?!1:void t(e.message,e.data))},e.addEventListener?e.addEventListener("message",g,!1):e.attachEvent("onmessage",g))},generateWindowParams:function(e){return n.checkArgs(arguments)(o.String),g+"="+encodeURIComponent(e+"!"+a.parseOrigin(t.URL))},parseWindowParams:function(){var n=/^([^!]+)!(.*)$/.exec(a.deparam(a.getLocationHash())[g]),e=n&&n[1],t=n&&n[2];return{sourceWindowId:e||"",retailerOrigin:t||""}},globalWindowId:function(){return"*"},retailerWindowId:function(){return"O"},fitProfileWindowId:function(){return"R"},nextWindowId:function(){return(i++).toString()}},n.postMessageManager=r}(TFCApp,window,document);
!function(e){"use strict";var s=e.Class,a=s.unimplemented,n=s.extend({userSession:a,setSessionParams:a,getSessionParams:a,setSessionParamsMaxAge:a});e.CookieHelper=n}(TFCApp);
!function(e){function t(e){function t(e,t){if(t instanceof HTMLElement)return t.outerHTML;if("object"==typeof t){if(i.indexOf(t)>=0)return"[Circular]";i.push(t)}return t}var i=[];return JSON.stringify(e,t)}var i=e.utility,n=e.type,o=i.LoggerEngine,g=o.LevelMap;e.utility.HttpLoggerEngine=o.extend({_constructor:function(t,i){e.checkArgs(arguments)(n.Object({uri:n.String,secureUri:n.String,tla:n.String,level:n.String,loggingTimeoutDelay:n.Integer,postRequestLimit:n.Integer,clientLogLimit:n.Integer,loggingContextLimit:n.Integer}),n.Instance(e.CookieHelper));var o=this,r="/consumer/ui/"+t.tla+"/client-log";o.level=g[t.level],o._cfg=t,o._serviceUrl=t.uri+r,o._serviceSecureUrl=t.secureUri+r,o._clientLogs=[],o._timeout=null,o._postCount=0,o._loggingContext=[],o._cookieHelper=i},log:function(e,i){var n=g[e],o=this,r=o._cfg,l=o.level;0!==r.loggingContextLimit&&(n===g.INFO||l===g.ERROR&&n===g.WARN)&&(o._loggingContext.length===r.loggingContextLimit&&o._loggingContext.shift(),o._loggingContext.push(t(i))),o._post({level:e,message:t(i)})},raise:function(e){this._post({level:"ERROR",error:e})},_post:function(t){var n,o,g=this,r=g._cfg;g._postCount<r.postRequestLimit&&(null===g._timeout&&(g._timeout=setTimeout(function(){n=g._cookieHelper.userSession(),n&&(o={},o[e.Constants.RequestParameter.UserSession]=n),++g._postCount,i.Http.post({serviceUrl:g._serviceUrl,serviceSecureUrl:g._serviceSecureUrl,queryParameters:o,data:{clientLogs:g._clientLogs,postNumber:g._postCount,loggingContext:g._loggingContext}}),g._clientLogs=[],g._timeout=null,g._loggingContext=[]},r.loggingTimeoutDelay)),g._clientLogs.length<r.clientLogLimit&&g._clientLogs.push(t))}})}(TFCApp);
!function(t){"use strict";var n=t.util,r=window.history,a=["pushState","replaceState"],e=r&&n.forAll(a.concat("state"),function(t,n){return n in r});t.history=e?r:n.extend({state:null},n.map(n.arrayToPairs(a),function(){return n.noop}))}(TFCApp);
!function(e){"use strict";function t(t){e.checkArgs(arguments)(g.String);var n=o.getCookie(t);return n?JSON.parse(decodeURIComponent(n)):{}}function n(t,n,r){e.checkArgs(arguments)(g.String,g.PlainObject,g.Integer.optional());var i,s;o.isEmpty(n)?o.deleteCookie({name:t}):(i=encodeURIComponent(JSON.stringify(n)),s=t.length+i.length,s>4096?a.error("Attempt to save cookie ["+t+"] larger than 4096 bytes ["+s+"]. This is not supported by some browsers."):s>500&&a.warn("Attempt to save cookie ["+t+"] larger than 500 bytes ["+s+"]. Consider reducing the amount of data being stored."),o.setCookie({name:t,value:i,maxAge:r}))}function r(t,r){e.checkArgs(arguments)(g.PlainObject,g.PlainObject),n(c,t,u),n(l,r)}var i,s=e.utility,o=e.util,g=e.type,a=s.Logger.getLogger("Storage"),c="tfc-l",l="tfc-s",u=31536e4,d={Analytics:"a",UserVisit:"v",UserSettings:"s",User:"u",Test:"t"},f={};f[d.Analytics]="tfcAnalytics",f[d.UserVisit]="tfcUserVisit",f[d.UserSettings]="tfcUserSettings",f[d.User]="_tfcUserCookie",i={get:function(n){e.checkArgs(arguments)(g.String);var r=t(c),s=t(l),a=f[n],u=a?o.getCookie(a):null;return n in r?r[n].e<=o.now()/1e3?(i["delete"](n),null):r[n].v:n in s?s[n]:u},set:function(n,s,a){e.checkArgs(arguments)(g.String,g.Or(g.String,g.PlainObject),g.Or(g.Null,g.Integer).optional());var u=t(c),d=t(l),m=f[n];if(m&&o.deleteCookie({name:m}),g.Integer.test(a)){if(0>=a)return void i["delete"](n);delete d[n],u[n]={v:s,e:parseInt(o.now()/1e3+a)}}else delete u[n],d[n]=s;r(u,d)},"delete":function(n){e.checkArgs(arguments)(g.String);var i=t(c),s=t(l),a=f[n];a&&o.deleteCookie({name:a}),delete i[n],delete s[n],r(i,s)},enabled:function(){var e,t=d.Test;return i.set(t,"x"),e="x"===i.get(t),i["delete"](t),e},isLegacy:function(t){return e.checkArgs(arguments)(g.String),!(null===o.getCookie(f[t]))},keys:d},s.Storage=i}(TFCApp);
!function(o){"use strict";var n,e=o.util;n=o.Class.extend({_constructor:function(){var o=this;e.each({openPrivacyPolicy:"privacy-policy",openTermsOfUse:"terms"},function(n,e){o[n]=function(n,t){var i=n+"/ux/"+e+(t?"_"+t:"")+".html";o.openPopup(i,"infopopup")}})},openPopup:function(o,n){var t={menubar:"0",toolbar:"0",location:"0",directories:"0",status:"0",scrollbars:"1",resizable:"0",dependent:"0",width:"820",height:"600",left:"100",top:"100"},i=[];e.each(t,function(o,n){i.push(o+"="+n)}),window.open(o,n,i.join(","))}}),o.popupManager=new n}(TFCApp);
!function(e){"use strict";var s=e.util;e.FitRecResponse={save:function(e){this._response=e},getWidgetResults:function(e){var t=this._response,r=t&&t[e];return r&&(r=s.extend({},r,{tfpUser:t.tfpUser,recipientUser:t.recipientUser,extraClasses:t.extraClasses,userFlags:t.userFlags,locale:t.locale})),r},getLocale:function(){return this._response&&this._response.locale},getStoreUserId:function(){return this._response&&this._response.storeUserId},getResponse:function(){return this._response},_response:null}}(TFCApp);
!function(e,t){"use strict";function i(){var e=u.getQueryParams(),t=null;return u.each(e,function(e,i){u.stringStartsWith(e,"tfc-")&&(t=t||{},t[e.substr(4)]=i)}),t}function n(e,t,i){e[i]=function(){if(!t.legacyEventApiEnabled)throw"Legacy True Fit API (tfc."+i+") is not supported for this retailer";return e["__"+i].apply(e,arguments)}}function r(e){var t={};return t[S.Widget]=[],u.reduce(e,function(e,t,i){var n=i.preCall();return i.getNodes().length>0&&(e[S.Widget].push(i.widgetName),u.each(n,function(t,i){e[t]=(e[t]||[]).concat(i)})),e},t)}function a(e,t,i,n){var r=u.partition(i,function(e){return e===S.Style});u.loadScript({url:e+"/fitrec/"+t+"/fit?"+u.param(r["false"],!0)+"&"+u.param(r["true"],!0),error:n})}function s(e,t,i,n,r,a,s){u.loadScript({url:e+"/fitresources/"+t+"/"+(""===i?"0.0":i)+"/"+(""===n?"0.0":n)+"/"+a+(d(r)?"/"+r:"")+"/templates.js",data:s,cache:!0})}function o(e){return u.filter(e,function(e,i){return i instanceof t.widget.FitRecs})}function c(e,i,n){return function(r){var a,s=u.findVal(i,function(e,t){return t.widgetName===r});s?(a=l.Function.test(n)?n(s):n,t.checkArgsSoft(arguments,"True Fit "+e+" ("+r+")").apply(null,[l.String].concat(a))&&s[e].apply(s,u.slice(arguments,1))):v.error("Invalid widget name passed to the True Fit "+e+" API ["+r+"]")}}var l=t.type,u=t.util,d=u.isNonZeroLengthString,g=u.addParamIfNonZeroLengthString,p=u.addParamIfDefined,f=t.analytics,h=t.postMessageManager,m=t.Constants,S=m.RequestParameter,y=[S.Widget,S.Style],v=t.utility.Logger.getLogger("FitRecService"),P=["calculate","event","update","getProfileUrl"],w=t.FitRecResponse;t.FitRecService=function(A,T){function I(){var e=N.shift();M=!1,void 0!==e&&tfc.__calculate.apply(tfc,e)}function R(e){return u.findVal(e,function(e,t){return d(t)})}function b(e){var t,i=o(U);return u.each(i,function(i,n){u.each(n.getCurrentFitResults(),function(i,n){t||null===t?n[e]!==t&&(t=null):t=n[e]})}),t}var k,C,U=[],F=t.cookieHelper,L=new t.UserVisitTracker,M=!1,N=[],O=!0,V=!1,W=u.stringToBool(A.shimQueryParams[S.AutoCalculate]||"true"),E=A.storeKey,_=A.widgetDeviceType,x=A.serviceMode,J={},z=this;A.userVisitTracker=L,A.userSettings=T,function(){function e(t,i,n){u.each(n,function(n,r){var a,s=t[n],o=u.type(s),c=u.type(r);o!==c?v.error("Attempted to update config with an invalid type (key="+n+",oldType="+o+",newType="+c+")"):"object"===c?e(s,i[n],r):n in i?(a=i[n],a===!0||a(s,r)?t[n]=r:v.error("Attempted to update config with an invalid value (key="+n+",oldValue="+s+",newValue="+r+")")):v.error("Attempted to update config setting that does not allow updating (key="+n+")")})}t.updateConfig=t.bind(e,null,A,{tipConfig:{eventLevel:function(e,i){return t.tips.TipEventLevel[i]<=t.tips.TipEventLevel[e]},pageLoads:!0,hideDelay:!0}})}(),h.receiveMessage(function(e,t){if(l.PlainObject.test(t))switch(e){case m.Message.UserSession:F.userSession(t.value,t.maxAge);break;case m.Message.SessionParams:F.setSessionParams(t.sessionParams);break;case m.Message.SessionParamsMaxAge:F.setSessionParamsMaxAge(t&&t.maxAge)}},A.cdnProfileURI,h.globalWindowId()),u.each(t.widget,function(e,i){var n;u.isFunction(i)&&i.isSubClassOf&&i.isSubClassOf(t.widget.BaseWidget)&&!i.isAbstract&&(U.push(n=new i(A)),J=u.extend(J,n.expectedUpdateTypes()))}),k=u.flatMap(U,function(e,t){return t.isVisible?"."+t.widgetName+" > *":void 0}),k.length>0&&(C="<style>"+k.join(",")+"{display:none}</style>",e(document.getElementsByTagName("head")[0]).prepend(e(C))),this.__calculate=function(e,n){var o,c,d,h,m,P,w,R=n===!0||n&&n.initialCall,b=n&&n.isEnteringData,k=n&&n.recipientLinkId,C=i(),L=t.utility.Storage;if(!R||!V&&W){if(V=!0,M)return void N.push(arguments);W&&void 0!==e&&v.warn("Retailer is using the dynamic calculate API, but autoCalculate is true"),t.checkArgsSoft(arguments,"True Fit calculate")(l.Object(J).optional())&&u.each(U,function(t,i){i.update(e)}),d=r(U),u.isEmpty(d[S.Widget])||(o={},u.each(d,function(e,t){var i=u.distinctVals(t);u.containsVal(y,e)?o[e]=i:(o[e]=i[0],i.length>1&&v.error("Expected one distinct value for the ["+e+"] parameter, but got",i))}),h=o[S.Locale]||"",m=A.tfAnalytics,m||(A.tfAnalytics=m=new f.FitRecTrueFitAnalytics(A.analyticsArgs,A.responsiveManager.currentScreenSize()),A.analyticsManager.addEngine(m.getEngine())),g(o,S.JavascriptIntegrated,"true"),g(o,"_",u.now().toString()),g(o,S.DeviceType,_),g(o,S.AnalyticsScreenSize,m.screenSize()),g(o,S.UserSession,F.userSession()),g(o,S.SessionParams,T.get(t.UserSettings.keys.SessionParams)),g(o,S.SessionParamOverrides,C&&u.param(C)),g(o,S.ServiceMode,x),g(o,S.IsEnteringData,b&&b.toString()),g(o,S.UserHasLegacyCookie,L.isLegacy(L.keys.User).toString()),p(o,S.RecipientLinkId,k&&k.toString()),P=!!u.find(U,function(e,t){return t.isVisible&&t.getNodes().length>0}),w=u.chooseUri(A.serviceSecureURI,A.serviceURI),this.templatesHelper.update(h,P),this.templatesHelper.hasRequiredTemplates()||(c={},g(c,S.ServiceMode,x),s(w,E,A.uxVersion,A.storeVersion,h,_,c)),M=!0,m.getEngine().withTracker(function(e){a(w,E,u.extend(e.touchAndGetParams(),o),I)})||a(w,E,o,I))}},this.__update=c("update",U,function(e){return[l.Object(e.expectedUpdateTypes())]}),this.__event=c("event",U,[l.String,l.Function]),this.templatesHelper={templates:null,callback:null,locale:null,visibleWidgetsOnPage:!1,update:function(e,t){this.visibleWidgetsOnPage=t,e!==this.locale&&(this.locale=e,this.templates=null)},hasRequiredTemplates:function(){return this.templates||!this.visibleWidgetsOnPage},onRequiredTemplatesReady:function(e){this.callback&&v.error("Attempted to set up templates callback, but it already exists"),this.hasRequiredTemplates()?e():this.callback=e},setTemplates:function(e){this.templates=e,u.each(U,function(t,i){i.setTemplates(e)}),this.callback&&(this.callback(),this.callback=null)}},this.processTemplates=function(e){this.templatesHelper.setTemplates(e.templates)},this.process=function(e){w.save(e),this.templatesHelper.onRequiredTemplatesReady(function(){var i=window.performance,n=O&&i&&i.now&&i.now(),r=[];if(u.each(U,function(t,i){i.onFitCallResponse(e);var n=i.widgetName;if(n in e){var a=w.getWidgetResults(n);i.postCall(a),A.analyticsManager.handlePageLoad({isInitialProfileComplete:e.tfpUser.isInitialProfileComplete,pageName:n,funnels:[]}),r.push(i.widgetName)}}),O){if(n){var a=i.now();t.performanceTracker.sendWidgetRender(r,n,a)}L.trackVisits(r),t.preLoadFitProfile(L,A,r),O=!1}I()})},this.__getProfileUrl=function(e){function i(e,t){return d(t)?(n(e,t),!0):!1}function n(e,t){p+="&"+e+"="+encodeURIComponent(t)}var r,a,s,c,l,g,p=A.cdnProfileURI+A.uxVersionPath+"/resources/fitprofile/index.html#/",f=F.userSession(),y=w.getLocale(),v=w.getStoreUserId();if("object"!=typeof e&&(e={}),r=R([e.container,m.Container.Modal]),a=R([e.windowId,h.fitProfileWindowId()]),r!==m.Container.Modal&&a===h.fitProfileWindowId())throw"Called getProfileUrl for a window that is not the account window, and the window ID was invalid";return p+=S.StoreTla+"="+E,c=d(e.userId)?e.userId:d(v)?v:null,c&&(p+="&"+S.UserId+"="+c),i(S.UserSession,f),i(S.ServiceSecureURI,A.serviceSecureURI),i(S.StoreVersionPath,A.storeVersionPath),i(S.DeviceType,_),i(S.AnalyticsScreenSize,A.tfAnalytics.screenSize()),i(S.Gender,R([e.gender,b("gender")])),i(S.Category,e.category),i(S.IPS,e.ips),i(S.FirstName,e.firstName),i(S.AlternateUserId,e.alternateUserId),i(S.Placement,e.placement),i(S.ServiceMode,x),i(S.Locale,y),i(S.StoreRegistered,e.registered),i(S.OriginWidget,e.originWidget),i(S.SourceTrigger,e.sourceTrigger),i(S.Container,r),i(S.SessionParams,T.get(t.UserSettings.keys.SessionParams)),i(S.StyleColorId,e.styleColorId),i(S.AnalyticsArgs,JSON.stringify(A.analyticsArgs)),i(S.UniversalAnalyticsArgs,JSON.stringify(A.universalAnalyticsArgs)),i(S.ThirdPartyAuth,JSON.stringify(A.thirdPartyAuth)),i(S.EditRecipientLinkId,e.editRecipientLinkId),n(S.IsShoppingForOther,!!e.isShoppingForOther),i(S.RecipientAlias,e.recipientAlias),A.responsiveManager&&i(S.ScreenSize,A.responsiveManager.currentScreenSize()),A.customProfileJsEnabled&&i(S.CustomProfileJs,A.customProfileJsEnabled.toString()),A.tfAnalytics.getEngine().withTracker(function(e){p+="&"+u.param(e.touchAndGetParams())}),"string"==typeof e.availableSizes&&(p+="&"+S.AvailableSizes+"="+encodeURIComponent(e.availableSizes)),s=R([e.department,b("department")]),i(S.Department,s),i(S.ProductType,R([e.productType,b("productType")])),n(S.ClientToServerLogging,JSON.stringify(A.clientToServerLogging)),d(e.styleId)?l=[e.styleId]:(l=[],u.each(o(U),function(e,t){u.each(t.getCurrentFitResults(),function(e,t){l.push(t.id)})}),l=u.distinctVals(l)),l.length&&(i(S.Style,JSON.stringify(l)),1===l.length&&(u.each(o(U),function(e,t){return g?!1:void u.each(t.getCurrentFitResults(),function(e,t){return l[0]===t.id?(g=t,!1):void 0})}),g&&i(S.FitRecResult,JSON.stringify(g)))),p+="&"+h.generateWindowParams(a)},u.each(P,function(e,t){n(z,A,t)}),this._widgets=U}}(tfcJQuery,TFCApp);
!function(t){"use strict";t.tfcapiSetup=function(i,e,n){function a(){p.each(r,function(t,i){var a=i[0],l=p.slice(i,1);p.containsVal(e,a)?n["__"+a].apply(n,l):s.error("Retailer attempted to call non-existent True Fit API function: "+a)}),r=[],u=null}var l,r,o=window.tfcapi,u=null,s=t.utility.Logger.getLogger("tfcapi"),c=t.type,p=t.util;i&&"tfcapi"in window&&s.warn("Retailer initialized the tfcapi object, but the legacy integration is still enabled for this retailer. True Fit should disable the legacy integration if the retailer is no longer using it."),c.Function.test(o)&&c.Array.optional().test(o.q)?(window.tfcapi=l=function(){r.push(arguments),null===u&&(u=setTimeout(a,1))},r=o.q||[],a()):i||s.error("Retailer loaded True Fit without properly initializing the tfcapi object. This usually means that True Fit disabled the legacy integration for this retailer, but the retailer is still using it.")}}(TFCApp);
!function(e){"use strict";var s=e.utility.Storage,t=s.keys.User,i=e.utility.Logger.getLogger("FitRecCookieHelper"),r=e.CookieHelper.extend({_constructor:function(e){this._userSettings=e},userSession:function(e,r){return i.trace("FitRecCookieHelper.userSession("+e+","+r+")"),void 0===e?s.get(t):(s.set(t,e,r),e)},setSessionParams:function(s){i.trace("FitRecCookieHelper.setSessionParams("+s+")"),this._userSettings.set(e.UserSettings.keys.SessionParams,s)},getSessionParams:function(){return this._userSettings.get(e.UserSettings.keys.SessionParams)},setSessionParamsMaxAge:function(e){i.trace("FitRecCookieHelper.setSessionParamsMaxAge("+e+")"),this._userSettings.setMaxAge(e)},_userSettings:null});e.FitRecCookieHelper=r}(TFCApp);
!function(t,e){"use strict";var n=e.util,r=e.type,i=e.Constants,a=e.FitRecResponse,s=i.Attributes,o=i.RequestParameter,c=e.utility.Logger.getLogger("True Fit Widget"),l={},u={};l[s.STORE_REGISTERED]=o.StoreRegistered,l[s.USER_ID]=o.UserId,l[s.USERID]=o.UserId,l[s.ALT_USER_ID]=o.AlternateUserId,l[s.LOCALE]=o.Locale,l[s.STYLE_ID]=o.Style,l[s.CONTEXT]=o.WidgetContext,l[s.ORDER_ID]=o.OrderId,u.registered=s.STORE_REGISTERED,u.userId=s.USERID,u.locale=s.LOCALE,u.colorId=s.STYLE_COLOR_ID,u.availableSizes=s.AVAILABLE_SIZES,u.orderId=s.ORDER_ID;var d=e.Class.extend({context:null,eventHash:null,templates:null,widgetName:null,isVisible:!0,event:function(t,r){var i;if("string"==typeof t)if(n.isFunction(r))t in this.eventHash||(this.eventHash[t]=new e.Signal),this.eventHash[t].listen(r);else if(i=this.eventHash[t]){var a=n.slice(arguments,1);try{i.trigger.apply(i,a)}catch(s){c.error("Exception was thrown by retailer code when processing the ("+this.widgetName+","+t+') event. The underlying exception was: "'+(s&&s.message?s.message:"")+'"\n'+(s&&s.stack?s.stack:""))}}},preCall:function(){var e=this,r={};return e.getNodes().each(function(){var i=t(this);n.each(e._preCallAttrs(),function(t,n){n in l?e._addParam(i,n,l[n],r):c.error("Attempted to add attribute ["+n+"] to the preCall, but failed to look up the corresponding request parameter",l)})}),r},postCall:function(){},onFitCallResponse:function(){},setTemplates:function(t){this.templates=t[this.widgetName]||{}},_constructor:function(t){this.context=t,this.eventHash={}},_supportedAttrs:function(){return[s.STORE_REGISTERED,s.USER_ID,s.USERID,s.ALT_USER_ID,s.LOCALE]},_preCallAttrs:function(){return this._supportedAttrs()},expectedUpdateTypes:function(){return{locale:r.String.optional(),userId:r.String.optional(),registered:r.Boolean.optional()}},update:function(t){var e,r=this;t&&(e=r.getNodes(),n.each(t,function(t,n){r._updateAttr(e,t,n)}))},_updateAttr:function(t,e,r){var i=u[e];i&&n.containsVal(this._supportedAttrs(),i)&&(null===r?t.removeAttr(i):void 0!==r&&t.attr(i,r))},_addParam:function(n,r,i,a){e.checkArgs(arguments)(e.type.Instance(t),e.type.String,e.type.String,e.type.Instance(Object));var s=n.attr(r);s&&(a[i]=(a[i]||[]).concat(s))},getNodes:function(){return t("."+this.widgetName)},_getLocaleCode:function(){return a.getLocale()}});e.widget=function(t,n){if(e.checkArgs(arguments)(e.type.Object({isAbstract:e.type.Boolean.optional(),widgetName:e.type.String}),e.type.Function.optional()),!t.widgetName)throw"Widget name required and cannot be an empty string";var r,i=n||d;return e.widget[t.className]=r=i.extend(t),r.isAbstract=!!t.isAbstract,r.WIDGET_NAME=t.widgetName,r},d.isAbstract=!0,e.widget.BaseWidget=d}(tfcJQuery,TFCApp);
!function(e){"use strict";function n(n,r){function t(e,n){return{set:n,touch:function(){var r=e();return null!==r&&n(r),r}}}var s,o,i=null,a=null;return n?(s=e.utility.Storage,o=s.keys.Analytics,t(e.bind(s.get,s,o),function(e){s.set(o,e,r)})):t(function(){return i},function(e){null!==a&&clearTimeout(a),i=e,a=setTimeout(function(){i=a=null},r)})}var r=e.type,t=e.util,s=e.utility,o=s.Logger.getLogger("TrueFitAnalyticsTracker"),i=e.Constants,a=i.RequestParameter,u={sessionTimeout:r.Integer,usingToken:r.Boolean},l={cookieEnabled:r.Boolean,analyticsSession:r.String.optional(),browserCookiesEnabled:r.Boolean,trackPageViewImpl:r.Function},c=t.extend({},u,l),g=e.Class.extend({_constructor:function(t){e.checkArgs(arguments)(r.Object(c));var s,o,i=this,a=t.sessionTimeout,u=t.cookieEnabled,l=t.analyticsSession,g=t.browserCookiesEnabled;i._reqQueue=[],i._browserCookiesEnabled=g,i._usingToken=s=t.usingToken,i._trackPageViewImpl=t.trackPageViewImpl,s||(i._sessionHandler=o=n(u,a),void 0!==l&&o.set(l))},trackPageView:function(n){function s(e){try{e()}catch(n){o.error("Exception thrown in callback function will be ignored",n)}a._reqInFlight=!1,a._reqQueue.length>0&&a._reqQueue.shift()()}function i(){0===n.funnels.length?s(n.onSuccess):(a._reqInFlight=!0,a._trackPageViewImpl({params:u,data:{pageName:n.pageName,funnels:n.funnels},success:e.bind(s,null,n.onSuccess),error:e.bind(s,null,n.onError)}))}e.checkArgs(arguments)(r.Object({pageName:r.String,funnels:r.Array,onSuccess:r.Function,onError:r.Function,extraParams:r.PlainObject}));var a=this,u=t.extend(a.touchAndGetParams(),n.extraParams);a._reqInFlight?a._reqQueue.push(i):i()},touchAndGetParams:function(){var e,n,r=this,s={};return r._usingToken||(e=r._sessionHandler,n=e.touch(),null===n&&e.set(n=t.uuid()),s[a.CookiesEnabled]=this._browserCookiesEnabled,s[a.AnalyticsSession]=n),s},_browserCookiesEnabled:null,_usingToken:null,_trackPageViewImpl:null,_sessionHandler:null,_reqInFlight:!1,_reqQueue:null});g.TrackerArgTypes=u,g.OtherTrackerArgTypes=l,g.AllTrackerArgTypes=c,e.analytics.TrueFitAnalyticsTracker=g}(TFCApp);
!function(i){"use strict";function n(i,n,t){var e=null,o=n in i?i[n]:"_"in i?i._:void 0;return"function"===s.type(o)?e=o(t||{}):null!==o&&void 0!==o&&(e=o),e}function t(i,n){n===u.Failure&&a.warn("Analytics script failed to load ["+i+"]");var t=r[i];t.status=n,t.signal.trigger(n),delete t.signal}var e=i.analytics,s=i.util,o=i.type,a=i.utility.Logger.getLogger("AnalyticsEngine"),l=i.Class,c=l.unimplemented,r={},u={Loading:1,Success:2,Failure:3},_=l.extend({_constructor:function(n,t){var e;i.checkArgs(arguments)(o.Object({config:o.Object(t).optional(),enabled:o.Boolean.optional(),pages:o.PlainObject.optional(),events:o.PlainObject.optional(),timings:o.PlainObject.optional()})),this._config=n.config||{},this._enableRecordings=o.Boolean.test(n.enabled)?n.enabled:i.getRunMode()===i.RunModes.prod,this._pages=this._filterIfUnimplemented(this._sendPageViewImpl,n,"pages"),this._events=this._filterIfUnimplemented(this._sendEventImpl,n,"events"),this._timings=this._filterIfUnimplemented(this._sendTimingImpl,n,"timings"),this._queue=[],this._scriptStatus=u.Loading,this._onLoad=new i.Signal,e=null,this._enableRecordings&&(e=s.chooseUri(this._getSecureScriptUrl(),this._getScriptUrl())),this._loadScript(e)},_filterIfUnimplemented:function(i,n,t){var e=n[t];return i===c&&o.PlainObject.test(e)?(a.error("Passed "+t+" to an analytics engine that does not support that type of tracking call."),{}):e||{}},_onScriptLoadVerification:function(i,n){this._loadVerification()||(n=u.Failure),t(i,n)},_loadScript:function(n){var t,e,s=this;return null===n?void setTimeout(i.bind(s._onScriptLoad,s,u.Success),1):void(n in r?(t=r[n],t.status!==u.Loading?setTimeout(i.bind(s._onScriptLoad,s,t.status),1):r[n].signal.listen(i.bind(s._onScriptLoad,s))):(t=r[n]={status:u.Loading,signal:new i.Signal},t.signal.listen(i.bind(s._onScriptLoad,s)),e={url:n,success:i.bind(s._onScriptLoadVerification,s,n,u.Success),error:i.bind(s._onScriptLoadVerification,s,n,u.Failure)},setTimeout(function(){s._customLoader(e)||i.util.loadScript(e)},1)))},_customLoader:function(){return!1},_loadVerification:function(){return!0},_onScriptLoad:function(i){this._scriptStatus=i,this._initEngine(),this._processQueue(),this._onLoad.trigger(),this._onLoad=null},_processQueue:function(){this._scriptStatus===u.Success&&s.each(this._queue,function(i,n){n()}),this._queue=null},_initEngineImpl:c,_initEngine:function(){this._scriptStatus===u.Success&&this._enableRecordings&&this._initEngineImpl()},_getEngineName:c,_getScriptUrl:c,_getSecureScriptUrl:c,_sendPageViewImpl:c,_sendEventImpl:c,_sendTimingImpl:c,_logRecording:function(i,n){var t;t=this._enableRecordings?"enabled":"disabled",a.info(this._getEngineName()+"["+t+","+JSON.stringify(this._config)+"] -> "+i+"("+JSON.stringify(n)+")")},_sendPageView:function(i,n){this._logRecording("PageView",i),this._enableRecordings?this._sendPageViewImpl(i):this.supportsHitCallback&&n()},_sendEvent:function(i){this._logRecording("Event",i),this._enableRecordings&&this._sendEventImpl(i)},_sendTiming:function(i){this._logRecording("Timing",i),this._enableRecordings&&this._sendTimingImpl(i)},_processWhenReady:function(i){this._scriptStatus===u.Success?i():this._scriptStatus===u.Loading&&this._queue.push(i)},pageView:function(t,e){var s=this,o=n(this._pages,t,e);null!==o?this._processWhenReady(i.bind(s._sendPageView,s,o,e.success)):s.supportsHitCallback&&e.success()},event:function(t,e){var s=n(this._events,t,e);null!==s&&this._processWhenReady(i.bind(this._sendEvent,this,s))},timing:function(t,e){var s=n(this._timings,t,e);null!==s&&this._processWhenReady(i.bind(this._sendTiming,this,s))},onLoad:function(i){this._scriptStatus===u.Loading?this._onLoad.listen(i):i()},isEnabled:function(){return this._enableRecordings},_config:null,_pages:null,_events:null,_timings:null,_queue:null,_onLoad:null,_scriptStatus:null,_enableRecordings:null,supportsHitCallback:!1});e.AnalyticsEngine=_}(TFCApp);
!function(n){"use strict";var e=n.analytics,i=n.util,t=1e4,a=n.utility.Logger.getLogger("AnalyticsManager"),s=n.Class.extend({_constructor:function(){this._engines=[]},addEngine:function(n){n instanceof e.AnalyticsEngine?i.containsVal(this._engines,n)?a.raise("Cannot add the same engine twice"):this._engines.push(n):a.raise("Analytics engine must have type AnalyticsEngine")},handlePageLoad:function(n){function e(n){u||(clearTimeout(a),u=!0,n&&n())}var a,s=this._engines,c=i.count(s,function(n,e){return e.supportsHitCallback}),o=0,u=!1,g=n.success,r=n.error;n.success=function(){++o===c&&e(g)},n.error=function(){e(r)},a=setTimeout(function(){e(r)},t),i.each(s,function(e,i){i.pageView(n.pageName,n)})},handleEvent:function(n){var e=n.eventName;i.each(this._engines,function(i,t){t.event(e,n)})},handleTiming:function(n){var e=n.timingName;i.each(this._engines,function(i,t){t.timing(e,n)})},_engines:null});e.AnalyticsManager=s}(TFCApp);
!function(t){"use strict";var i="optimizely",n=t.analytics,e=t.extLibs,r=t.type;window[i]=window[i]||[];var s={id:r.String,scriptUrl:r.String.optional(),targets:r.Array},c=n.AnalyticsEngine.extend({isActive:function(){return this._active},_constructor:function(t){this._super(t,s),this._id=this._config.id,this._targets=this._config.targets},_initEngineImpl:function(){t.isDevMode()&&window[i].push(["log"])},_getEngineName:function(){return"A/B Testing"},_getScriptUrl:function(){var t=this._config.scriptUrl;return t?"http://"+t:null},_getSecureScriptUrl:function(){var t=this._config.scriptUrl;return t?"https://"+t:null},_sendPageViewImpl:function(t){var i=this;e(this._targets).each(function(n,e){e===t&&i._activate()})},_activate:function(){this._active=!0,window[i].push(["activate",this._id]),this._active=!1},_active:null,_id:null,_targets:null});n.ABTestingEngine=c}(TFCApp);
!function(n){"use strict";var r=n.analytics,t=r.TrueFitAnalyticsTracker,e=t.AllTrackerArgTypes,i=r.AnalyticsEngine.extend({_constructor:function(n){this._super(n,e)},_initEngineImpl:function(){var n,r=this._onTrackerReady;this._tracker=n=new t(this._config),r&&(r.trigger(n),this._onTrackerReady=null)},_getEngineName:function(){return"True Fit Analytics"},_getScriptUrl:function(){return null},_getSecureScriptUrl:function(){return null},_sendPageViewImpl:function(n){this._tracker.trackPageView(n)},withTracker:function(r){var t,e=this._tracker,i=this.isEnabled();return i&&(e?r(e):(this._onTrackerReady=t=this._onTrackerReady||new n.Signal,t.listen(r))),i},_tracker:null,_onTrackerReady:null,supportsHitCallback:!0});r.TrueFitAnalyticsEngine=i}(TFCApp);
!function(e){"use strict";var t,n=e.type,i=e.util,s=e.Class,a=e.analytics,l={totalABTests:n.Integer};t=a.AnalyticsEngine.extend({_constructor:function(e){this._super(e,l),this._pageViewQueue=[],this._loadedABTests=0,this._totalABTests=this._config.totalABTests},_initEngineImpl:function(){},_getEngineName:function(){return"ABTestCompleteEngine"},_getScriptUrl:function(){return null},_getSecureScriptUrl:function(){return null},_sendPageViewImpl:function(t){this._loadedABTests===this._totalABTests?e.abTestComplete.trigger(t):this._pageViewQueue.push(t)},incrementLoadedABTests:function(){++this._loadedABTests===this._totalABTests&&(i.each(this._pageViewQueue,function(t,n){e.abTestComplete.trigger(n)}),this._pageViewQueue=null)},_loadedABTests:null,_totalABTests:null,_pageViewQueue:null}),e.analytics.ABTestInterface=s.extend({getEngines:function(){return this._engines.concat([this._abTestCompleteEngine])},isActive:function(){var e=!1;return i.each(this._engines,function(t,n){return n.isActive()?(e=!0,!1):void 0}),e},_getPageNames:s.unimplemented,_constructor:function(n){var s,l={},u=[];i.each(this._getPageNames(),function(e,t){l[t]=t}),i.each(n,function(e,t){var n=new a.ABTestingEngine({enabled:!0,config:{id:t.id,scriptUrl:t.scriptUrl,targets:t.targets},pages:l});u.push(n)}),this._engines=u,this._abTestCompleteEngine=s=new t({enabled:!0,pages:l,config:{totalABTests:u.length}}),i.each(u,function(t,n){n.onLoad(e.bind(s.incrementLoadedABTests,s))})},_engines:null,_abTestCompleteEngine:null}),e.abTestComplete=new e.Signal}(TFCApp);
!function(e){"use strict";var n=e.analytics,t=e.type,r=e.util,a=(e.utility.Logger.getLogger("TrueFitAnalytics"),n.TrueFitAnalyticsTracker),i=n.TrueFitAnalyticsEngine,c=(e.Constants.RequestParameter,e.Class.extend({_constructor:function(n,i,c,s){e.checkArgs(arguments)(t.Object({enabled:t.Boolean,trackerArgs:t.Object(a.TrackerArgTypes),otherTrackerArgs:t.Object(a.OtherTrackerArgTypes)}),t.PlainObject.optional(),t.PlainObject.optional(),t.PlainObject.optional()),this._tfEngine=this._createEngine(n.enabled,r.extend({},n.trackerArgs,n.otherTrackerArgs),i,c,s)},_generatePageView:function(n,r){e.checkArgs(arguments)(t.Function,t.Object({pageName:t.String,funnels:t.Array}));var a={},i=n(r);return i?{pageName:i,funnels:r.funnels,extraParams:a,onSuccess:r.success,onError:r.error}:null},getEngine:function(){return this._tfEngine},_createEngine:function(e,n,t,r,a){return new i({enabled:e,config:n,pages:t,events:r,timings:a})},_tfEngine:null}));n.TrueFitAnalytics=c}(TFCApp);
!function(e,n,i){"use strict";var t=e.util,r=(e.extLibs,e.utility.Logger.getLogger("ResponsiveManager")),s=e.Constants,c=s.ScreenSize,a=s.DeviceType,S=767,d=e.Class.extend({_constructor:function(i){var s,d=this;if(d._screenSizeQuerySignal=new e.Signal,i!==a.Responsive)d._setScreenSize(i===a.Desktop?c.Large:c.Small);else if(t.isFunction(n.matchMedia))try{s=n.matchMedia("(max-width: "+S+"px)"),d._setScreenSize(s.matches?c.Small:c.Large),s.addListener(function(e){var n=e.matches?c.Small:c.Large;d._setScreenSize(n)})}catch(u){r.warn("Error trying to use matchMedia: ",u," Using the window width instead"),d._useWindowWidth()}else d._useWindowWidth()},_setScreenSize:function(e){var n=this;n._currentScreenSize!==e&&(r.debug("Setting screen size:",e),n._currentScreenSize=e,n._screenSizeQuerySignal.trigger(e))},_useWindowWidth:function(){var i=this;i._setCurrentWidthBasedOnWindow(),n.addEventListener("resize",e.bind(t.debounce(i._setCurrentWidthBasedOnWindow,250),i))},_setCurrentWidthBasedOnWindow:function(){var e=this,t=n.innerWidth||i.documentElement.clientWidth||i.body.clientWidth;e._setScreenSize(S>=t?c.Small:c.Large)},currentScreenSize:function(){return this._currentScreenSize},subscribeToScreenSizeChange:function(e){this._screenSizeQuerySignal.listen(e)},_currentScreenSize:null,_screenSizeQuerySignal:null});e.manager.ResponsiveManager=d}(TFCApp,window,document);
!function(e){"use strict";function t(e,t){return!!(t.compareDocumentPosition(e)&(Node.DOCUMENT_POSITION_FOLLOWING|Node.DOCUMENT_POSITION_CONTAINED_BY))}function n(e,t){var n=o.findKey(t,function(t,n){return e===n});return void 0===n?-1:n}var i=e.KeyCodes,o=e.util,r=e.utility.Logger.getLogger("tfcTabGroupController");e.TabHelper=e.Class.extend({_constructor:function(){this._els=[]},add:function(e){var n=this._els,i=o.findKey(n,function(n,i){return t(i,e)});void 0===i&&(i=n.length),n.splice(i,0,e),r.trace("Added tabbable element ",e,n)},remove:function(e){var t=this._els,i=n(e,t);-1!==i?t.splice(i,1):r.warn("Attempted to remove ",e," but it was not found in the array"),r.trace("Removed tabbable element ",e,t)},handleKeydown:function(e,t){var s,a,u,l=this._els;t.keyCode===i.Tab&&(s=o.filter(l,function(e,t){return o.isVisible(t)&&!t.disabled}),a=n(e,s),a!==s.length-1||t.shiftKey?0===a&&event.shiftKey?(u=s[s.length-1],r.debug("Shift-tab was pressed on first element. Focusing last element",u)):-1===a&&r.warn("Received tab event for ",e," but it was not found in the array"):(u=l[0],r.debug("Tab was pressed on last element. Focusing first element",u)),u&&(u.focus(),t.preventDefault()))}})}(TFCApp);
!function(t,e){"use strict";var s=e.analytics,i=e.util;s.WidgetABTest=s.ABTestInterface.extend({_getPageNames:function(){var t,s=[];return i.each(e.widget,function(n,a){i.isFunction(a)&&a.isSubClassOf&&a.isSubClassOf(e.widget.BaseWidget)&&(t=a.WIDGET_NAME,s.push(t))}),s}})}(tfcJQuery,TFCApp);
!function(e){"use strict";var t,i=e.util,n=e.utility.Storage,s=e.analytics,r=s.TrueFitAnalytics;t=r.extend({_constructor:function(e,t){this._super(i.extend({otherTrackerArgs:{analyticsSession:n.get(n.keys.Analytics)||void 0,browserCookiesEnabled:n.enabled(),cookieEnabled:!0,trackPageViewImpl:i.noop}},e),{}),this._screenSize=t},screenSize:function(){return this._screenSize}}),s.FitRecTrueFitAnalytics=t}(TFCApp);
!function(e,s){"use strict";var t,a=e.Constants,i=e.util,r=a.Message;t=e.Class.extend({_constructor:function(){this._$iframes=s(),this._sourceWindowId=e.postMessageManager.retailerWindowId()},_broadcastMessage:function(s,t){var a=this;this._$iframes.each(function(r,n){var o,c=n.src;c&&(o=i.parseOrigin(c),e.postMessageManager.postMessage(n.contentWindow,o,a._sourceWindowId,s,t))})},broadcastScreenSizeChange:function(e){this._broadcastMessage(r.ScreenSizeChange,{newSize:e})},broadcastFitRecResults:function(e){this._broadcastMessage(r.FitRecResults,{fitRecResults:e})},registerIframe:function(e){this._$iframes=this._$iframes.add(e)},unregisterIframe:function(e){this._$iframes=this._$iframes.not(e)},_$iframes:[],_sourceWindowId:null}),e.manager.ProfileMessageBroadcaster=t}(TFCApp,tfcJQuery);
!function(e){var r=e.util,t=e.Constants,i=t.DeviceType,n=t.ScreenSize,o=e.utility.Logger.getLogger("PerformanceTracker");e.PerformanceTracker=function(e){function t(e,t){return!!r.findVal(t,function(r,t){return e.name.indexOf(t)>-1})}function c(e,i){return r.findVal(e,function(e,r){return t(r,i)})}var s=this;s._baseUrl=r.chooseUri(e.serviceSecureURI,e.serviceURI),s._storeKey=e.storeKey,s._widgetDeviceType=e.widgetDeviceType,s._profileDeviceType=e.profileDeviceType!==i.Responsive?e.profileDeviceType:e.responsiveManager.currentScreenSize()===n.Small?i.Mobile:i.Desktop,s.sendWidgetRender=function(i,n,a){function f(e,t,i){var n=i?S:m;r.each(n,function(i,n){n in e&&(T[t+r.capitalize(n)]=r.round(e[n],1))})}try{var p=window.performance;if(p&&p.getEntriesByType){var u=["truefit","cdn.truefitcorp.com","cdns.truefitcorp.com",e.cdnURI,e.cdnSecureURI,e.serviceSecureURI,e.serviceURI],d=p.getEntriesByType("resource").filter(function(e){return"script"===e.initiatorType&&t(e,u)}),l=c(d,["/fitrec.js","/fitrec-internal.js"]),v=c(d,["/fitconfig?"]),g=c(d,["/templates.js"]),y=c(d,["/fit?"]);if(!(l&&g&&y&&v))return void o.info("fitrec.js, fitconfig, templates, or fit call not found");var T={endToEndTime:r.round(a-l.startTime,1),profileDeviceType:s._profileDeviceType,widgetDeviceType:s._widgetDeviceType,processWidgetStart:r.round(n,1),processWidgetEnd:r.round(a,1)},m=["fetchStart","responseEnd"],S=["startTime","fetchStart","domainLookupStart","connectStart","secureConnectionStart","requestStart","responseStart","responseEnd"];f(l,"fitrecJs",!0),f(v,"fitconfig",!0),f(g,"templates",!0),f(y,"fitCall",!0),r.loadScript({url:s._baseUrl+"/noop/"+s._storeKey+"/widget-render?"+r.param(T)})}else o.debug("Performance API not present on the window")}catch(D){o.error("Error while trying to measure and report client-side performance.",D)}}}}(TFCApp);
!function(a){"use strict";var t=a.util,e=a.utility,_=a.type,i=_.Integer,n=e.Logger.getLogger("CookieData"),o=10,s=a.Class.extend({_constructor:function(t){a.checkArgs(arguments)(_.Object({name:_.String,types:_.PlainObject,maxAge:_.Or(i,_.Null).optional()})),this.__name=t.name,this.__maxAge=t.maxAge,this._data=this._read(t.types)},setMaxAge:function(e){function n(){r.__lastMaxAgeUpdate=l,r.__maxAge=e,r._save()}a.checkArgs(arguments)(_.Or(i,_.Null));var s,g,r=this,m=r.__maxAge,l=t.now()/1e3;void 0===m||null!==m&&null===e?n():(s=r.__lastMaxAgeUpdate+r.__maxAge,g=l+e,Math.abs(s-g)>o&&n())},_read:function(a){var _=e.Storage.get(this.__name),i=_?t.deparam(_):{},n={};return t.each(i,function(t,e){var _,i=a[t]||a._;i&&(_=i.fromString(e),void 0!==_&&(n[t]=_))}),n},_save:function(){void 0===this.__maxAge?n.error("Attempted to save cookie data without a max age"):e.Storage.set(this.__name,t.param(this._data),null===this.__maxAge?void 0:this.__maxAge)},_data:null,__name:null,__maxAge:void 0,__lastMaxAgeUpdate:void 0});a.CookieData=s}(TFCApp);
!function(t){"use strict";var e,i=t.util,s={WidgetTipsAutomaticShown:"widget.tips.automatic.shown",WidgetTipsAutomaticXout:"widget.tips.automatic.xout",WidgetTipsRolloverXout:"widget.tips.rollover.xout",SessionParams:"session.params"},o=t.type,a={},n={};a[s.WidgetTipsAutomaticShown]={type:o.Boolean,defval:!1},a[s.WidgetTipsAutomaticXout]={type:o.Boolean,defval:!1},a[s.WidgetTipsRolloverXout]={type:o.Boolean,defval:!1},a[s.SessionParams]={type:o.String,defval:""},i.each(a,function(t,e){n[t]=e.type}),e=t.CookieData.extend({_constructor:function(){this._super({name:t.utility.Storage.keys.UserSettings,types:n})},get:function(e){t.checkArgs(arguments)(o.String);var i=this._data[e],s=n[e],r=a[e].defval;if(void 0===r)throw"Attempt to retrieve a user setting that does not exist";return s.test(i)?i:r},set:function(e,i){var s=n[e];if(!s)throw"Attempt to save a user setting that does not exist";t.checkArgs(arguments)(o.String,s),this._data[e]=i,this._save()}}),e.keys=s,t.UserSettings=e}(TFCApp);
!function(t){"use strict";var i=t.type,s=t.util,e=t.CookieData.extend({_constructor:function(){this._super({name:t.utility.Storage.keys.UserVisit,maxAge:null,types:{_:i.Integer}})},getVisits:function(s){return t.checkArgs(arguments)(i.String),this._data[s]||0},trackVisits:function(e){t.checkArgs(arguments)(i.Array);var r=this,n=this._data;s.each(e,function(t,i){n[i]=r.getVisits(i)+1}),this._save()}});t.UserVisitTracker=e}(TFCApp);
!function(e,t){"use strict";var r=e.util;e.preLoadFitProfile=function(e,c,n){function s(){function e(){(new Image).src=c.cdnSecureURI+c.uxVersionPath+"/resources/fitprofile/index.html",(new Image).src=c.cdnSecureURI+c.uxVersionPath+"/resources/fitprofile/js/app.js",(new Image).src=c.cdnSecureURI+c.uxVersionPath+"/resources/fitprofile/css/application-responsive.css",(new Image).src=c.cdnSecureURI+c.storeVersionPath+"/resources/store/"+c.storeKey+"/css/tfpapp-responsive-web.css"}"complete"===document.readyState?e():t(document).bind("readystatechange",function(){"complete"===document.readyState&&e()})}var i=c.fitProfilePreLoad,o=i.pageCount,u=i.pageDelay,a=["tfc-fitrec-product","tfc-fitrec-account","tfc-fitrec-register"],f=r.sum(r.map(a,function(t,r){return e.getVisits(r)}));r.find(n,function(e,t){return r.containsVal(a,t)})&&(o&&f>=o?s():u&&setTimeout(s,1e3*u))}}(TFCApp,tfcJQuery);
!function(e,t,i){"use strict";function n(e){return t("iframe",e)}function r(e,i){return i?e.filter(function(){var e=t(this).attr(q);return"secure-tip"===i?"secure"===e:"secure"!==e}):e}function o(e,t){var i=p(t).parents("."+P).length>0;return!i}function s(e,t,i){return r(p("."+e,t),i)}function a(e,t,i){return r(p("."+e,t).filter(o),i)}function l(e){return"tfc-"+e}var c,d,f,u,p=e.extLibs,h=e.util,g=e.type,m=e.Class,_=m.unimplemented,w=e.history,v=e.Constants,b=v.Message,$=v.ScreenSize,C=e.popupManager,T="body",S="head",P="tfc-popup-wrap",O="tfc-tip-result",M="tfc-modal-result",L="tfc-tip-show-more",R="tfc-tip-click-show-more",k="tfc-tip-click-show-less",z="tfc-popup-click-open",I="tfc-popup-click-close",H="tfc-popup-rollover-open",A="tfc-iframe-loaded",y="modal-visible",x="tfc-modal-visible",W={tfcModalVisible:!0},B="tfc-full-screen-modal",U="tfc-window-modal",E="tfc-viewport",F='meta[name="viewport"]',V='<meta id="'+E+'" name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />',D="tfc-content",j="above",J="below",K="left",N="right",Q="data-tip-id",q="data-content-id",G=10,X="data-legal-footer-setup",Y="tfc-legal-footer-privacy-policy",Z="tfc-legal-footer-terms-of-use",et="tfc-recipient-template",tt="tfc-all-recipients",it="insecure-tip",nt=e.utility.Logger.getLogger("TipOrModal"),rt={Close:"close",Complete:"complete",LogOut:"logout",Open:"open",PageLoad:"pageload",Render:"render",Update:"update",AddToBag:"addtobag",Chat:"chat"},ot=h.map(h.objVals($),function(e,t){return l(t)}).join(" ");c=m.extend({_constructor:function(e){var t=e.$elem,i=t.find(".tfc-popup-wrap");if(1!==t.length)throw"TipOrModal expected exactly one element to be passed in";if(1!==i.length)throw"TipOrModal expected exactly one .tfc-popup-wrap";this._$elem=t,this._$wrap=i},hasIframe:function(){return n(this._$elem).length>0},isWithinBounds:function(e,t){return p.isWithinBounds(this._$elem,e,t)},isInDom:function(){return this._$elem.parents("body").length>0},receiveMessage:function(e,t){var i=this,n=i._$wrap;e===b.Open?(n.stop(!0),n.addClass(A)):e===b.Refresh?n.stop(!0):e===b.Resize&&i._handleResizeMessage(e,t)},_handleResizeMessage:function(e,t){var i,r,o,s,a,l=this;i=l._$wrap,r=n(i),o=i.add(r),l._shouldHandleResize()&&(s=t.offsetHeight,a=t.scrollHeight,nt.debug("Animating tip height: ",t),o.stop(),s===a?(r.css("height",i.height()),i.height()!==s&&o.animate({height:s})):(i.height()!==s&&(nt.warn("Tip offsetHeight changed and does not match scrollHeight. Tip height will be animated instantaneously."),i.css("height",s)),r.css("height",a)))},_clearWrapAndIframeHeight:function(){var e,t,i;e=this._$wrap,t=n(e),i=e.add(t),i.css("height","")},_container:_,_setupLegalFooterClickEvents:function(e){function t(t,i){e.staticContentUri&&p("."+t,n).bind("click",function(){i(e.staticContentUri,e.locale)})}var i=this,n=i._$elem;n.data(X)||(t(Y,C.openPrivacyPolicy),t(Z,C.openTermsOfUse),n.data(X,!0))},_shouldHandleResize:_,id:_,clickOpenTriggers:function(){return p("."+z,this._$elem)},clickOpenTriggersForTipId:function(e){return s(z,this._$elem,e)},rolloverOpenTriggers:function(){return p("."+H,this._$elem)},rolloverOpenTriggersForTipId:function(e){return s(H,this._$elem,e)},clickCloseTriggers:function(){return p("."+I,this._$elem)},toggleShowMore:_,setupMoreLessInfoHandlers:function(){var e=this,t=e._$elem;p("."+R,t).bind("click",function(){e.toggleShowMore(!0)}),p("."+k,t).bind("click",function(){e.toggleShowMore(!1)})},show:function(t,i,r,o){var s,a,l=this,c=l._$wrap,d=r&&r.before,f=r&&r.after,p=e.FitRecResponse.getResponse(),g=p.extraClasses;this.hasIframe()?(u=h.now(),s=n(c),s.attr("src",tfc.__getProfileUrl(h.extend({container:l._container(),isShoppingForOther:!p.userFlags.isShoppingForSelf,recipientAlias:p.recipientUser&&p.recipientUser.alias},i))),o.profileMessageBroadcaster.registerIframe(s)):(l.setContent(i),l.setupMoreLessInfoHandlers(),l.setSfoRecipients()),this._setupLegalFooterClickEvents(t),d&&d(),c.fadeIn(function(){f&&f()}),l.decorateElement(g.join(" ")),l.hasIframe()||(a=l.getTabbable().get(0),a&&a.focus())},hide:function(e,t,i){function r(){t.unregisterIframe(c),s=c.removeAttr("src").clone(),c.replaceWith(s),a._clearWrapAndIframeHeight()}function o(){l.removeClass(L).removeClass(A),f&&f(),r()}var s,a=this,l=a._$wrap,c=n(l),d=e&&e.before,f=e&&e.after;d&&d(),i&&i.openingTipId===it&&i.closingTipId===it?o():l.fadeOut(function(){o()})},getTabbable:function(){return t("a,button",this._$wrap)},decorateElement:function(e){var t=this._$elem,i="PRIOR_DECORATIONS",n=t.data(i);t.removeClass(n).addClass(e),t.data(i,e)},setContent:function(e){this._$elem.find("."+D).replaceWith(e)},getWrapElem:function(){return this._$wrap},setSfoRecipients:function(){var t=this._$elem,i=e.FitRecResponse.getResponse(),n=t.find("."+et),r=t.find("."+tt),o=n;h.each(i.recipientLinks,function(e,t){var r,s,a,l;t.id&&(r=n.clone(),r.removeAttr("id"),s=r.find(".tfc-recipient-radio"),s.attr("value",t.id),s.attr("id","tfc-recipient-radio-"+t.link),a=r.find(".tfc-cfg-radio-label"),a.attr("for","tfc-recipient-radio-"+t.link),a.text(t.alias),l=r.find(".tfc-recipient-edit-link"),l.attr("data-recipient-id",t.id),i.recipientUser.alias===t.alias&&s.attr("checked","checked"),o=o.add(r))}),r.html(o),r.find("#tfc-myself").find('a[data-ips="sfoedit"]').remove(),i.userFlags.isShoppingForSelf&&r.find("input#tfc-myself-radio").attr("checked","checked"),r.find('input[name="tfc-recipient"]').bind("change",function(){var e=r.find('input[name="tfc-recipient"]:checked');tfc.__calculate(void 0,{recipientLinkId:e.attr("value")})})},_$elem:null,_$wrap:null}),d=c.extend({_constructor:function(e){this._super(e),e.$widget||nt.raise("Tip constructor expects a $widget element"),this._$widget=e.$widget},id:function(){return this._$elem.attr(Q)},setPlacement:function(e){this._$wrap.addClass("tfc-"+e)},getPlacement:function(){var e=this._$wrap;return h.findVal(d.Placement,function(t,i){return e.hasClass("tfc-"+i)})},toggleShowMore:function(e){var t,i,n=this._$wrap;t=n.height(),n.toggleClass(L,e),i=n.height(),n.css("height",t),n.animate({height:i},{complete:function(){n.css("height","")}})},_container:function(){return v.Container.Tip},_shouldHandleResize:function(){return!0},show:function(t,n,r,o){function s(e,t,n){nt.debug("setting scroll to:",e),p.scrollTop(i,e);var r=p.scrollTop(i);Math.abs(r-e)<1&&setTimeout(function(){Math.abs(t-e)<=n?p.scrollTop(i,t):e>t?s(e-n,t,n):s(e+n,t,n)},5)}var a,l,c,f,u,h,g,m,_,w,v=this,b=o.tipConfig,$=this._$wrap,C=this._$widget,T=v.getPlacement(),S=i.innerHeight,P=10,O=370,M=Math.round(p.scrollTop(i)),L=4,R=b.autoScrollThresholdTop+P,k=b.autoScrollThresholdBottom+P;this._super(t,n,r,o),v._resizeHandler=a=e.bind(v._positionTipWithinWindowBounds,v,v._getCssPos()),a(),i.addEventListener("resize",a),T!==d.Placement.Above?(u=$[0].getBoundingClientRect().top,c=u+O,c>S-k&&(g=C[0].getBoundingClientRect().top,m=Math.min(u,g),l=c-m,l>S-R-k?_=M+m-R:(w=c-S,_=M+w+k),s(M,_,L))):(h=$[0].getBoundingClientRect().bottom,f=h-O,R>f&&(_=M-(R-f),s(M,_,L)))},hide:function(e,t,n){var r=this,o=e&&e.before,s=e&&e.after;this._super({before:o,after:function(){s&&s(),i.removeEventListener("resize",r._resizeHandler),r._resizeHandler=null,r._clearCssPos()}},t,n)},_cssPlacementProp:function(){return this.getPlacement()===d.Placement.Left?"right":"left"},_getCssPos:function(){return parseInt(this._$wrap.css(this._cssPlacementProp()))||0},_clearCssPos:function(){this._$wrap.css(this._cssPlacementProp(),"")},_positionTipWithinWindowBounds:function(e){function t(e){return m+g*e}function n(e){o.css(h,t(e))}var r=this,o=r._$wrap,s=p(i),a=o.offset().left,l=p.outerWidth(o),c=s.width(),d=c-(a+l),f=G-a,u=G-d,h=r._cssPlacementProp(),g="left"===h?1:-1,m=r._getCssPos(),_=g*(e-m);n(0>f+u?f>0?f:u>0?-u:_>0?Math.min(_,-u):Math.max(_,f):(f-u)/2)},_resizeHandler:null,_$widget:null}),f=c.extend({_constructor:function(e){this._super(e),this._id=g.String.test(e.id)?e.id:null},_container:function(){return v.Container.Modal},screenSize:function(){return this._$wrap.hasClass(l($.Large))?$.Large:$.Small},_shouldHandleResize:function(){var e=this;return e.isVisible()&&e.screenSize()===$.Large},updateScreenSize:function(e){var n=this,r=t(T);if(n._$wrap.removeClass(ot).addClass(l(e)),n.isVisible())if(r.toggleClass(B,n.screenSize()===$.Small),r.toggleClass(U,n.screenSize()===$.Large),n.screenSize()===$.Large){var o=p("#"+E),s=p(F).not(o);o.attr("content",s.attr("content")||"").remove(),n._$elem.css("top",n._startingScrollPosition.top),p.scrollTop(i,n._startingScrollPosition.top),p.scrollLeft(i,n._startingScrollPosition.left)}else p(S).append(V),n._$elem.css("top",0);n._shouldHandleResize()||n._clearWrapAndIframeHeight()},id:function(){return this._id},placeOnPage:function(){p(T).append(this._$elem)},toggleShowMore:function(e){this._$wrap.toggleClass(L,e)},show:function(n,r,o,s){var a,l=this,c=o&&o.before,d=o&&o.after,f=t(T),u=new e.TabHelper;l.isShowAnimationRunning=!0,l._super(n,r,{before:function(){l._startingScrollPosition={top:p.scrollTop(i),left:p.scrollLeft(i)},l.screenSize()===$.Large&&l._$elem.css("top",l._startingScrollPosition.top),!n.popStateEnabled||w.state&&w.state.tfcModalVisible||w.pushState(W,""),l._$elem.data(y,!0),f.addClass(l.screenSize()===$.Small?B:U),l._$elem.show(),c&&c()},after:function(){f.addClass(x),l.screenSize()===$.Small&&p(S).append(V),d&&d(),l.isShowAnimationRunning=!1}},s),this.hasIframe()||(a=l.getTabbable(),a.each(function(i,n){u.add(n),t(n).bind("keydown",e.bind(u.handleKeydown,u,n))}))},hide:function(e,n,r){var o=this,s=e&&e.before,a=e&&e.after,l=t(T);o._super({before:function(){if(!r){if(o.screenSize()===$.Small){var e=p("#"+E),t=p(F).not(e);e.attr("content",t.attr("content")||"").remove()}l.removeClass(x),w.state&&w.state.tfcModalVisible&&w.back()}s&&s()},after:function(){p.scrollTop(i,o._startingScrollPosition.top),p.scrollLeft(i,o._startingScrollPosition.left),o._$elem.data(y,!1),r||(l.removeClass(B).removeClass(U),o._$elem.css("top",0)),o._$elem.hide(),a&&a()}},n,r)},isVisible:function(){return!!this._$elem.data(y)},_id:null,_startingScrollPosition:null,isShowAnimationRunning:!1}),c.clickOpenTriggers=e.bind(s,null,z),c.clickOpenTriggersOutsidePopup=e.bind(a,null,z),c.rolloverOpenTriggers=e.bind(s,null,H),c.rolloverOpenTriggersOutsidePopup=e.bind(a,null,H),c.clickCloseTriggersOutsidePopup=e.bind(a,null,I),d.Placement={Above:j,Below:J,Left:K,Right:N},d.widgetTips=function(e){var i=t("."+O,e),n=[];return i.each(function(i,r){n.push(new d({$elem:t(r),$widget:e}))}),n},d.fromWidget=function(e,i){var n=t("."+O,e).filter(function(e,n){return t(n).attr(Q)===i});return 1===n.length?new d({$elem:n,$widget:e}):null},f.fromTemplate=function(e,t){return new f({$elem:e.filter("."+M),id:t})},c.handleCriticalMessage=function(e,t,i){var n;e===b.Open?(nt.info("TIME TO LOAD: "+new Date(h.now()-u).getTime()/1e3),i(rt.Open,{data:t})):e===b.Close?i(rt.Close,{data:[]}):e===b.Complete?i(rt.Complete,{tfpUser:t.tfpUser,placement:t.placement,isCredentialSaved:t.tfpUser.isCredentialSaved}):e===b.PageLoad?i(rt.PageLoad,t):e===b.Update?i(rt.Update):e===b.LogOut?i(rt.LogOut):e===b.AddToBag?i(rt.AddToBag,t):e===b.Refresh?(n=t&&t.isEnteringData,tfc.__calculate(void 0,{isEnteringData:n})):e===b.Chat&&i(rt.Chat)},e.TipOrModal=c,e.Tip=d,e.Modal=f}(TFCApp,tfcJQuery,window);
!function(t){"use strict";t.tips.TipEventLevel={automatic:3,rollover:2,click:1,off:0}}(TFCApp);
!function(e,n){"use strict";var t,i,s,o,l,r,u,c,a,d,p,g=e.extLibs,b=e.tips,f=e.type,v=e.util,h=e.Class,_=h.unimplemented,T=e.UserSettings.keys,C=e.TipOrModal,E=e.Constants,O=E.SourceTrigger,m=E.Attributes,k="tfc-popup-wrap",S="tfc-content",w="body",$="tfc-full-screen-modal",I=e.utility.Logger.getLogger("TipTriggers"),M=function(){var e=null,n=500;return function(t,i){null===e&&(e=setTimeout(function(){e=null},n),i.call(t))}}();t=h.extend({_constructor:function(t){e.checkArgs(arguments)(f.Object({tipConfig:f.PlainObject,userSettings:f.Instance(e.UserSettings),userVisitTracker:f.Instance(e.UserVisitTracker),widgetName:f.String,receiveMessageSignal:f.Instance(e.Signal).optional(),$widget:f.Instance(n),handleOpen:f.Function})),this._options=t},getEventLevel:_,_isEnabled:_,_beforeTipOpen:function(){},_bindEvents:_,bindEvents:function(){var e=this,n=this._options;this._unbindEvents=this._bindEvents({$widget:n.$widget,handleOpen:function(t,i){e._isEnabled()&&(e._beforeTipOpen(),n.handleOpen(t,i))},$tipClickOpen:n.$tipClickOpen,$tipRolloverOpen:n.$tipRolloverOpen})},unbindEvents:function(){this._unbindEvents&&(this._unbindEvents(),this._unbindEvents=null)},_options:null,_unbindEvents:null}),i=t.extend({_constructor:function(t){this._super(t),e.checkArgs(arguments)(f.Object({$tipClickOpen:f.Instance(n)}))},getEventLevel:function(){return b.TipEventLevel.click},_isEnabled:function(){return!0},_bindEvents:function(e){function t(t){t.fromClickTipOpen=!0,M(this,function(){var t=g(this),s=t.attr("data-content-id"),o=n("."+S,t.parents("."+k)),l=o.length?O.Popup:O.Widget;e.handleOpen([new r({receiveMessageSignal:i._options.receiveMessageSignal}),new u],s&&"secure"!==s?s:{ips:t.attr(m.IPS),editRecipientLinkId:t.attr(m.RECIPIENT_ID),sourceTrigger:l})})}var i=this,s=e.$tipClickOpen;return s.bind("click",t),function(){s.unbind("click",t)}}}),s=t.extend({_constructor:function(t){this._super(t),e.checkArgs(arguments)(f.Object({$tipRolloverOpen:f.Instance(n)}))},getEventLevel:function(){return b.TipEventLevel.rollover},_isEnabled:function(){return!0},_bindEvents:function(e){function n(){e.handleOpen([new r({receiveMessageSignal:t._options.receiveMessageSignal,beforeTipClose:function(){s.userSettings.set(T.WidgetTipsRolloverXout,!0),beforeTipClose()}}),new u,o])}var t=this,i=e.$tipRolloverOpen,s=this._options,o=new a({beforeTipClose:beforeTipClose});return i.bind("mouseenter",n),function(){i.unbind("mouseenter",n)}}}),o=t.extend({getEventLevel:function(){return b.TipEventLevel.automatic},_isEnabled:function(){var e=this._options,n=e.userSettings;return!n.get(T.WidgetTipsAutomaticShown)&&e.userVisitTracker.getVisits(e.widgetName)>=e.tipConfig.pageLoads},_beforeTipOpen:function(){this._options.userSettings.set(T.WidgetTipsAutomaticShown,!0)},_bindEvents:function(n){function t(){d.unbind("mouseenter",b),d.unbind("mouseleave",f)}function i(){d.bind("mouseenter",b),d.bind("mouseleave",f),n.handleOpen([new r({receiveMessageSignal:o._options.receiveMessageSignal,beforeTipClose:function(){a.userSettings.set(T.WidgetTipsAutomaticXout,!0),t()}}),new u,p])}var s,o=this,l=!0,a=this._options,d=n.$widget,p=new c({hideDelay:a.tipConfig.hideDelay,beforeTipClose:t}),b=e.bind(p.disableClose,p),f=e.bind(p.enableClose,p);return this._eventInitializedOnce?void 0:(this._eventInitializedOnce=!0,s=setTimeout(function(){g(function(){l&&i()})},1),function(){clearTimeout(s),l=!1})},_eventInitializedOnce:!1}),l=h.extend({_constructor:function(n){e.checkArgs(arguments)(f.Object({beforeTipClose:f.Function.optional(),receiveMessageSignal:f.Instance(e.Signal).optional()}).optional()),this._options=n},bindEvents:function(t){e.checkArgs(arguments)(f.Object({$widget:f.Instance(n),tipOrModal:f.Instance(C),handleClose:f.Function,$tipClickClose:f.Instance(n)}));var i=this;this._unbindEvents=this._bindEvents({$widget:t.$widget,tipOrModal:t.tipOrModal,$tipClickClose:t.$tipClickClose,handleClose:function(e){i._beforeTipClose(),t.handleClose(e)}})},_beforeTipClose:function(){var e=this._options,n=e&&e.beforeTipClose;n&&n()},_bindEvents:_,unbindEvents:function(){this._unbindEvents&&(this._unbindEvents(),this._unbindEvents=null)},_unbindEvents:null,_options:null}),r=l.extend({_constructor:function(n){this._super(n),e.checkArgs(arguments)(f.Object({selector:f.String.optional()}).optional())},_bindEvents:function(e){function n(){M(this,function(){e.handleClose()})}function t(n){"close"===n&&e.handleClose()}var i=this._options,s=i&&i.selector,o=i&&i.receiveMessageSignal,l=o&&!s,r=s?g(s,e.$widget):e.$tipClickClose;return l&&o.listen(t),r.bind("click",n),function(){l&&o.unlisten(t),r.unbind("click",n)}}}),u=l.extend({_bindEvents:function(e){function t(t){v.isRealMouseEvent(t)&&M(this,function(){t.fromClickTipOpen||0!==n(t.target).parents("."+k).length||n(w).hasClass($)||e.handleClose()})}var i=n(document);return i.bind("click",t),function(){i.unbind("click",t)}}}),c=l.extend({_constructor:function(n){this._super(n),e.checkArgs(arguments)(f.Object({hideDelay:f.Integer})),this._hideDelay=1e3*n.hideDelay,this._enabled=!0},_bindEvents:function(e){var n=this,t=e.handleClose,i=setTimeout(function(){n._enabled?t():n._onEnable=t},this._hideDelay);return function(){clearTimeout(i)}},disableClose:function(){this._enabled=!1},enableClose:function(){this._enabled=!0,this._onEnable&&(this._onEnable(),this._onEnable=null)},_hideDelay:null,_enabled:null,_onEnable:null}),a=l.extend({_bindEvents:function(e){function n(){null!==s&&(clearTimeout(s),s=null)}function t(n){var t=n.pageX,i=n.pageY;g.isWithinBounds(o,t,i)||e.tipOrModal.isWithinBounds(t,i)||(s=setTimeout(e.handleClose,250))}function i(){n()}var s=null,o=e.$widget;return o.bind("mouseleave",t).bind("mouseenter",i),function(){o.unbind("mouseleave",t).unbind("mouseenter",i),n()}}}),d=l.extend({_constructor:function(n){this._super(n),e.checkArgs(arguments)(f.Object({signal:f.Instance(e.Signal)}))},_bindEvents:function(e){var n=this._options.signal,t=function(n){I.debug("SignalTipCloseTrigger - triggerArgs:",n),e.handleClose(n)};return n.listen(t),function(){n.unlisten(t)}}}),p=l.extend({_bindEvents:function(e){var n=function(){e.tipOrModal.isShowAnimationRunning||(I.debug("PopState close triggered"),e.handleClose())},t=function(e){I.debug("PopStateTipCloseTrigger - popstate event",e),v.browser.isEdge||n()};return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}}}),b.PageLoadTipOpenTrigger=o,b.MouseOverTipOpenTrigger=s,b.ClickTipOpenTrigger=i,b.ClickTipCloseTrigger=r,b.PageClickTipCloseTrigger=u,b.SignalTipCloseTrigger=d,b.PopStateTipCloseTrigger=p}(TFCApp,tfcJQuery);
!function(e,i){"use strict";function t(e,i,t){var n=this,r=e.data(g);w.handleCriticalMessage(i,t,n.context.fireFitrecRegisterEvent),r&&r.tipOrModal.receiveMessage(i,t)}function n(i){function t(i){var t=i.filter(function(){return e(this).attr(d)});if(i.length!==t.length)throw d+" must be defined on every tip trigger because there are multiple tips for this widget."}t(w.clickOpenTriggers(i)),t(w.clickCloseTriggersOutsidePopup(i)),t(w.rolloverOpenTriggers(i))}var r="tfc-tip-enabled",s="tfc-fitrec-result",a="tfc-tip-window-id",g="tfc-visible-popup-info",o="tfc-tip-receive-message-signal",l="tfc-tip-ab-test-setup",d="data-content-id",p=i.extLibs,c=i.util,u=i.tips,T=i.UserSettings.keys,h=i.Constants,_=h.Attributes,f=i.Tip,w=i.TipOrModal,O=i.utility.Logger.getLogger("WidgetWithTips");i.widget({className:"WidgetWithTips",widgetName:"tfc-widget-with-tips",isAbstract:!0,_cdnProfileURI:null,_constructor:function(e){this._super(e),this._cdnProfileURI=e.cdnProfileURI},_initTip:function(e){var n,r=(f.widgetTips(e),this),s=e.data(o);s||(n=i.postMessageManager.nextWindowId(),s=new i.Signal,e.data(a,n).data(o,s),s.listen(i.bind(t,this,e)),i.postMessageManager.receiveMessage(i.bind(s.trigger,s),r._cdnProfileURI,n)),e.data(l)||(e.data(l,!0),i.abTestComplete.listen(function(i){i===r.widgetName&&(O.debug(r.widgetName+" abTestComplete listen handler - START"),r._unbindCloseTriggers(e),r._bindCloseTriggers(e),r._initAllTips(e),O.debug(r.widgetName+" abTestComplete listen handler - STOP"))}))},_initAllTips:function(e){var i=u.TipEventLevel[this.context.tipConfig.eventLevel],t=c.extend({widgetName:this.widgetName,receiveMessageSignal:e.data(o)},this.context);n(e),this._initTipOpenTriggers(e,t,i,[])},_initTipOpenTriggers:function(t,n,a,o,l,h){var _,v,b,C,I,m=this,P=[],S=p("."+s,t),L=function(){O.debug(m.widgetName+" _initTipOpenTriggers - READING VISIBLE_POPUP_INFO_DATA_KEY - widgetName:",m.widgetName);var e=t.data(g);return e&&e.tipOrModal.isInDom()?e:(O.debug(m.widgetName+" _initTipOpenTriggers - CLEARING VISIBLE_POPUP_INFO_DATA_KEY"),t.data(g,null),null)}(),N=L&&L.contentId,E=this.context.userSettings,A=i.bind(m._initTipOpenTriggers,m,t,n,a,P),M=f.widgetTips(t);return l=l||L&&L.tipOrModal,v=l&&l.id(),h=h||L&&L.otherTipLaunchedSignal,O.debug(m.widgetName+" _initTipOpenTriggers - $widget:",t,"visibleTipOrModal:",l,"visibleTipInfo:",L,"otherTipLaunchedSignal:",h,"visibleTipId:",v),_=c.filter(M,function(e,i){var t=i.id();return"insecure-tip"===t||t!==v}),c.each(o,function(e,i){i.unbindEvents()}),a&&(E.get(T.WidgetTipsAutomaticXout)||E.get(T.WidgetTipsRolloverXout))&&(a=u.TipEventLevel.click),S.toggleClass(r,!!a),m._widgetClickOpen()&&(I=m._alwaysLaunchSecureTip()?"secure-tip":"insecure-tip",P.push(new u.ClickTipOpenTrigger(c.extend({$widget:t,$tipClickOpen:t,handleOpen:function(e,i){h&&h.trigger({launchedTipId:I}),m._launchTip(t,I,A,e,i)}},n)))),0===M.length&&(I=m._alwaysLaunchSecureTip()?"secure-tip":"insecure-tip",C=w.clickOpenTriggers(t,I),C.length&&P.push(new u.ClickTipOpenTrigger(c.extend({$widget:t,$tipClickOpen:C,handleOpen:function(e,i){h&&h.trigger({launchedTipId:I}),m._launchTip(t,I,A,e,i)}},n)))),c.each(_,function(i,r){var s,g,o,p,T;a&&(s=r.id(),p=w.clickOpenTriggersOutsidePopup(t,s),T=w.rolloverOpenTriggersOutsidePopup(t,s),l&&(p=p.add(l.clickOpenTriggersForTipId(s)),T=T.add(l.rolloverOpenTriggersForTipId(s)),N&&p.filter(function(){return e(this).attr(d)!==N})),g=function(e,i){h&&h.trigger({launchedTipId:s}),m._launchTip(t,s,A,e,i)},b=c.extend({$widget:t,handleOpen:g},n),o=[new u.PageLoadTipOpenTrigger(b)],T.length&&o.push(new u.MouseOverTipOpenTrigger(c.extend({$tipRolloverOpen:T},b))),p.length&&o.push(new u.ClickTipOpenTrigger(c.extend({$tipClickOpen:p},b))),c.each(o,function(e,i){P.push(i)}))}),c.each(P,function(e,i){var t=i.getEventLevel(),n=t===u.TipEventLevel.rollover&&c.isMobileSafari;a>=i.getEventLevel()&&!n&&i.bindEvents()}),A},_beforeLaunchTip:c.noop,_afterLaunchTip:c.noop,_launchTip:function(e,t,n,r,s){var o,l,d,p,T=this,_=T.context,w=new i.Signal,v=new u.SignalTipCloseTrigger({signal:w}),b={locale:T._getLocaleCode(),staticContentUri:_.profileURI};O.debug(T.widgetName+" _launchTip - tipId:",t,"reinitTips:",n,"closeTriggers:",r),T._alwaysLaunchModal()||T._widgetContext(e)===h.Context.QuickView||_.pdpWidgetAppContainer===h.Container.Modal||_.responsiveManager.currentScreenSize()===h.ScreenSize.Small?(p=_.getModal(t),_.responsiveManager.currentScreenSize()===h.ScreenSize.Small&&(b.popStateEnabled=!0,d=new u.PopStateTipCloseTrigger)):(p=f.fromWidget(e,t),p||O.raise("Tip: "+t+" not found on widget:",e),p.setPlacement(_.tipConfig.placement)),p.hasIframe()?o=c.extend({windowId:e.data(a)},s,this._getProfileParams(e)):(l=s,o=T.templates[s+"-content"]),p.show(b,o,{before:function(){T._beforeLaunchTip(e,p,s)},after:function(){T._afterLaunchTip(e,p,s)}},this.context),O.debug(T.widgetName+" _launchTip - SETTING VISIBLE_POPUP_INFO_DATA_KEY"),e.data(g,{tipOrModal:p,otherTipLaunchedSignal:w,otherTipLaunchedTipCloseTrigger:v,reinitTipsWhenThisOneCloses:n(p,w),closeTriggers:r,visibleContentId:l}),r.push(v),d&&r.push(d),this._bindCloseTriggers(e)},_bindCloseTriggers:function(e){var i,t,n,r,s,a,o=this,l=e.data(g);O.debug(o.widgetName+" _bindCloseTriggers - READING VISIBLE_POPUP_INFO_DATA_KEY"),O.debug(o.widgetName+" _bindCloseTriggers - visibleTipInfo:",l),l&&(t=l.closeTriggers,s=l.otherTipLaunchedTipCloseTrigger,a=l.reinitTipsWhenThisOneCloses,n=l.tipOrModal,r=n.id(),i=w.clickCloseTriggersOutsidePopup(e,n.id()).add(n.clickCloseTriggers()),c.each(t,function(t,g){var l=g===s,d=function(i){o._closeTip(e,n,r,i&&i.launchedTipId),l||a()};g.bindEvents({$widget:e,tipOrModal:n,$tipClickClose:i,handleClose:d})}))},_unbindCloseTriggers:function(e){var i,t=e.data(g);O.debug(this.widgetName+" _unbindCloseTriggers - READING VISIBLE_POPUP_INFO_DATA_KEY"),O.debug(this.widgetName+" _unbindCloseTriggers - visibleTipInfo:",t),t&&(i=t.closeTriggers,i&&c.each(i,function(e,i){i.unbindEvents()}))},_closeTip:function(e,i,t,n){O.debug(this.widgetName+" _closeTip - tipId:",t,"launchedTipId:",n),this._unbindCloseTriggers(e),O.debug(this.widgetName+" _closeTip - CLEARING VISIBLE_POPUP_INFO_DATA_KEY"),e.data(g,null),i.hide(void 0,this.context.profileMessageBroadcaster,n?{closingTipId:t,openingTipId:n}:void 0)},_getProfileParams:i.Class.unimplemented,_widgetContext:function(e){return e.attr(_.CONTEXT)},_alwaysLaunchModal:function(){return!1},_alwaysLaunchSecureTip:function(){return!1},_widgetClickOpen:function(){return!1}})}(tfcJQuery,TFCApp);
!function(e,t){"use strict";function n(e){return x("."+A,e)}function r(e){var t=e.attr(j.STYLE_ID),n=S[t];return{firstName:e.attr(j.FIRST_NAME),gender:e.attr(j.GENDER)||n.gender,department:n.department,productType:n.productType,registered:e.attr(j.STORE_REGISTERED),styleId:t,alternateUserId:e.attr(j.ALT_USER_ID),styleColorId:e.attr(j.STYLE_COLOR_ID),availableSizes:e.attr(j.AVAILABLE_SIZES),context:e.attr(j.CONTEXT)}}function i(e,t){n(e).addClass(T),tfc.__calculate(void 0,{isEnteringData:t})}function a(e,t){var n={};return f.each(e,function(e,r){f.containsVal(t,e)&&(n[e]=r)}),n}function s(e){return a(e,B)}function o(e){return a(e,w)}function c(t){return{fitRecommendations:e.map(t.fitRecommendations,function(e){return s(e)}),tfpUser:o(t.tfpUser)}}function l(e,t,n){return{element:e,fitRecommendation:s(t),response:n}}function u(e,t,n){var r=t.templateName,i=e===_.NoUser,a=r===_.IncompleteProfile,s=n.isEnteringData;return s&&i&&a&&(r=e),r}var d=t.type,f=t.util,p=t.Constants,g=t.Tip,m=g.Placement,S={},h=p.FitRec.Event,v=p.FitRec.Status,_=p.FitRec.TemplateName,R=h.OpenDialog,E=h.MoreInfo,C=h.Render,I="tfc-fitrec-retry",T="tfc-retry-fitrec-inprogress",b="tfc-fitrec-base",A="tfc-fitrec-result",y="tfc-tip-result",F="tfc-cfg-basic-button",O="tfc-hide-logo-if-gsa-available",L="tfc-hide-logo",N="tfc-gsa-enabled",z="tfc-gsa-disabled",D="tfc-gsa-available",U="tfc-gsa-unavailable",x=t.extLibs,P=t.FitRecUtil,j=p.Attributes,B=["id","status","score","priority","size","advice","recommended"],w=["isAuthenticated","isInitialProfileComplete","isLoggedOut","isUserAvailable","isCredentialSaved","gender"],M="data-event-object",Y="data-current-template-name";t.widget({className:"FitRecs",widgetName:b,isAbstract:!0,retryTimeoutId:null,event:function(e,t){e===E&&(e=R),this._super(e,t)},getCurrentFitResults:function(){return S},preCall:function(){var e=this,t=e._super();return e.retryTimeoutId&&clearTimeout(e.retryTimeoutId),t},_supportedAttrs:function(){return this._super().concat([j.STYLE_ID,j.CONTEXT,j.AVAILABLE_SIZES,j.STYLE_COLOR_ID])},_preCallAttrs:function(){return f.filter(this._super(),function(e,t){return t!==j.AVAILABLE_SIZES&&t!==j.STYLE_COLOR_ID})},expectedUpdateTypes:function(){var e=this._super();return e.products=d.Object({availableSizes:d.String.optional(),colorId:d.String.optional()}).optional(),e},update:function(t){this._super(t);var n,r=this,i=t&&t.products;i&&(n=r.getNodes(),f.each(i,function(t,i){var a=n.filter(function(){return e(this).attr("id")===t});f.each(i,function(e,t){r._updateAttr(a,e,t)})}))},postCall:function(e){var t=e.fitRecommendations,n={},r=c(e),a=this,s=a.getNodes(),o=!1,l=[];a._super(e),a.context.profileMessageBroadcaster.broadcastFitRecResults(t),f.each(t,function(e,t){n[t.id]=S[t.id]=t,t.status===v.NoUser&&(o=!0)}),s.each(function(t,i){var s=n[i.id],o=s&&s.extraClasses||[],c=e.extraClasses.concat(o),u=c.join(" ");a._renderResultFitCall(x(i),n[i.id],e,r,u,l)}),l.length>0&&(this.retryTimeoutId=setTimeout(function(){i(s,e.isEnteringData)},5e3)),a.event(C,{widgets:s.get(),response:r})},_getProfileParams:function(e){return r(e)},_renderResultCommon:function(e,t,r,i){var a,s=i.recipientUser,o=i.userFlags.isShoppingForSelf;a=o?e.attr(j.FIRST_NAME):s.alias,n(e).addClass(t+" "+r),void 0!==a&&x(".tfc-first-name",e).html(a)},_renderResultFitCall:function(r,a,s,o,c,p){function g(e,n){return t.checkArgs(arguments)(d.String,d.String),function(t,r){return r&&f.stringStartsWith(t,e)&&f.stringEndsWith(t,n)}}function S(t,n){var r,i=H.templates;return n?(r=g(t,n),e.map(i,function(e,t){return r(t,e)?e:null})):i[t]?[i[t]]:[]}if(t.checkArgs(arguments)(d.Instance(e),d.PlainObject.optional(),d.Object({userFlags:d.Object({generalSizeAdviceEnabled:d.Boolean,isShoppingForSelf:d.Boolean})}),d.PlainObject,d.String,d.Array),d.PlainObject.test(a)){var h,v,R,E,C,T,b,A,j,B,w,G,V,W,k,Z,X,J,Q,q,H=this,K=H.context,$=s.messages;h=u(r.data(Y),a,s),r.data(Y,h),A=s.userFlags,j=K.shopForOthersEnabled,B=A.isShoppingForSelf,w=A.generalSizeAdviceEnabled,V=a.gsa,W=V&&V.overall,k=V&&V.brand,Z=h===_.BrandAdvice?k:W,G=!!Z,X=null===a.category?"":"tfc-"+a.category,J=null===a.sellingSizeStep?"":"tfc-"+a.sellingSizeStep,Q=[X,J].join(" "),q=x("."+y+".tfc-secure",r),R=K.tipConfig.placement,v=S("secure-tip"),E=S("insecure-tip"),b=l(r,a,o),r.data(M,b),C=H.templates[h],T=v[0]+E[0],r.contents().not(".tfc-tip-result").remove(),0===q.length&&r.append(T),r[R===m.Below?"prepend":"append"](P.evalTemplate(C)),H._renderResultCommon(r,c,Q,s),h===_.AnonymousNotRecommended||h===_.AnonymousRecommended||h===_.NotRecommended||h===_.Recommended?(P.animateFitScore(r,a.score,300,$,s.legacyMessages),x(".tfc-size",r).text(a.size)):h===_.RecommendedGarmentUserSizeOnly||h===_.RecommendedGarmentSizeOnly||h===_.RecommendedUserSizeOnly?x(".tfc-size",r).text(a.size):h===_.EstimationInProgress&&(p.push(r),x("."+I,r).bind("click",function(){i(r,!1)})),n(r).toggleClass(N,w).toggleClass(z,!w).toggleClass(D,G).toggleClass(U,!G),e("."+F+"."+O,n(r)).toggleClass(L,G),G&&n(r).addClass("tfc-"+Z.advice),G&&Z===W&&x(".tfc-gsa-style-count",n(r)).text(Z.styleCount),G&&Z===k&&x(".tfc-gsa-brand",n(r)).text(Z.brandName),H._initTip(r,c),H.event(a.status,b)}},_afterLaunchTip:function(e,t,n){(!t.hasIframe()||n.ips&&n.ips===p.IPS.FitDetails)&&this.event(R,e.data(M))}},t.widget.WidgetWithTips)}(tfcJQuery,TFCApp);
!function(t,e){"use strict";function n(t,e){t.contents().remove(),t.html(r.evalTemplate(e))}var a="render",r=e.FitRecUtil,i=e.Constants.Attributes;e.widget({className:"FitAccount",widgetName:"tfc-fitrec-account",postCall:function(e){var r,i=this,s=i.getNodes(),c=e.status;i._super(e),s.each(function(e,n){i._initTip(t(n),[])}),r=i.templates[c],s.each(function(){n(t(this),r)}),i.event(a,{widgets:s.get(),response:e})},_getProfileParams:function(t){var e=t.attr(i.FIRST_NAME),n=t.attr(i.GENDER),a=t.attr(i.STORE_REGISTERED),r=t.attr(i.ALT_USER_ID);return{firstName:e,gender:n,registered:a,alternateUserId:r}},_alwaysLaunchModal:function(){return!0},_alwaysLaunchSecureTip:function(){return!0}},e.widget.WidgetWithTips)}(tfcJQuery,TFCApp);
!function(e,t){"use strict";var a=e.Constants,n=a.Attributes,r=e.FitRecUtil,i=e.util,o=e.Modal,s="body",c="tfc-modal-backdrop",l={Close:"close",Complete:"complete",LogOut:"logout",Open:"open",PageLoad:"pageload",Render:"render",Update:"update",AddToBag:"addtobag",Chat:"chat"};e.widget({className:"FitProfile",widgetName:"tfc-fitrec-register",$loadingTemplate:null,scrollTop:0,heightToggleIntervalId:void 0,$modals:null,modals:null,onFitCallResponse:function(e){var t=this;t._super(e),e.extraClasses&&i.each(t.modals,function(t,a){a.decorateElement(e.extraClasses.join(" "))})},postCall:function(e){var a,n=this;n._super(e),a=n.getNodes(),a.each(function(e,a){n._initTip(t(a),[])}),n.event(l.Render,{widgets:a.get(),response:e})},setTemplates:function(e){function a(e){var t,a,i,s=l.$modals;return s||(l.$modals=s={}),s[e]=t=r.evalTemplate(l.templates[e+"-modal"]),i=e+"-tip",n[e]=a=o.fromTemplate(t,i),a.placeOnPage(),a}var n,l=this,u=l.context.responsiveManager;l._super(e),l.modals||(l.modals=n={},t(s).append(r.evalTemplate(l.templates["modal-backdrop"])),t("."+c).bind("click",i.noop),a("secure"),a("insecure"),i.each(n,function(e,t){t.updateScreenSize(u.currentScreenSize())}),u.subscribeToScreenSizeChange(function(e){i.each(n,function(t,a){a.updateScreenSize(e)})}))},_constructor:function(t){var a=this;a._super(t),t.fireFitrecRegisterEvent=e.bind(a.event,a),t.getModal=function(e){var t=a.modals;return"secure-tip"===e?t.secure:t.insecure}},_getProfileParams:function(e){var t=this;return{firstName:e.attr(n.FIRST_NAME),gender:e.attr(n.GENDER),registered:e.attr(n.STORE_REGISTERED),alternateUserId:e.attr(n.ALT_USER_ID),originWidget:t.widgetName,sourceTrigger:a.SourceTrigger.Banner}},_alwaysLaunchModal:function(){return!0},_alwaysLaunchSecureTip:function(){return!0},_widgetClickOpen:function(){return!0}},e.widget.WidgetWithTips)}(TFCApp,tfcJQuery);
!function(t){"use strict";t.widget({className:"FitRecsCatalog",widgetName:"tfc-fitrec-catalog"},t.widget.FitRecs)}(TFCApp);
!function(t){"use strict";t.widget({className:"FitRecsProduct",widgetName:"tfc-fitrec-product"},t.widget.FitRecs)}(TFCApp);
!function(t){"use strict";var e=t.Constants,r=e.Attributes,i=t.type;t.widget({className:"OrderNotify",widgetName:"tfc-order-notify",isVisible:!1,_supportedAttrs:function(){return this._super().concat([r.ORDER_ID])},expectedUpdateTypes:function(){var t=this._super();return t.orderId=i.String.optional(),t}})}(TFCApp);
!function(e,t){"use strict";var s=t.extLibs;t.widget({className:"SetUserId",widgetName:"tfc-set-userid",isVisible:!1,postCall:function(e){this._super(e),this.event("render",{widgets:s("."+this.widgetName).get(),response:e})}})}(tfcJQuery,TFCApp);
!function(e,n){"use strict";function r(){var e,n,r,a,i=document.getElementsByTagName("script"),t="",c={};for(n=0;n<i.length;++n)if(e=i[n].src,/fitrec(-[^\.]+)?\.js/.test(e)){t=e;break}for(r=(t.split("?",2)[1]||"").split("&"),n=0;n<r.length;++n)a=r[n].split("=",2),2===a.length&&(c[a[0]]=a[1]);return c}n.extLibs.domready(function(){var e=n.util,a=n.utility,i=n.analytics,t=window.tfcManager?tfcManager.configuration:window.tfc.configuration,c=new n.UserSettings,g=new n.FitRecCookieHelper(c);t.clientToServerLogging&&a.Logger.registerLoggingEngine(new a.HttpLoggerEngine(t.clientToServerLogging,g));var o,s,l=t.responsiveManager=new n.manager.ResponsiveManager(t.profileDeviceType),f=t.analyticsManager=new i.AnalyticsManager,p=t.experiments||[],u=["calculate","event","update"];t.shimQueryParams||(t.shimQueryParams=r()),t.profileMessageBroadcaster=new n.manager.ProfileMessageBroadcaster,l.subscribeToScreenSizeChange(function(e){t.profileMessageBroadcaster.broadcastScreenSizeChange(e)}),n.cookieHelper=g,window.tfc=s=new n.FitRecService(t,c),n.tfcapiSetup(t.legacyEventApiEnabled,u,s),o=n.experiment=new i.WidgetABTest(p),e.each(o.getEngines(),function(e,n){f.addEngine(n)}),n.performanceTracker=new n.PerformanceTracker(t),s.__calculate(void 0,{initialCall:!0})})}(tfcJQuery,TFCApp);