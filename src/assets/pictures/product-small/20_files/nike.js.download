(function(){var a=!1,b=/var xyz/.test(function(){})?/\b_super\b/:/[\D|\d]*/;this.__tmClass=function(){};window.__tmClass=this.__tmClass;__tmClass.extend=function(c){function f(){!a&&this.init&&this.init.apply(this,arguments)}var g=this.prototype;a=!0;var m=new this;a=!1;for(var t in c)m[t]="function"==typeof c[t]&&"function"==typeof g[t]&&b.test(c[t])?function(a,b){return function(){var c=this._super;this._super=g[a];var f=b.apply(this,arguments);this._super=c;return f}}(t,c[t]):c[t];f.prototype=
m;f.prototype.constructor=f;f.extend=arguments.callee;return window.__tmClass=f}})();window.triggermail={config:{eventSource:"custom_integration",encodeCookie:!1}};window.console?"undefined"==typeof window.console.debug&&(console.debug=function(){}):console={debug:function(){},error:function(){},log:function(){}};window.TM_API_HOST="triggeredmail.appspot.com/api";window.triggermail.lytics=[];triggermail.lytics.__SV=1.2;
(function(a){function b(){b.done||(K=b.done=!0,L=!1,d.each(B,function(e){e._dom_loaded()}))}var c=Array.prototype,f=Object.prototype,g=c.slice,m=f.toString,t=f.hasOwnProperty,s=window.console,A=window.navigator,u=window.document,l=A.userAgent,F=["__mps","__mpa","__mpap","$people_distinct_id","__alias"],w=!1;try{w=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(J){}var G="https:"==u.location.protocol?"https://":"http://",f=a&&a.__SV||0,D=w,L=!D&&-1==l.indexOf("MSIE"),d={},C=!1,
O={api_host:G+TM_API_HOST,cross_subdomain_cookie:!0,cookie_name:window.triggermail.custom_cookie_name||"",loaded:function(){},store_google:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,live_demo:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_cookie:!1,ip:!0},K=!1;(function(){var e=c.forEach,a=c.indexOf,b=Array.isArray,x={},y=d.each=function(a,n,b){if(null!=a)if(e&&a.forEach===e)a.forEach(n,b);else if(a.length===+a.length)for(var q=0,d=a.length;q<d&&
!(q in a&&n.call(b,a[q],q,a)===x);q++);else for(q in a)if(t.call(a,q)&&n.call(b,a[q],q,a)===x)break};d.addEvent=function(e,a,n){e.attachEvent?e.attachEvent("on"+a,n):e.addEventListener(a,n)};d.removeEvent=function(e,a,n){e.detachEvent?e.detachEvent("on"+a,n):e.removeEventListener(a,n)};d.extend=function(e){y(g.call(arguments,1),function(a){for(var n in a)void 0!==a[n]&&(e[n]=a[n])});return e};d.isArray=b||function(e){return"[object Array]"===m.call(e)};d.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(a){return!1}};
d.isArguments=function(e){return!(!e||!t.call(e,"callee"))};d.toArray=function(e){return!e?[]:e.toArray?e.toArray():d.isArray(e)||d.isArguments(e)?g.call(e):d.values(e)};d.values=function(e){var a=[];if(null==e)return a;y(e,function(e){a[a.length]=e});return a};d.identity=function(e){return e};d.include=function(e,b){var q=!1;if(null==e)return q;if(a&&e.indexOf===a)return-1!=e.indexOf(b);y(e,function(e){if(q||(q=e===b))return x});return q};d.includes=function(e,a){return-1!==e.indexOf(a)}})();var P=
function(e,a,b){if(void 0===a)return e;switch(null==b?3:b){case 1:return function(b){return e.call(a,b)};case 2:return function(b,q){return e.call(a,b,q)};case 3:return function(b,q,d){return e.call(a,b,q,d)};case 4:return function(b,q,d,c){return e.call(a,b,q,d,c)}}return function(){return e.apply(a,arguments)}},Q=Math.pow(2,53)-1,R=function(e){return function(a){return null==a?void 0:a[e]}}("length");d.map=d.collect=function(e,a,b){a=null==a?d.identity:d.isFunction(a)?P(a,b,void 0):d.isObject(a)?
d.matcher(a):d.property(a);b=R(e);b=!("number"==typeof b&&0<=b&&b<=Q)&&d.keys(e);for(var x=(b||e).length,c=Array(x),k=0;k<x;k++){var M=b?b[k]:k;c[k]=a(e[M],M,e)}return c};d.inherit=function(e,a){e.prototype=new a;e.prototype.constructor=e;e.superclass=a.prototype;return e};d.isObject=function(e){return e===Object(e)&&!d.isArray(e)};d.isEmptyObject=function(e){if(d.isObject(e)){for(var a in e)if(t.call(e,a))return!1;return!0}return!1};d.isUndefined=function(e){return void 0===e};d.isString=function(e){return"[object String]"==
m.call(e)};d.isDate=function(e){return"[object Date]"==m.call(e)};d.isNumber=function(e){return"[object Number]"==m.call(e)};d.encodeDates=function(e){d.each(e,function(a,b){d.isDate(a)?e[b]=d.formatDate(a):d.isObject(a)&&(e[b]=d.encodeDates(a))});return e};d.formatDate=function(e){function a(e){return 10>e?"0"+e:e}return e.getUTCFullYear()+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())};d.strip_empty_properties=function(e){var a=
{};d.each(e,function(e,b){d.isString(e)&&0<e.length&&(a[b]=e)});return a};d.truncate=function(e,a){var b;"string"===typeof e?b=e.slice(0,a):d.isArray(e)?(b=[],d.each(e,function(e){b.push(d.truncate(e,a))})):d.isObject(e)?(b={},d.each(e,function(e,c){b[c]=d.truncate(e,a)})):b=e;return b};d.trim=function(e){return String.prototype.trim?String(e).trim():this.replace(/^\s+|\s+$/g,"")};d.JSONEncode=function(){return function(e){var a=function(e){var a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};a.lastIndex=0;return a.test(e)?'"'+e.replace(a,function(e){var a=b[e];return"string"===typeof a?a:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},b=function(e,d){var c="",f=0,g=f="",g=0,h=c,z=[],l=d[e];switch(typeof l){case "string":return a(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";c+="    ";z=[];if("[object Array]"===
m.apply(l)){g=l.length;for(f=0;f<g;f+=1)z[f]=b(f,l)||"null";return g=0===z.length?"[]":c?"[\n"+c+z.join(",\n"+c)+"\n"+h+"]":"["+z.join(",")+"]"}for(f in l)t.call(l,f)&&(g=b(f,l))&&z.push(a(f)+(c?": ":":")+g);return g=0===z.length?"{}":c?"{"+z.join(",")+""+h+"}":"{"+z.join(",")+"}"}};return b("",{"":e})}}();d.JSONDecode=function(){var e,a,b={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},d,c=function(a){throw{name:"SyntaxError",message:a,at:e,text:d};},k=function(b){b&&b!==a&&c("Expected '"+
b+"' instead of '"+a+"'");a=d.charAt(e);e+=1;return a},f=function(){var e;e="";"-"===a&&(e="-",k("-"));for(;"0"<=a&&"9">=a;)e+=a,k();if("."===a)for(e+=".";k()&&"0"<=a&&"9">=a;)e+=a;if("e"===a||"E"===a){e+=a;k();if("-"===a||"+"===a)e+=a,k();for(;"0"<=a&&"9">=a;)e+=a,k()}e=+e;if(isFinite(e))return e;c("Bad number")},g=function(){var e,d,x="",f;if('"'===a)for(;k();){if('"'===a)return k(),x;if("\\"===a)if(k(),"u"===a){for(d=f=0;4>d;d+=1){e=parseInt(k(),16);if(!isFinite(e))break;f=16*f+e}x+=String.fromCharCode(f)}else if("string"===
typeof b[a])x+=b[a];else break;else x+=a}c("Bad string")},h=function(){for(;a&&" ">=a;)k()},l=function(){switch(a){case "t":return k("t"),k("r"),k("u"),k("e"),!0;case "f":return k("f"),k("a"),k("l"),k("s"),k("e"),!1;case "n":return k("n"),k("u"),k("l"),k("l"),null}c("Unexpected '"+a+"'")},m;m=function(){h();switch(a){case "{":var e;a:{var b={};if("{"===a){k("{");h();if("}"===a){k("}");e=b;break a}for(;a;){e=g();h();k(":");Object.hasOwnProperty.call(b,e)&&c('Duplicate key "'+e+'"');b[e]=m();h();if("}"===
a){k("}");e=b;break a}k(",");h()}}c("Bad object");e=void 0}return e;case "[":a:{e=[];if("["===a){k("[");h();if("]"===a){k("]");break a}for(;a;){e.push(m());h();if("]"===a){k("]");break a}k(",");h()}}c("Bad array");e=void 0}return e;case '"':return g();case "-":return f();default:return"0"<=a&&"9">=a?f():l()}};return function(b){d=b;e=0;a=" ";b=m();h();a&&c("Syntax error");return b}}();d.base64Encode=function(e){var a,b,c,y,k=0,f=0,g="",g=[];if(!e)return e;e=d.utf8Encode(e);do a=e.charCodeAt(k++),
b=e.charCodeAt(k++),c=e.charCodeAt(k++),y=a<<16|b<<8|c,a=y>>18&63,b=y>>12&63,c=y>>6&63,y&=63,g[f++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(y);while(k<e.length);g=g.join("");switch(e.length%3){case 1:g=g.slice(0,-2)+"==";break;case 2:g=
g.slice(0,-1)+"="}return g};d.utf8Encode=function(e){e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var a="",b,d,c=0,k;b=d=0;c=e.length;for(k=0;k<c;k++){var f=e.charCodeAt(k),g=null;128>f?d++:g=127<f&&2048>f?String.fromCharCode(f>>6|192,f&63|128):String.fromCharCode(f>>12|224,f>>6&63|128,f&63|128);null!==g&&(d>b&&(a+=e.substring(b,d)),a+=g,b=d=k+1)}d>b&&(a+=e.substring(b,e.length));return a};d.UUID=function(){var a=function(){for(var a=1*new Date,e=0;a==1*new Date;)e++;return a.toString(16)+e.toString(16)},
b=function(a){function e(a,b){var q,n=0;for(q=0;q<b.length;q++)n|=d[q]<<8*q;return a^n}var b,d=[],n=0;for(a=0;a<l.length;a++)b=l.charCodeAt(a),d.unshift(b&255),4<=d.length&&(n=e(n,d),d=[]);0<d.length&&(n=e(n,d));return n.toString(16)};return function(){var d=(screen.height*screen.width).toString(16);return a()+"-"+Math.random().toString(16).replace(".","")+"-"+b()+"-"+d+"-"+a()}}();d.isBlockedUA=function(){return/(google web preview|baiduspider|yandexbot)/i.test(l)?!0:!1};d.HTTPBuildQuery=function(a,
b){var q,c,f=[];"undefined"===typeof b&&(b="&");d.each(a,function(a,e){q=encodeURIComponent(a.toString());c=encodeURIComponent(e);f[f.length]=c+"="+q});return f.join(b)};d.getQueryParam=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=RegExp("[\\?&]"+b+"=([^&#]*)").exec(a);return null===d||d&&"string"!==typeof d[1]&&d[1].length?"":decodeURIComponent(d[1]).replace(/\+/g," ")};d.cookie={get:function(a){a+="=";for(var b=u.cookie.split(";"),q=0;q<b.length;q++){for(var c=b[q];" "==c.charAt(0);)c=
c.substring(1,c.length);if(0==c.indexOf(a))return a=c.substring(a.length,c.length),triggermail.config.encodeCookie?d.cookie.decode(a):decodeURIComponent(a)}return null},parse:function(a){var b;try{b=d.JSONDecode(d.cookie.get(a))||{}}catch(q){}return b},set:function(a,b,q,c){var f="",k="";c&&(f=(f=(f=u.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?f[0]:"")?"; domain=."+f:"");q&&(k=new Date,k.setTime(k.getTime()+864E5*q),k="; expires="+k.toGMTString());b=triggermail.config.encodeCookie?
d.cookie.encode(b):encodeURIComponent(b);u.cookie=a+"="+b+k+"; path=/"+f},remove:function(a,b){d.cookie.set(a,"",-1,b)},encode:function(a){a=d.cookie._encoder.encode(a);a=a.replace(/=/g,"");a=encodeURIComponent(a);return a.replace(/%/g,"-")},decode:function(a){if(/^%7B%22.*%22%7D$/.test(a))return decodeURIComponent(a);a=a.replace(/-/g,"%");a=decodeURIComponent(a);return a=d.cookie._encoder.decode(a)},_encoder:function(){var a=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];return{encode:function(a){var e,b,d,c,f,g;d=a.length;b=0;for(e="";b<d;){c=a.charCodeAt(b++)&255;if(b==d){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((c&
3)<<4);e+="==";break}f=a.charCodeAt(b++);if(b==d){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((c&3)<<4|(f&240)>>4);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((f&15)<<2);e+="=";break}g=a.charCodeAt(b++);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((c&
3)<<4|(f&240)>>4);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((f&15)<<2|(g&192)>>6);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g&63)}return e},decode:function(b){var d,c,f,k,g;k=b.length;f=0;for(g="";f<k;){do d=a[b.charCodeAt(f++)&255];while(f<k&&-1==d);if(-1==d)break;do c=a[b.charCodeAt(f++)&255];while(f<k&&-1==c);if(-1==c)break;g+=String.fromCharCode(d<<2|(c&48)>>4);do{d=b.charCodeAt(f++)&255;if(61==d)return g;d=a[d]}while(f<k&&
-1==d);if(-1==d)break;g+=String.fromCharCode((c&15)<<4|(d&60)>>2);do{c=b.charCodeAt(f++)&255;if(61==c)return g;c=a[c]}while(f<k&&-1==c);if(-1==c)break;g+=String.fromCharCode((d&3)<<6|c)}return g}}}()};d.register_event=function(){function a(e,c,f){return function(a){var g=a;a=a||b(window.event);var h,l;"undefined"!==typeof a&&(l=c.call(e,a));d.isFunction(f)&&(h=f(g));a=!0;if(!1===h||!1===l)a=!1;return a}}function b(a){a&&(a.preventDefault=b.preventDefault,a.stopPropagation=b.stopPropagation);return a}
b.preventDefault=function(){this.returnValue=!1};b.stopPropagation=function(){this.cancelBubble=!0};return function(b,d,c,n){b?b.addEventListener&&!n?b.addEventListener(d,c,!1):(d="on"+d,b[d]=a(b,c,b[d])):v.error("No valid element provided to register_event")}}();d.dom_query=function(){function a(e,d){return 0<=(" "+e.className+" ").replace(b," ").indexOf(" "+d+" ")}var b=/[\t\r\n]/g;return function(b){if(!u.getElementsByTagName)return[];b=b.split(" ");for(var c,n=Array(u),f=0;f<b.length;f++)if(c=
b[f].replace(/^\s+/,"").replace(/\s+$/,""),-1<c.indexOf("#")){c=c.split("#");var g=c[0],n=u.getElementById(c[1]);if(!n||g&&n.nodeName.toLowerCase()!=g)return[];n=Array(n)}else if(-1<c.indexOf(".")){c=c.split(".");var g=c[0],h=c[1];g||(g="*");c=[];for(var l=0,m=0;m<n.length;m++){var s;s="*"==g?n[m].all?n[m].all:n[m].getElementsByTagName("*"):n[m].getElementsByTagName(g);for(var p=0;p<s.length;p++)c[l++]=s[p]}n=[];for(l=g=0;l<c.length;l++)c[l].className&&(d.isString(c[l].className)&&a(c[l],h))&&(n[g++]=
c[l])}else if(c.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var g=RegExp.$1,t=RegExp.$2,h=RegExp.$3,r=RegExp.$4;g||(g="*");c=[];for(m=l=0;m<n.length;m++){s="*"==g?n[m].all?n[m].all:n[m].getElementsByTagName("*"):n[m].getElementsByTagName(g);for(p=0;p<s.length;p++)c[l++]=s[p]}n=[];g=0;switch(h){case "=":h=function(a){return a.getAttribute(t)==r};break;case "~":h=function(a){return a.getAttribute(t).match(RegExp("\\b"+r+"\\b"))};break;case "|":h=function(a){return a.getAttribute(t).match(RegExp("^"+
r+"-?"))};break;case "^":h=function(a){return 0==a.getAttribute(t).indexOf(r)};break;case "$":h=function(a){return a.getAttribute(t).lastIndexOf(r)==a.getAttribute(t).length-r.length};break;case "*":h=function(a){return-1<a.getAttribute(t).indexOf(r)};break;default:h=function(a){return a.getAttribute(t)}}n=[];for(l=g=0;l<c.length;l++)h(c[l])&&(n[g++]=c[l])}else{g=c;c=[];for(m=l=0;m<n.length;m++){s=n[m].getElementsByTagName(g);for(p=0;p<s.length;p++)c[l++]=s[p]}n=c}return n}}();d.info={campaignParams:function(){var a=
"",b={};d.each(["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],function(c){a=d.getQueryParam(u.URL,c);a.length&&(b[c]=a)});return b},searchEngine:function(a){return 0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)bing.com")?"bing":0===a.search("https?://(.*)yahoo.com")?"yahoo":0===a.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(a){var b=d.info.searchEngine(a),c={};null!==b&&(c.g_search_engine=b,a=d.getQueryParam(a,
"yahoo"!=b?"q":"p"),a.length&&(c.mp_keyword=a));return c},browser:function(){var a=A.vendor||"";return window.opera?d.includes(l,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(l)?"BlackBerry":d.includes(l,"Chrome")?"Chrome":d.includes(a,"Apple")?d.includes(l,"Mobile")?"Mobile Safari":"Safari":d.includes(l,"Android")?"Android Mobile":d.includes(l,"Konqueror")?"Konqueror":d.includes(l,"Firefox")?"Firefox":d.includes(l,"MSIE")?"Internet Explorer":d.includes(l,"Gecko")?"Mozilla":""},
os:function(){return/Windows/i.test(l)?/Phone/.test(l)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(l)?"iOS":/Android/.test(l)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(l)?"BlackBerry":/Mac/i.test(l)?"Mac OS X":/Linux/.test(l)?"Linux":""},device:function(){return/iPhone/.test(l)?"iPhone":/iPad/.test(l)?"iPad":/iPod/.test(l)?"iPod Touch":/(BlackBerry|PlayBook|BB10)/i.test(l)?"BlackBerry":/Windows Phone/i.test(l)?"Windows Phone":/Android/.test(l)?"Android":""},referringDomain:function(a){a=
a.split("/");return 3<=a.length?a[2]:""},properties:function(){return d.strip_empty_properties({os:d.info.os(),browser:d.info.browser(),device:d.info.device(),mp_lib:"web"})},people_properties:function(){return d.strip_empty_properties({$os:d.info.os(),$browser:d.info.browser()})},pageviewInfo:function(a){return d.strip_empty_properties({mp_page:a,mp_referrer:u.referrer,mp_browser:d.info.browser(),mp_platform:d.info.os()})}};var v={log:function(){if((C||triggermail.util.cookie.get("_bc_platform_debug"))&&
!d.isUndefined(s)&&s)try{s.log.apply(s,arguments)}catch(a){d.each(arguments,function(a){s.log(a)})}},error:function(){if((C||triggermail.util.cookie.get("_bc_platform_debug"))&&!d.isUndefined(s)&&s){var a=["Bluecore error:"].concat(d.toArray(arguments));try{s.error.apply(s,a)}catch(b){d.each(a,function(a){s.error(a)})}}},critical:function(){if(!d.isUndefined(s)&&s){var a=["Bluecore error:"].concat(d.toArray(arguments));try{s.error.apply(s,a)}catch(b){d.each(a,function(a){s.error(a)})}}}},w=function(){};
w.prototype.create_properties=function(){};w.prototype.event_handler=function(){};w.prototype.after_track_handler=function(){};w.prototype.init=function(a){this.mp=a;return this};w.prototype.track=function(a,b,c,f){var g=this,k=d.dom_query(a);if(0==k.length)v.error("The DOM query ("+a+") returned 0 elements");else return d.each(k,function(a){d.register_event(a,this.override_event,function(a){var e={},d=g.create_properties(c,this),k=g.mp.get_config("track_links_timeout");g.event_handler(a,this,e);
window.setTimeout(g.track_callback(f,d,e,!0),k);g.mp.track(b,d,g.track_callback(f,d,e))})},this),!0};w.prototype.track_callback=function(a,b,d,c){c=c||!1;var f=this;return function(){d.callback_fired||(d.callback_fired=!0,a&&!1===a(c,b)||f.after_track_handler(b,d,c))}};w.prototype.create_properties=function(a,b){return"function"===typeof a?a(b):d.extend({},a)};var E=function(){this.override_event="click"};d.inherit(E,w);E.prototype.create_properties=function(a,b){var d=E.superclass.create_properties.apply(this,
arguments);b.href&&(d.url=b.href);return d};E.prototype.event_handler=function(a,b,d){d.new_tab=2===a.which||a.metaKey||"_blank"===b.target;d.href=b.href;d.new_tab||a.preventDefault()};E.prototype.after_track_handler=function(a,b,d){b.new_tab||setTimeout(function(){window.location=b.href},0)};var H=function(){this.override_event="submit"};d.inherit(H,w);H.prototype.event_handler=function(a,b,d){d.element=b;a.preventDefault()};H.prototype.after_track_handler=function(a,b,d){setTimeout(function(){b.element.submit()},
0)};var p=function(a){this.props={};this.campaign_params_saved=!1;this.name=a.cookie_name?"mp_"+a.cookie_name:"bc_"+a.token+"_triggermail";this.load();this.update_config(a);this.upgrade(a);this.save()};p.prototype.properties=function(){var a={};d.each(this.props,function(b,c){d.include(F,c)||(a[c]=b)});return a};p.prototype.load=function(){if(!this.disabled){var a=d.cookie.parse(this.name);a&&(this.props=d.extend({},a))}};p.prototype.upgrade=function(a){var b=a.upgrade,c;b&&(c="mp_super_properties",
"string"===typeof b&&(c=b),b=d.cookie.parse(c),d.cookie.remove(c),d.cookie.remove(c,!0),b&&(this.props=d.extend(this.props,b.all,b.events)));if(!a.cookie_name&&"mixpanel"!==a.name&&(c="mp_"+a.token+"_"+a.name,b=d.cookie.parse(c)))d.cookie.remove(c),d.cookie.remove(c,!0),this.register_once(b)};p.prototype.save=function(){this.disabled||d.cookie.set(this.name,d.JSONEncode(this.props),this.expire_days,this.cross_subdomain)};p.prototype.remove=function(){d.cookie.remove(this.name,!1);d.cookie.remove(this.name,
!0)};p.prototype.clear=function(){this.remove();this.props={}};p.prototype.register_once=function(a,b,c){return d.isObject(a)?("undefined"===typeof b&&(b="None"),this.expire_days="undefined"===typeof c?this.default_expiry:c,d.each(a,function(a,e){if(!this.props[e]||this.props[e]===b)this.props[e]=a},this),this.save(),!0):!1};p.prototype.register=function(a,b){return d.isObject(a)?(this.expire_days="undefined"===typeof b?this.default_expiry:b,d.extend(this.props,a),this.save(),!0):!1};p.prototype.unregister=
function(a){a in this.props&&(delete this.props[a],this.save())};p.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(d.info.campaignParams()),this.campaign_params_saved=!0)};p.prototype.update_search_keyword=function(a){this.register(d.info.searchInfo(a))};p.prototype.update_referrer_info=function(a){this.register_once({$initial_referrer:a||"$direct",$initial_referring_domain:d.info.referringDomain(a)||"$direct"},"")};p.prototype.get_referrer_info=function(){return d.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,
$initial_referring_domain:this.props.$initial_referring_domain})};p.prototype.safe_merge=function(a){d.each(this.props,function(b,d){d in a||(a[d]=b)});return a};p.prototype.update_config=function(a){this.default_expiry=this.expire_days=a.cookie_expiration;this.set_disabled(a.disable_cookie);this.set_cross_subdomain(a.cross_subdomain_cookie)};p.prototype.set_disabled=function(a){(this.disabled=a)&&this.remove()};p.prototype.set_cross_subdomain=function(a){a!==this.cross_subdomain&&(this.cross_subdomain=
a,this.remove(),this.save())};p.prototype.get_cross_subdomain=function(){return this.cross_subdomain};p.prototype._add_to_people_queue=function(a,b){var c=this._get_queue_key(a),f=b[a],g=this._get_or_create_queue("$set"),k=this._get_or_create_queue("$add"),h=this._get_or_create_queue("$append",[]);"__mps"===c?(d.extend(g,f),this._pop_from_people_queue("$add",f)):"__mpa"===c?d.each(f,function(a,b){b in g?g[b]+=a:(b in k||(k[b]=0),k[b]+=a)},this):"__mpap"===c&&h.push(f);v.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):");
v.log(b);this.save()};p.prototype._pop_from_people_queue=function(a,b){var c=this._get_queue(a);d.isUndefined(c)||(d.each(b,function(a,b){delete c[b]},this),this.save())};p.prototype._get_queue_key=function(a){if("$set"===a)return"__mps";if("$add"===a)return"__mpa";if("$append"===a)return"__mpap";v.error("Invalid queue:",a)};p.prototype._get_queue=function(a){return this.props[this._get_queue_key(a)]};p.prototype._get_or_create_queue=function(a,b){var c=this._get_queue_key(a);b=d.isUndefined(b)?{}:
b;return this.props[c]||(this.props[c]=b)};var I=function(b,c,f){var g,l="triggermail.lytics"===f?a:a[f];if(l&&!d.isArray(l))v.error("You have already initialized "+f);else return g=new h,g._init(b,c,f),g.people=new r,g.people._init(g),C=C||g.get_config("debug"),d.isUndefined(l)||(g._execute_array.call(g.people,l.people),g._execute_array(l)),g},h=function(){};h.prototype.init=function(b,c,d){if("undefined"===typeof d)v.error("You must name your new library: init(token, config, name)");else if("triggermail.lytics"===
d)v.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");else return b=I(b,c,d),a[d]=b,b._loaded(),b};h.prototype._init=function(a,b,c){this.__loaded=!0;this.config={};this.set_config(d.extend({},O,b,{name:c,token:a,callback_fn:("triggermail.lytics"===c?c:"triggermail.lytics."+c)+"._jsc"}));this._jsc=function(){};this.__dom_loaded_queue=[];this.__request_queue=[];this.__disabled_events=[];this._flags={disable_all_events:!1,identify_called:!1};this.cookie=
new p(this.config);this.register_once({distinct_id:d.UUID()},"")};h.prototype._loaded=function(){this.get_config("loaded")(this);this.get_config("track_pageview")&&this.track_pageview()};h.prototype._dom_loaded=function(){d.each(this.__dom_loaded_queue,function(a){this._track_dom.apply(this,a)},this);d.each(this.__request_queue,function(a){this._send_request.apply(this,a)},this);delete this.__dom_loaded_queue;delete this.__request_queue};h.prototype._track_dom=function(a,b){if(this.get_config("img"))return v.error("You can't use DOM tracking functions with img = true."),
!1;if(!K)return this.__dom_loaded_queue.push([a,b]),!1;var c=(new a).init(this);return c.track.apply(c,b)};h.prototype._prepare_callback=function(a,b){if(d.isUndefined(a))return null;if(D)return function(c){a(c,b)};var c=this._jsc,f=""+Math.floor(1E8*Math.random()),g=this.get_config("callback_fn")+'["'+f+'"]';c[f]=function(d){delete c[f];a(d,b)};return g};h.prototype._send_request=function(a,b,c){if(L)this.__request_queue.push(arguments);else{var f=this.get_config("verbose");this.get_config("test")&&
(b.test=1);f&&(b.verbose=1);this.get_config("img")&&(b.img=1);c&&!D&&(b.callback=c);b.ip=this.get_config("ip")?1:0;b._=(new Date).getTime().toString();if("img"in b){var g=u.createElement("img");g.src=a;u.body.appendChild(g)}else if(D){var k=new XMLHttpRequest;k.open("POST",a,!0);k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");k.withCredentials=!0;k.onreadystatechange=function(a){4===k.readyState&&(200===k.status?c&&(f?c(d.JSONDecode(k.responseText)):c(Number(k.responseText))):
(a="Bad HTTP status: "+k.status+" "+k.statusText,v.error(a),c&&(f?c({status:0,error:a}):c(0))))};k.send(d.HTTPBuildQuery(b))}else{a+="?"+d.HTTPBuildQuery(b);g=u.createElement("script");g.type="text/javascript";g.async=!0;g.defer=!0;g.src=a;var h=u.getElementsByTagName("script")[0];h.parentNode.insertBefore(g,h)}}};h.prototype._execute_array=function(a){var b,c=[],f=[],g=[];d.each(a,function(a){a&&(b=a[0],"function"===typeof a?a.call(this):d.isArray(a)&&"alias"===b?c.push(a):d.isArray(a)&&-1!=b.indexOf("track")&&
"function"===typeof this[b]?g.push(a):f.push(a))},this);a=function(a,b){d.each(a,function(a){this[a[0]].apply(this,a.slice(1))},b)};a(c,this);a(f,this);a(g,this)};h.prototype.push=function(a){this._execute_array([a])};h.prototype.disable=function(a){"undefined"===typeof a?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(a)};h.prototype.track=function(a,b,c){if("undefined"===typeof a)v.error("No event name provided to mixpanel.track");else{b=b||{};b.token=b.token||
this.get_config("token");triggermail.config.eventSource&&(b.event_source=triggermail.config.eventSource);this.cookie.update_search_keyword(u.referrer);this.get_config("store_google")&&this.cookie.update_campaign_params();this.get_config("save_referrer")&&this.cookie.update_referrer_info(u.referrer);b=d.extend({},d.info.properties(),this.cookie.properties(),b);delete b.ch;b={event:a,properties:b};C&&(b.validate=1);b=d.truncate(b,1023);var f=d.JSONEncode(b),f=d.base64Encode(f);v.log("BLUECORE REQUEST:");
v.log(b);payload={data:f};-1!=this.get_distinct_id().indexOf("live_demo")?(payload.live_demo=!0,track_path=this.get_config("api_host")+"/templates/demo_track/"+a):-1!=this.get_distinct_id().indexOf("event_stream")?(payload.event_stream=!0,track_path=this.get_config("api_host")+"/templates/event_stream_track/"+a):track_path=this.get_config("api_host")+"/track/"+a;this._send_request(track_path,payload,this._prepare_callback(c,b));return b}};h.prototype.track_pageview=function(a){"undefined"===typeof a&&
(a=u.location.href);this.track("mp_page_view",d.info.pageviewInfo(a))};h.prototype.track_links=function(){return this._track_dom.call(this,E,arguments)};h.prototype.track_forms=function(){return this._track_dom.call(this,H,arguments)};h.prototype.register=function(a,b){this.cookie.register(a,b)};h.prototype.register_once=function(a,b,c){this.cookie.register_once(a,b,c)};h.prototype.unregister=function(a){this.cookie.unregister(a)};h.prototype._register_single=function(a,b){var c={};c[a]=b;this.register(c)};
h.prototype.identify=function(a,b,c,d){a!=this.get_distinct_id()&&a!=this.get_property("__alias")&&(this.unregister("__alias"),this._register_single("distinct_id",a));this._flags.identify_called=!0;this.people._flush(b,c,d)};h.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};h.prototype.alias=function(a,b){if(a===this.get_property("$people_distinct_id"))return v.critical("Attempting to create alias for existing People user - aborting."),-2;var c=this;d.isUndefined(b)&&
(b=this.get_distinct_id());if(a!==b)return this._register_single("__alias",a),this.track("$create_alias",{alias:a,distinct_id:b},function(b){c.identify(a)});v.error("alias matches current distinct_id - skipping api call.");this.identify(a);return-1};h.prototype.name_tag=function(a){this._register_single("mp_name_tag",a)};h.prototype.set_config=function(a){d.isObject(a)&&(d.extend(this.config,a),this.cookie&&this.cookie.update_config(this.config),C=C||this.get_config("debug"))};h.prototype.get_config=
function(a){return this.config[a]};h.prototype.get_property=function(a){return this.cookie.props[a]};h.prototype.toString=function(){var a=this.get_config("name");"triggermail.lytics"!==a&&(a="triggermail.lytics."+a);return a};var r=function(){};r.prototype._init=function(a){this._mixpanel=a};r.prototype.set=function(a,b,c){var f={},g={};d.isObject(a)?(d.each(a,function(a,b){"$distinct_id"==b||"$token"==b||(g[b]=a)}),c=b):g[a]=b;this._get_config("save_referrer")&&this._mixpanel.cookie.update_referrer_info(u.referrer);
g=d.extend({},d.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),g);f.$set=g;return this._send_request(f,c)};r.prototype.increment=function(a,b,c){var f={},g={};d.isObject(a)?(d.each(a,function(a,b){"$distinct_id"==b||"$token"==b||(isNaN(parseFloat(a))?v.error("Invalid increment value passed to mixpanel.people.increment - must be a number"):g[b]=a)}),c=b):(d.isUndefined(b)&&(b=1),g[a]=b);f.$add=g;return this._send_request(f,c)};r.prototype.append=function(a,b,c){var f={},g={};d.isObject(a)?
(d.each(a,function(a,b){"$distinct_id"==b||"$token"==b||(g[b]=a)}),c=b):g[a]=b;f.$append=g;return this._send_request(f,c)};r.prototype.track_charge=function(a,b,c){if(!d.isNumber(a)&&(a=parseFloat(a),isNaN(a))){v.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",d.extend({$amount:a},b),c)};r.prototype.clear_charges=function(a){return this.set("$transactions",[],a)};r.prototype.delete_user=function(){if(this._identify_called()){var a=
{$delete:this._mixpanel.get_distinct_id()};return this._send_request(a)}v.error("mixpanel.people.delete_user() requires you to call identify() first")};r.prototype.toString=function(){return this._mixpanel.toString()+".people"};r.prototype._send_request=function(a,b){a.$token=this._get_config("token");a.$distinct_id=this._mixpanel.get_distinct_id();var c=d.encodeDates(a),f=d.truncate(c,255),c=d.JSONEncode(c),c=d.base64Encode(c);if(!this._identify_called())return this._enqueue(a),d.isUndefined(b)||
(this._get_config("verbose")?b({status:-1,error:null}):b(-1)),f;v.log("BLUECORE PEOPLE REQUEST:");v.log(f);this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:c},this._mixpanel._prepare_callback(b,f));return f};r.prototype._get_config=function(a){return this._mixpanel.get_config(a)};r.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called};r.prototype._enqueue=function(a){"$set"in a?this._mixpanel.cookie._add_to_people_queue("$set",a):"$add"in
a?this._mixpanel.cookie._add_to_people_queue("$add",a):"$append"in a?this._mixpanel.cookie._add_to_people_queue("$append",a):v.error("Invalid call to _enqueue():",a)};r.prototype._flush=function(a,b,c){var f=this,g=d.extend({},this._mixpanel.cookie._get_queue("$set")),h=d.extend({},this._mixpanel.cookie._get_queue("$add")),l=this._mixpanel.cookie._get_queue("$append");!d.isUndefined(g)&&(d.isObject(g)&&!d.isEmptyObject(g))&&(f._mixpanel.cookie._pop_from_people_queue("$set",g),this.set(g,function(b,
c){0==b&&f._mixpanel.cookie._add_to_people_queue("$set",g);d.isUndefined(a)||a(b,c)}));!d.isUndefined(h)&&(d.isObject(h)&&!d.isEmptyObject(h))&&(f._mixpanel.cookie._pop_from_people_queue("$add",h),this.increment(h,function(a,c){0==a&&f._mixpanel.cookie._add_to_people_queue("$add",h);d.isUndefined(b)||b(a,c)}));if(!d.isUndefined(l)&&d.isArray(l)&&l.length)for(var m=l.length-1;0<=m;m--){var s=l.pop();f.append(s,function(a,b){0==a&&f._mixpanel.cookie._add_to_people_queue("$append",s);d.isUndefined(c)||
c(a,b)})}};d.toArray=d.toArray;d.isObject=d.isObject;d.JSONEncode=d.JSONEncode;d.JSONDecode=d.JSONDecode;d.isEmptyObject=d.isEmptyObject;h.prototype.init=h.prototype.init;h.prototype.disable=h.prototype.disable;h.prototype.track=h.prototype.track;h.prototype.track_links=h.prototype.track_links;h.prototype.track_forms=h.prototype.track_forms;h.prototype.track_pageview=h.prototype.track_pageview;h.prototype.register=h.prototype.register;h.prototype.register_once=h.prototype.register_once;h.prototype.unregister=
h.prototype.unregister;h.prototype.identify=h.prototype.identify;h.prototype.alias=h.prototype.alias;h.prototype.name_tag=h.prototype.name_tag;h.prototype.set_config=h.prototype.set_config;h.prototype.get_config=h.prototype.get_config;h.prototype.get_property=h.prototype.get_property;h.prototype.get_distinct_id=h.prototype.get_distinct_id;h.prototype.toString=h.prototype.toString;p.prototype.properties=p.prototype.properties;p.prototype.update_search_keyword=p.prototype.update_search_keyword;p.prototype.update_referrer_info=
p.prototype.update_referrer_info;p.prototype.get_cross_subdomain=p.prototype.get_cross_subdomain;p.prototype.clear=p.prototype.clear;r.prototype.set=r.prototype.set;r.prototype.increment=r.prototype.increment;r.prototype.append=r.prototype.append;r.prototype.track_charge=r.prototype.track_charge;r.prototype.clear_charges=r.prototype.clear_charges;r.prototype.delete_user=r.prototype.delete_user;r.prototype.toString=r.prototype.toString;if(d.isUndefined(a))v.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");
else if(a.__loaded||a.config&&a.cookie)v.error("Mixpanel library has already been downloaded at least once.");else if(1.1>f)v.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.");else{var B={};d.each(a._i,function(a){var b;a&&d.isArray(a)&&(b=a[a.length-1],a=I.apply(this,a),B[b]=a)});var S=function(){d.each(B,function(b,c){"triggermail.lytics"!==c&&(a[c]=b)});a._=d};a.init=function(b,c,d){d?a[d]||(a[d]=B[d]=I(b,c,d),a[d]._loaded()):(d=a,B["triggermail.lytics"]?
d=B["triggermail.lytics"]:b&&(d=I(b,c,"triggermail.lytics")),window["triggermail.lytics"]=a=d,S())};a.init();d.each(B,function(a){a._loaded()});if(u.addEventListener)"complete"==u.readyState?b():u.addEventListener("DOMContentLoaded",b,!1);else if(u.attachEvent){u.attachEvent("onreadystatechange",b);f=!1;try{f=null==window.frameElement}catch(T){}if(u.documentElement.doScroll&&f){var N=function(){try{u.documentElement.doScroll("left")}catch(a){setTimeout(N,1);return}b()};N()}}d.register_event(window,
"load",b,!0)}})(window.triggermail.lytics);
(function(){(function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a})(triggermail,function(){var a=function(a){var c=triggermail.lytics.get_property("ch"),f=triggermail.util.hashCode(JSON.stringify(a));f!=c&&(triggermail.lytics.register({ch:f.toString()},365),triggermail.track("identify",{customer:a}));return a};return{track:function(a,c){triggermail.lytics._.extend({},c);var f=triggermail.lytics.cookie.props;f.distinct_id&&triggermail.lytics._.extend(c,f);delete c.ch;try{c.url=window.location.href,
-1<c.url.indexOf("s.thebrighttag")&&delete c.url}catch(g){}"page_view"!=a&&("true"==triggermail.util.cookie.get("tm_debug")?triggermail.lytics.track(a,c,this.track_callback(a,c)):triggermail.lytics.track(a,c));triggermail.lytics.get_distinct_id()&&(c.distinct_id=triggermail.lytics.get_distinct_id());try{!0===triggermail.integ.debug&&console.debug(a,c)}catch(m){}},add_to_cart:function(a){return this.track("add_to_cart",{products:[a]})},remove_from_cart:function(a){return this.track("remove_from_cart",
{products:[a]})},wishlist:function(a){return this.track("wishlist",{products:[a]})},view_cart:function(a){return this.track("viewed_cart",a)},stop:function(a){return this.track("stop",a)},page:function(a){return this.track("page_view",a)},purchase:function(a){return this.track("purchase",a)},checkout_start:function(a){return this.track("checkout_start",a)},view:function(a,c){triggermail.integ.salt_products&&(a.salt=Math.random().toString(36).replace(".",""));var f=triggermail.lytics._.extend(c||{},
{products:[a]});return this.track("viewed_product",f)},view_content:function(a,c){triggermail.integ.salt_products&&(a.salt=Math.random().toString(36).replace(".",""));var f=triggermail.lytics._.extend(c||{},{contents:[a]});return this.track("viewed_content",f)},search:function(a){return this.track("search",a)},browse_category:function(a){return this.track("browse_category",{browse_properties:a})},identify:function(b){return a(b)},subscribe:function(b){b.source="newsletter";return a(b)},unsubscribe:function(a){return this.track("unsubscribe",
a)},optin:function(a){return this.track("optin",a)},customer_patch:function(a){return this.track("customer_patch",{customer:a})},patch:function(a){return this.track("patch",a)},merge:function(a){return this.track("merge",a)},custom:function(a,c){return this.track(a,c)},init:function(a){},exception:function(a){var c={};triggermail.lytics._.extend(c,triggermail.lytics._.info.properties());try{c.url=window.location.href,-1<c.url.indexOf("s.thebrighttag")&&delete c.url,c.message=a.message}catch(f){}c.error=
a;this.track("exception",c)},EMAIL_ADDRESS_PROPERTY:"email_address",PAGE_VIEW:"page_view",MAX_PROPERTY_LENGTH:1024}}());triggermail.util=function(){return{price:function(a){return parseFloat((a+"").replace(/[^0-9\.]/g,""))},unique:function(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return triggermail.lytics._.map(b,function(a,b){return b})},slugify:function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},serializeForm:function(a){var b={};a=a.serializeArray();$.each(a,function(){void 0!==
b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""});return b},getUrlParam:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.search);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},isMobile:function(){var a=!1,b="iphone;ipad;android;blackberry;nokia;opera mini;windows mobile;windows phone;iemobile".split(";"),c;for(c in b)0<navigator.userAgent.toLowerCase().indexOf(b[c].toLowerCase())&&
(a=!0);return a},getParamFromQueryString:function(a,b){return decodeURI((RegExp(b+"=(.+?)(&|$)").exec(a)||[,null])[1])},trimString:function(a,b){return triggermail.lytics._.trim(a).substring(0,b)},htmlToText:function(a){var b=document.createElement("p");b.innerHTML=a;return b.textContent||b.innerText||""},isAnonymousUser:function(){var a=triggermail.lytics.get_property(triggermail.core.EMAIL_ADDRESS_PROPERTY);return!this.isValidEmail(a)},emRegex:/\S+@\S+\.\S+/,isValidEmail:function(a){return triggermail.util.emRegex.test(a)},
findEmail:function(a,b){try{return"undefined"==typeof b&&(b=triggermail.util.emRegex),b.exec(a).pop()}catch(c){}},hashCode:function(a){var b=0,c,f;if(0==a.length)return b;for(c=0;c<a.length;c++)f=a.charCodeAt(c),b=(b<<5)-b+f,b&=b;return b},productHash:function(a){a=this.sanitizeProductName(a[TriggerMail.PRODUCT_NAME_PROPERTY]);return this.hashCode(a)},_getbyte64:function(a,b){_ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var c=_ALPHA.indexOf(a.charAt(b));if(-1===c)throw"Cannot decode base64";
return c},b64decode:function(a){var b=0,c,f,g=a.length,m=[];a=String(a);if(0===g)return a;if(0!==g%4)throw"Cannot decode base64";"="===a.charAt(g-1)&&(b=1,"="===a.charAt(g-2)&&(b=2),g-=4);for(c=0;c<g;c+=4)f=this._getbyte64(a,c)<<18|this._getbyte64(a,c+1)<<12|this._getbyte64(a,c+2)<<6|this._getbyte64(a,c+3),m.push(String.fromCharCode(f>>16,f>>8&255,f&255));switch(b){case 1:f=this._getbyte64(a,c)<<18|this._getbyte64(a,c+1)<<12|this._getbyte64(a,c+2)<<6;m.push(String.fromCharCode(f>>16,f>>8&255));break;
case 2:f=this._getbyte64(a,c)<<18|this._getbyte64(a,c+1)<<12,m.push(String.fromCharCode(f>>16))}return m.join("")},wrapEvent:function(a){var b=Array.prototype.slice.call(arguments,1);return function(){try{return a.apply(this,b.concat(Array.prototype.slice.call(arguments,0)))}catch(c){triggermail.exception(c)}}},removeURLParam:function(a,b){return triggermail.util.updateURLParams(a,b,!1)},keepURLParam:function(a,b){return triggermail.util.updateURLParams(a,b,!0)},updateURLParams:function(a,b,c){var f=
a.split("?")[0],g=[],g=-1!==a.indexOf("?")?a.split("?")[1]:"";if(""!==g){for(var g=g.split("&"),m=g.length-1;0<=m;m-=1)a=g[m].split("=")[0],c?triggermail.lytics._.isArray(b)?-1==b.indexOf(a)&&g.splice(m,1):a!=b&&g.splice(m,1):triggermail.lytics._.isArray(b)?-1<b.indexOf(a)&&g.splice(m,1):a==b&&g.splice(m,1);f+=0<g.length?"?"+g.join("&"):""}return f},getArrayElementFromQueryString:function(a,b){var c=[];a||(a=location.href);b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");for(var f=RegExp(b+"=([^&#]+)",
"ig");;){var g=f.exec(a);if(g&&g[1])c.push(g[1]);else break}return c.length?1==c.length?c[0]:c:null},registerAndMergeOpaqueId:function(a){"undefined"!==typeof a&&a&&!triggermail.lytics.cookie.props.tm_merged&&(triggermail.track("merge",{merge:{source:triggermail.lytics.cookie.props.distinct_id,destination:a}}),triggermail.lytics.cookie.props.tm_merged=!0,triggermail.lytics.cookie.props.distinct_id=a,triggermail.lytics.cookie.save())},executeOnLoad:function(a,b,c,f,g){c=c||3;f=f||500;if((g=g||!1)&&
0<triggermail.lytics._.dom_query(a).length||"undefined"!==typeof window[a])try{b()}catch(m){}else if(0!==c)try{c--,setTimeout(function(){triggermail.util.wrapEvent(function(){triggermail.util.executeOnLoad(a,b,c,f,g)},a,b,c,f,g)()},f)}catch(t){}}}}();triggermail.util.cookie=triggermail.lytics._.cookie;triggermail.util.encode=triggermail.lytics._.JSONEncode;triggermail.util.decode=triggermail.lytics._.JSONDecode;triggermail.demo=function(){var a=triggermail.lytics.get_distinct_id();-1==a.indexOf("live_demo")&&
(triggermail.lytics._register_single("distinct_id","live_demo_"+a),a=triggermail.lytics.get_distinct_id());triggermail.lytics.cookie.update_config({live_demo:!0,cookie_expiration:1});window.open("http://www.bluecore.com/api/templates/live_demo/"+triggermail.Partner.keys.lytics.p+"/"+a)};triggermail.event_stream=function(){var a=triggermail.lytics.get_distinct_id();-1==a.indexOf("event_stream")&&(triggermail.lytics._register_single("distinct_id","event_stream_"+a),a=triggermail.lytics.get_distinct_id());
triggermail.lytics.cookie.update_config({event_stream:!0,cookie_expiration:1});window.open("http://www.bluecore.com/api/templates/event_stream/"+triggermail.Partner.keys.lytics.p+"/"+a)};triggermail.util.walk=function(a,b){b(a);for(a=a.firstChild;a;)walk(a,b),a=a.nextSibling};triggermail.util.walkUntil=function(a,b,c){ret=b(a);if(!0===c(ret))return ret;for(a=a.firstChild;a;)walk(a,b),a=a.nextSibling};triggermail.insanetiego=function(){return{inject_div:function(){$("body").append('<div id="insanetiego" style="position:fixed;bottom:0;width:100%;background:#D8E7ED;height:300px;overflow:scroll;z-index:2000;border-top-style:solid;border-top-width:5px;"></div>')},
remove_div:function(){$("#insanetiego").remove()},debug:function(){triggermail.util.cookie.set("tm_debug",!0);triggermail.integ.debug=!0;this.inject_div()},undebug:function(){triggermail.util.cookie.set("tm_debug",!1);triggermail.integ.debug=!1}}}();triggermail.core={};triggermail.core.sanitizer=function(){return{sanitize:function(a,b){if("email"==a){var c;c=/\S+@\S+\.\S+/.test(b)?b:null;return c}return b?b:""}}}()})();
triggermail.integ=function(){return{init:function(){if(!triggermail.util.getUrlParam("bluecore_do_not_track")){"undefined"!=typeof triggermail.Partner.init?triggermail.Partner.init():triggermail.integ.partnerInit();try{triggermail.integ.checkLoop()}catch(a){}}},partnerInit:function(a){var b=triggermail.Partner;if(!("undefined"==typeof a&&(triggermail.lytics._.dom_query(".translated-rtl, .translated-rtl, #goog-gt-tt").length||triggermail.lytics._.dom_query('meta[http-equiv="X-Translated-By"]').length))){try{b.trackProductView()}catch(c){c.location=
"trackProductView",triggermail.exception(c)}try{b.trackAddToCart()}catch(f){f.location="trackAddToCart",triggermail.exception(f)}try{b.trackCheckout()}catch(g){g.location="trackCheckout",triggermail.exception(g)}try{b.watchEmail()}catch(m){m.location="watchEmail",triggermail.exception(m)}if(b.hasOwnProperty("trackRemoveFromCart"))try{b.trackRemoveFromCart()}catch(t){t.location="trackRemoveFromCart",triggermail.exception(t)}if(b.hasOwnProperty("trackCheckoutStart"))try{b.trackCheckoutStart()}catch(s){s.location=
"trackCheckoutStart",triggermail.exception(s)}if(b.hasOwnProperty("trackUnsubscribe"))try{b.trackUnsubscribe()}catch(A){A.location="trackUnsubscribe",triggermail.exception(A)}if(b.hasOwnProperty("trackSubscribe"))try{b.trackSubscribe()}catch(u){u.location="trackSubscribe",triggermail.exception(u)}if(b.hasOwnProperty("trackSearch"))try{b.trackSearch()}catch(l){l.location="trackSearch",triggermail.exception(l)}if(b.hasOwnProperty("trackBrowseCategory"))try{b.trackBrowseCategory()}catch(F){F.location=
"trackBrowseCategory",triggermail.exception(F)}if(b.hasOwnProperty("trackWishlist"))try{b.trackWishlist()}catch(w){w.location="trackWishlist",triggermail.exception(w)}if(b.hasOwnProperty("trackContentView"))try{b.trackContentView()}catch(J){J.location="trackContentView",triggermail.exception(J)}if(b.hasOwnProperty("trackStop"))try{b.trackStop()}catch(G){G.location="trackStop",triggermail.exception(G)}if(triggermail.Partner.hasOwnProperty("trackCustom"))try{triggermail.Partner.trackCustom()}catch(D){triggermail.exception(D)}}},
checkLoop:function(){if("undefined"==typeof triggermail.Partner.disableEmailAppendPickup||!1==triggermail.Partner.disableEmailAppendPickup){var a=triggermail.util.getUrlParam("tme");if(0<a.length){triggermail.identify({email:a,source:"tme email append"},!0);return}if((a=decodeURIComponent(location.search).match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)||decodeURIComponent(location.hash).match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi))&&triggermail.util.isValidEmail(a[0])){triggermail.identify({email:a[0],
source:"esp email append"});return}}a=triggermail.util.getUrlParam("obem");"undefined"!=typeof a&&""!=a&&triggermail.identify({obem:a,source:"obem email append"});0<triggermail.lytics._.dom_query("#bluecore_purchase_pixel").length&&"undefined"!=typeof triggermail.lytics._.dom_query("#bluecore_purchase_pixel")[0]&&(a=triggermail.lytics._.dom_query("#bluecore_purchase_pixel")[0].src,a=triggermail.util.getParamFromQueryString(a,"email"),triggermail.identify({email:a,source:"bluecore purchase pixel"}));
triggermail.lytics._.addEvent(document,"bc:identify",triggermail.util.wrapEvent(function(a,c){triggermail.util.isValidEmail(c.email)&&triggermail.identify({email:c.email,source:"dom event"})}))}}}();
triggermail.integ.ProductFetcher=__tmClass.extend({name:function(){return this._name},readOg:function(a){},category:function(){return this._category},color:function(){return this._color},size:function(){return this._size},price:function(){return this._price},brand:function(){return this._brand},id:function(){return this._id},image:function(){return this._image},url:function(){return this._url},out_of_stock:function(){return!1},tags:function(){return this._tags},to_dict:function(){try{var a={name:triggermail.core.sanitizer.sanitize("name",
this.name()),category:triggermail.core.sanitizer.sanitize("category",this.category()),size:triggermail.core.sanitizer.sanitize("size",this.size()),price:triggermail.core.sanitizer.sanitize("price",this.price()),brand:triggermail.core.sanitizer.sanitize("brand",this.brand()),id:triggermail.core.sanitizer.sanitize("id",this.id()),image:triggermail.core.sanitizer.sanitize("image",this.image()),url:triggermail.core.sanitizer.sanitize("url",this.url()),out_of_stock:this.out_of_stock(),tags:this.tags(),
color:triggermail.core.sanitizer.sanitize("color",this.color())},b;for(b in a)(""===a[b]||!1==a[b])&&"out_of_stock"!=b&&delete a[b];triggermail.lytics._.extend(a,this.extra_props());return a}catch(c){c.location="product_fetcher",triggermail.exception(c)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}});
triggermail.integ.ContentFetcher=__tmClass.extend({name:function(){return this._name},id:function(){return this._id},image:function(){return this._image},url:function(){return this._url},title:function(){return this._title},to_dict:function(){try{var a={id:triggermail.core.sanitizer.sanitize("id",this.id()),image:triggermail.core.sanitizer.sanitize("image",this.image()),name:triggermail.core.sanitizer.sanitize("name",this.name()),title:triggermail.core.sanitizer.sanitize("title",this.title()),url:triggermail.core.sanitizer.sanitize("url",
this.url())},b;for(b in a)(""===a[b]||!1==a[b])&&delete a[b];triggermail.lytics._.extend(a,this.extra_props());return a}catch(c){c.location="content_fetcher",triggermail.exception(c)}},extra_props:function(){return{}},fetch:function(){return this.to_dict()}});triggermail.integ.initServices=function(){triggermail.lytics.init(triggermail.integ.keys.lytics);triggermail.lytics=window["triggermail.lytics"];triggermail.lytics.set_config({save_referrer:!1,store_google:!1,debug:triggermail.integ.debug})};
triggermail.fetcher=triggermail.integ.ProductFetcher.extend({name:function(){return triggermail.productData.productTitle},category:function(){return triggermail.productData.trackingData.product.category.toLowerCase()},id:function(){return triggermail.productData.productId},brand:function(){},image:function(){var a=document.querySelector('meta[property="og:image"]').content,a=""!=triggermail.util.getParamFromQueryString(a,"hei")?a.replace(/hei=\d+/,"hei=450"):a+"&hei=450";return a=""!=triggermail.util.getParamFromQueryString(a,
"wid")?a.replace(/wid=\d+/,"wid=450"):a+"&wid=450"},price:function(){return triggermail.util.price(triggermail.productData.localPrice)},out_of_stock:function(){return!triggermail.productData.inStock||triggermail.productData.showComingSoonMessage||triggermail.productData.showOutOfStockMessage||triggermail.productData.showPreOrderMessage?!0:!1},url:function(){return window.location.href.split("?")[0].replace("http://m.nike.com/","http://store.nike.com/")},extra_props:function(){var a={is_nike_id:"false"};
triggermail.productData.reviews.averageRating&&(a.rating=Math.round(10*triggermail.productData.reviews.averageRating)/10);triggermail.productData.overriddenLocalPrice?(a.original_price=triggermail.util.price(triggermail.productData.overriddenLocalPrice),a.on_sale=!0):a.on_sale=!1;if(null!=triggermail.productData.productSubTitle){a.subtitle=triggermail.productData.productSubTitle;switch(triggermail.productData.trackingData.product.gender){case "1":a.gender="mens";break;case "2":a.gender="womens";break;
case "3":a.gender="boys";break;case "4":a.gender="girls"}-1<triggermail.productData.productSubTitle.toLowerCase().indexOf("toddler")&&(a.gender="infant");var b=triggermail.productData.productSubTitle.toLowerCase(),b=b.replace(/\(.*\)/,""),b=triggermail.util.trimString(b);a.subcategory=b.split(" ").pop()}a.primary_sport_raw=triggermail.fetcher.get_primary_sport_raw(!1);a.primary_sport=triggermail.fetcher.get_primary_sport(!1);triggermail.productData.colorDescription&&"undefined"!==typeof triggermail.productData.colorDescription&&
triggermail.productData.colorDescription.split("/").forEach(function(b,f){""!=b&&(a["product_color_"+f]=b);return 3>f});"NFL"===a.primary_sport&&("undefined"!=typeof document.querySelector(".exp-pdp-nfl-team-breadcrumb").getAttribute("data-teamname")?a.team_name=document.querySelector(".exp-pdp-nfl-team-breadcrumb").getAttribute("data-teamname").toLowerCase():a.team_name=document.querySelector('[data-gadget="nike.gadget.CrossSell"]').getAttribute("data-nfl-team-name").toLowerCase());"undefined"==
typeof a.gender&&(a.gender="unisex");a.style_id=triggermail.productData.styleNumber;a.has_style_id=!0;-1<triggermail.productData.productTitle.toLowerCase().indexOf("converse")&&(a.is_converse="true",a.primary_sport="converse");-1<triggermail.productData.productTitle.toLowerCase().indexOf("jordan")&&(a.is_jordan="true",a.primary_sport="jordan");-1<triggermail.productData.productTitle.toLowerCase().indexOf("hurley")&&(a.is_hurley="true",a.primary_sport="hurley");-1<triggermail.productData.productTitle.toLowerCase().indexOf("nike+")&&
(a.is_nike_plus="true");a.heat_level=triggermail.productData.trackingData.heatLevel||"none";return a}});
triggermail.Partner=function(){return{trackProductView:function(){try{-1<window.location.href.indexOf("www.nike.com")&&null==document.querySelector("#product-data")?triggermail.Partner.cicProductView():triggermail.Partner.commonProductView()}catch(a){}},trackContentView:function(){var a=Math.floor(100*Math.random());if(("https://www.nike.com/us/en_us/c/nfl"==window.location.href||"http://www.nike.com/us/en_us/c/nfl"==window.location.href)&&3>a){var b={id:"nfl",image:document.querySelectorAll("img.nike-cq-touts-full-screen-tout-touts-background-image-resource")[2].src,
secondary_image:document.querySelectorAll("img.nike-cq-touts-full-screen-tout-touts-background-image-resource")[3].src,name:"nfl",url:window.location.href.split("?")[0],headline:document.querySelector("span.nike-cq-title-line-1").innerText,primary_sport:"NFL",subtitle:document.querySelector("span.nike-cq-title-line-2").innerText,team_name:"nfl"};try{document.querySelectorAll("a.nsg-button.nsg-bg--white.nike-cq-cta-text-size-15").forEach(function(a,c){b["cta_"+c.toString()]=a.getAttribute("data-tracking");
b["cta_link_"+c.toString()]=a.href})}catch(c){}try{var f=document.querySelectorAll("h2.nike-cq-title-headline");f.forEach(function(a,c){2==a.children.length&&0<c&&(b["boxzone_headline_"+c.toString()]=a.children[0].innerText,b["boxzone_subtitle_"+c.toString()]=a.children[1].innerText)})}catch(g){}try{triggermail.view_content(b)}catch(m){}}if(("https://m.nike.com/us/en_us/c/basketball"==window.location.href||"http://m.nike.com/us/en_us/c/basketball"==window.location.href)&&-1==window.location.href.indexOf("women")&&
3>a){a=window.location.href.split(/[#?]/)[0].split("/").pop();b={id:triggermail.util.slugify(a),name:triggermail.util.slugify(a),image:"http://www.triggermail.io/images/blue_logo.png",url:"www.nike.com"+window.location.pathname,primary_image:document.querySelectorAll("img.nike-cq-phone-image-component")[0].src,headline:document.querySelector("span.nike-cq-title-line-1").innerText+" "+document.querySelector("span.nike-cq-title-line-2").innerText,subhead_0:"",subhead_1:"",subhead_2:""};try{for(var t=
document.querySelectorAll("h2.nike-cq-title-headline")[0].children,a=2;a<t.length;a++)b["subhead_"+(a-2)]=t[a].innerText}catch(s){}try{f=document.querySelectorAll("div.nike-cq-fst-component.subtitle-overlay-position-center.nike-cq-touts-full-screen-tout-resource"),0<f.length&&(b.primary_boxzone_0_image=f[0].querySelector("img").src,b.primary_boxzone_0_link=f[0].querySelector("a").href,b.primary_boxzone_0_headline=f[0].querySelector(".nike-cq-title-line-1").innerText,f[0].querySelector(".nike-cq-title-line-2")?
b.primary_boxzone_0_subhead=f[0].querySelector(".nike-cq-title-line-2").innerText:b.primary_boxzone_0_subhead="",f.forEach(function(a,c){0<c&&3>c&&(b["secondary_boxzone_"+c.toString()+"_image"]=f[c].querySelector("img").src,b["secondary_boxzone_"+c.toString()+"_link"]=f[c].querySelector("a").href,b["secondary_boxzone_"+c.toString()+"_headline"]=f[c].querySelector(".nike-cq-title-line-1").innerText,f[c].querySelector(".nike-cq-title-line-2")?b["secondary_boxzone_"+c.toString()+"_subhead"]=f[c].querySelector(".nike-cq-title-line-2").innerText:
b["secondary_boxzone_"+c.toString()+"_subhead"]="")}))}catch(A){}try{triggermail.view_content(b)}catch(u){}}},trackAddToCart:function(){try{-1<window.location.href.indexOf("www.nike.com")&&null==document.querySelector("#product-data")?triggermail.Partner.cicAddToCart():triggermail.Partner.doTrackAddToCart()}catch(a){}},trackRemoveFromCart:function(){try{triggermail.Partner.doRemoveFromCart()}catch(a){}},trackWishlist:function(){},trackCheckoutStart:function(){-1<window.location.pathname.indexOf("checkout_login")&&
triggermail.checkout_start({})},trackCheckout:function(){try{if(-1<window.location.pathname.indexOf("confirm")&&"undefined"!==typeof nike.checkout.analyticsData){var a=nike.checkout.analyticsData,b={},c=[];b.order_id=a.orderId;b.total=triggermail.util.price(a.pricingData.total);for(var f=0;f<a.productList.length;f++)c.push({id:a.productList[f].productId});b.products=c;var g=triggermail.util.findEmail(document.querySelector("#ch4_billingReview").innerText);g&&(b.email=g,triggermail.identify({email:g,
source:"checkout flow"}));triggermail.purchase(b)}}catch(m){}try{-1<window.location.pathname.indexOf("checkout")&&document.querySelector("html").addEventListener("neo",function(a){a=a.detail;if("order confirmation"==a.application.view){var b={},c=[];b.order_id=a.orderId;b.total=triggermail.util.price(a.pricingData.total);for(var f=0;f<a.productList.length;f++)c.push({id:a.productList[f].productId});b.products=c;triggermail.util.isValidEmail(a.consumer.customerEmail)&&(b.email=a.consumer.customerEmail,
triggermail.identify({email:a.consumer.customerEmail,source:"checkout flow"}));triggermail.purchase(b)}})}catch(t){}},trackSearch:function(){try{if("productgrid"==JSON.parse(document.querySelector("#pageTrackingDataElement").innerHTML).response.pageType){var a=window.location.pathname.split("/").filter(function(a){return a.match(/[a-z]-+/g)});if(0<a.length){var b=a[0].replace(/[-_]/g," ").replace(/new|clearance|sale|flash/gi,"").trim();""!=b&&triggermail.search({search_term:b})}}}catch(c){}try{""!=
triggermail.util.getUrlParam("sl")&&(b=triggermail.util.getUrlParam("sl").replace(/[-_]/g," ").replace(/new|clearance|sale|flash/gi,"").trim(),""!=b&&triggermail.search({search_term:b}))}catch(f){}try{nike.deferredListen(nike.Event.GRIDWALL_REFRESH,function(a,b){var c=window.location.pathname.split("/").filter(function(a){return a.match(/[a-z]-+/g)});0<c.length&&(c=c[0].replace(/[-_]/g," ").replace(/new|clearance|sale|flash/gi,"").trim(),""!=c&&triggermail.search({search_term:c}));b&&"user typed"==
b.onsiteSearchType&&(c=b.searchTerm.replace(/[-_]/g," ").replace(/new|clearance|sale|flash/gi,"").trim(),""!=c&&triggermail.search({search_term:c}))})}catch(g){}},trackUnsubscribe:function(){},trackSubscribe:function(){setTimeout(function(){try{document.querySelector('button[data-click="submit"]').addEventListener("click",function(){for(var a=document.querySelectorAll('input.bx-el.bx-input[type="email"]'),b="",g=0;g<a.length;g++)if(b=a[g].value,""!=b&&triggermail.util.isValidEmail(b)){triggermail.identify({email:b,
source:"email capture popup"});break}})}catch(a){}},3E3);try{-1<triggermail.util.getUrlParam("l").indexOf("email_signup")&&document.querySelector(".exp-profile-email-signup-form button.email-button").addEventListener("click",function(){var a=document.querySelector('.exp-profile-email-signup-form input[name="email"]').value;triggermail.util.isValidEmail(a)&&triggermail.identify({email:a,source:"email signup"})})}catch(a){}},watchEmail:function(){try{triggermail.Partner.doWatchEmail()}catch(a){}5>Math.floor(100*
Math.random())&&nike.unite.session.getCredential(function(a){try{if(a&&"undefined"!=typeof a.user.entity.account){var c=a.user.entity.account.email;triggermail.util.isValidEmail(c)&&triggermail.identify({email:c,source:"account login"})}}catch(f){}},function(){})},doWatchEmail:function(){nike.deferredListen(nike.Event.SUCCESSFUL_USER_LOADED,function(a,b){});nike.deferredListen(nike.Event.REGISTER_SUCCESS,function(a,b){try{"undefined"!=typeof b.user&&"1"==b.user.receiveEmail&&triggermail.identify({email:b.user.mspEmail,
first_name:b.user.firstName,last_name:b.user.lastName,source:"account register"})}catch(c){}});nike.deferredListen(nike.Event.LOGIN_SUCCESS,function(a,b){try{triggermail.identify({email:b.response.email})}catch(c){}});window.triggermail_email_address&&triggermail.identify({email:triggermail_email_address});""!=triggermail.util.getUrlParam("et_e")&&(triggermail.util.isValidEmail(triggermail.util.getUrlParam("et_e"))?triggermail.identify({email:triggermail.util.getUrlParam("et_e")}):triggermail.identify({ingested_id:triggermail.util.getUrlParam("et_e"),
source:"custom",source_detail:"id_append"}))},env:function(){return"drprd-store.nike.com"==window.location.hostname?"d":(-1<window.location.hostname.indexOf("www.nike.com")||-1<window.location.hostname.indexOf("m.nike.com"))&&0!=window.location.hostname.indexOf("ecn")?"p":-1<window.location.hostname.indexOf("store.nike.com")&&0!=window.location.hostname.indexOf("ecn")&&-1<window.location.pathname.indexOf("/us/")?"p":"d"},keys:{lytics:{d:"dev",p:"nike"}}}}();
triggermail.CustomConverseFetcher=triggermail.integ.ProductFetcher.extend({id:function(){try{return nike.globalData.pdpData.productId}catch(a){}},url:function(){try{return window.location.href.split("?")[0]}catch(a){}},name:function(){try{return nike.globalData.pdpData.productTitle}catch(a){}},image:function(){try{return nike.globalData.pdpData.imagesHeroZoom[0]}catch(a){}},price:function(){try{return triggermail.util.price(nike.globalData.pdpData.localPrice)}catch(a){}},extra_props:function(){var a=
{},b=nike.globalData.pdpData;a.is_custom_converse="true";a.primary_sport="converse";try{a.rating=parseFloat(b.reviews.formattedAverageRating)}catch(c){}try{a.on_sale=b.onSale,a.original_price=triggermail.util.price(b.formattedListPrice)}catch(f){}try{-1<b.productSubTitle.toLowerCase().indexOf("infant")||-1<b.productSubTitle.toLowerCase().indexOf("little kids")?a.gender="infant":a.gender="unisex"}catch(g){}try{b.styleNumber?(a.style_id=b.styleNumber,a.has_style_id=!0):a.has_style_id=!1}catch(m){}return a}});
triggermail.NikeIdFetcher=triggermail.integ.ProductFetcher.extend({id:function(){try{return nike.globalData.pdpData.productId}catch(a){}},url:function(){try{return window.location.href.split("?")[0]}catch(a){}},name:function(){try{return nike.globalData.pdpData.productTitle}catch(a){}},image:function(){try{return nike.globalData.pdpData.imagesHeroZoom[0]}catch(a){}},price:function(){try{return triggermail.util.price(nike.globalData.pdpData.localPrice)}catch(a){}},extra_props:function(){var a={},b=
nike.globalData.pdpData;a.is_nike_id="true";try{a.primary_sport=triggermail.fetcher.get_primary_sport(!0),a.primary_sport_raw=triggermail.fetcher.get_primary_sport_raw(!0),-1<b.productTitle.toLowerCase().indexOf("jordan")&&(a.is_jordan="true",a.primary_sport="jordan")}catch(c){}try{a.rating=parseFloat(b.reviews.formattedAverageRating)}catch(f){}try{a.on_sale=b.onSale,a.original_price=triggermail.util.price(b.formattedListPrice)}catch(g){}try{0==b.unlocalizedName.indexOf("W")?a.gender="womens":a.gender=
"mens"}catch(m){}try{b.styleNumber?(a.style_id=b.styleNumber,a.has_style_id=!0):a.has_style_id=!1}catch(t){}return a}});triggermail.Partner.primarySports="skateboarding;running;basketball;training;football;soccer;golf;tennis;baseball;snowboarding;volleyball;lacrosse;softball;surfing;track and field;yoga;outdoor;hockey;dance;sportswear;NFL;lifestyle".split(";");
triggermail.Partner.primarySportsMap={"baseball / softball":"baseball","training & gym":"training","track & field":"track and field","fitness & training":"training",skateboard:"skateboarding","gym & training":"training","baseball & softball":"baseball",snowboard:"snowboarding",tenis:"tennis",calcio:"football",basket:"basketball",atletica:"track and field","football americano":"NFL","basket-ball":"basketball","entra\u00eenement":"training","athl\u00e9tisme":"track and field","football am\u00e9ricain":"NFL",
"base-ball":"baseball","baseball et softball":"baseball",danse:"dance","fitness et training":"training","f\u00fatbol":"football",baloncesto:"basketball",entrenamiento:"training",atletismo:"track and field","f\u00fatbol americano":"NFL","b\u00e9isbol":"baseball","b\u00e9isbol y softball":"baseball","gym y training":"training",danza:"dance",correr:"running","estilo de vida":"lifestyle","b\u00e1squetbol":"basketball","b\u00e1squet":"basketball","fu\u00dfball":"football",laufen:"running",leichtathletik:"track and field",
"american football":"NFL",tanzen:"dance",freizeit:"lifestyle",hardlopen:"running",voetbal:"football",atletiek:"track and field","fitness en training":"training",skateboarden:"skateboarding",dans:"dance",basketbal:"basketball",snowboarden:"snowboarding","honkbal en softbal":"baseball","\u03c0\u03bf\u03b4\u03cc\u03c3\u03c6\u03b1\u03b9\u03c1\u03bf":"football","\u03c4\u03c1\u03ad\u03be\u03b9\u03bc\u03bf":"running","\u03bc\u03c0\u03ac\u03c3\u03ba\u03b5\u03c4":"basketball","\u03c0\u03c1\u03bf\u03c0\u03cc\u03bd\u03b7\u03c3\u03b7":"training",
"\u03c4\u03ad\u03bd\u03b9\u03c2":"tennis","\u03b3\u03ba\u03bf\u03bb\u03c6":"golf","\u03b1\u03bc\u03b5\u03c1\u03b9\u03ba\u03b1\u03bd\u03b9\u03ba\u03cc \u03c0\u03bf\u03b4\u03cc\u03c3\u03c6\u03b1\u03b9\u03c1\u03bf":"NFL","\u03c3\u03c4\u03af\u03b2\u03bf\u03c2":"track and field","\u03bc\u03c0\u03ad\u03b9\u03b6\u03bc\u03c0\u03bf\u03bb":"baseball","\u03b3\u03b9\u03cc\u03b3\u03ba\u03b1":"yoga","\u03bb\u03b1\u03ba\u03c1\u03cc\u03c2":"lacrosse","\u03b3\u03c5\u03bc\u03bd\u03b1\u03c3\u03c4\u03ae\u03c1\u03b9\u03bf \u03ba\u03b1\u03b9 \u03c0\u03c1\u03bf\u03c0\u03cc\u03bd\u03b7\u03c3\u03b7":"training",
"pi\u0142ka no\u017cna":"football",bieganie:"running","koszyk\u00f3wka":"basketball",trening:"training","futbol ameryka\u0144ski":"NFL","\u0107wiczenia i trening":"training",taniec:"dance","baseball i softball":"baseball",basketbol:"basketball",beyzbol:"baseball",futbol:"football",antrenman:"training","ko\u015fu":"running","amerikan futbolu":"NFL",kaykay:"skateboarding",hokey:"hockey","g\u00fcnl\u00fck giyim":"lifestyle","\u0444\u0438\u0442\u043d\u0435\u0441":"training","\u0431\u0430\u0441\u043a\u0435\u0442\u0431\u043e\u043b":"basketball",
"\u0441\u0442\u0438\u043b\u044c":"lifestyle","\u0444\u0443\u0442\u0431\u043e\u043b":"football","\u0442\u0435\u043d\u043d\u0438\u0441":"tennis","\u0441\u043a\u0435\u0439\u0442\u0431\u043e\u0440\u0434":"skateboarding","\u0433\u043e\u043b\u044c\u0444":"golf","\u0431\u0435\u0433":"running","\u0430\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u0438\u0439 \u0444\u0443\u0442\u0431\u043e\u043b":"NFL","\u0445\u043e\u043a\u043a\u0435\u0439":"hockey","\u0431\u0435\u0439\u0441\u0431\u043e\u043b/\u0441\u043e\u0444\u0442\u0431\u043e\u043b":"baseball ",
"\u30d0\u30b9\u30b1\u30c3\u30c8\u30dc\u30fc\u30eb":"basketball","\u30e9\u30f3\u30cb\u30f3\u30b0":"running","\u30d5\u30c3\u30c8\u30dc\u30fc\u30eb":"football","\u30b5\u30c3\u30ab\u30fc\uff0f\u30d5\u30c3\u30c8\u30dc\u30fc\u30eb":"football","\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":"training","\u30b8\u30e0\uff06\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0":"training","\u30b9\u30b1\u30fc\u30c8\u30dc\u30fc\u30c9":"skateboarding","\u30b9\u30b1\u30fc\u30c8\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0":"skateboarding","\u30b4\u30eb\u30d5":"golf",
"\u30c6\u30cb\u30b9":"tennis","\u30d9\u30fc\u30b9\u30dc\u30fc\u30eb":"baseball","\u30d9\u30fc\u30b9\u30dc\u30fc\u30eb&\u30bd\u30d5\u30c8\u30dc\u30fc\u30eb":"baseball","\u30b9\u30ce\u30fc\u30dc\u30fc\u30c7\u30a3\u30f3\u30b0":"snowboarding","\u30a2\u30e1\u30ea\u30ab\u30f3\u30d5\u30c3\u30c8\u30dc\u30fc\u30eb":"NFL","\u30e8\u30ac":"yoga","\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb":"lifestyle","\u751f\u6d3b\u98a8\u683c":"lifestyle","\u8a13\u7df4\u8207\u5065\u8eab":"training","\u8dd1\u6b65":"running",
"\u904b\u52d5\u751f\u6d3b":"lifestyle","\u7c43\u7403":"basketball","\u82f1\u5f0f\u8db3\u7403":"football","\u6ed1\u677f":"skateboarding","\u7db2\u7403":"tennis","\u9ad8\u723e\u592b":"golf","\u7f8e\u5f0f\u8db3\u7403":"NFL","\u0e44\u0e25\u0e1f\u0e4c\u0e2a\u0e44\u0e15\u0e25\u0e4c":"lifestyle","\u0e01\u0e32\u0e23\u0e27\u0e34\u0e48\u0e07":"running","\u0e01\u0e32\u0e23\u0e1d\u0e36\u0e01\u0e41\u0e25\u0e30\u0e22\u0e34\u0e21":"training","\u0e1a\u0e32\u0e2a\u0e40\u0e01\u0e47\u0e15\u0e1a\u0e2d\u0e25":"basketball",
"\u0e1f\u0e38\u0e15\u0e1a\u0e2d\u0e25":"football","\u0e2a\u0e40\u0e01\u0e47\u0e15\u0e1a\u0e2d\u0e23\u0e4c\u0e14":"skateboarding","\u0e40\u0e17\u0e19\u0e19\u0e34\u0e2a":"tennis","\u0e01\u0e2d\u0e25\u0e4c\u0e1f":"golf",livsstil:"lifestyle",fodbold:"football","tr\u00e6ning og tr\u00e6ningscenter":"training","l\u00f8b":"running","surf og sv\u00f8mning":"surfing","amerikansk fodbold":"NFL","track og bane":"track and field",livsstil:"lifestyle",fotboll:"football","tr\u00e4ning & gym":"training","l\u00f6pning":"running",
"surfning & simning":"surfing","amerikansk fotboll":"NFL",friidrott:"track and field","\u017eivotn\u00ed styl":"lifestyle",fotbal:"football","tr\u00e9nink a cvi\u010den\u00ed":"training","b\u011bh":"running","surfov\u00e1n\u00ed a plav\u00e1n\u00ed":"surfing","americk\u00fd fotbal":"NFL","j\u00f3ga":"yoga","lehk\u00e1 atletika":"track and field",futebol:"football","treino e gin\u00e1sio":"training",basquetebol:"basketball",skateboard:"skateboarding","t\u00e9nis":"tennis",golfe:"golf","futebol americano":"NFL",
"surf e nata\u00e7\u00e3o":"surfing","pista e terreno":"track and field","utcai ruh\u00e1zat":"lifestyle",futball:"football","fitnesz \u00e9s edz\u00e9s":"training","fut\u00e1s":"running","kos\u00e1rlabda":"basketball","g\u00f6rdeszk\u00e1z\u00e1s":"skateboarding",tenisz:"tennis","sz\u00f6rf \u00e9s \u00fasz\u00e1s":"surfing","j\u00f3ga":"yoga","atl\u00e9tika":"track and field",fritid:"lifestyle",fotball:"football","trening & studio":"training","l\u00f8ping":"running","surfing & sv\u00f8mming":"surfing",
"amerikansk fotball":"NFL",friidrett:"track and field"};
triggermail.fetcher.get_primary_sport=function(a){try{var b="lifestyle",c;a?c=-1<$("#trackingObject").data("trackingData").product.productName.indexOf("NFL")?"NFL":nike.globalData.pdpData.primarySport.toLowerCase():-1<triggermail.productData.productTitle.indexOf("NFL")?c="NFL":"undefined"!=typeof triggermail.productData.primarySport&&null!=triggermail.productData.primarySport?c=triggermail.productData.primarySport.toLowerCase():null!=triggermail.productData.trackingData&&("undefined"!=typeof triggermail.productData.trackingData.primarySportName&&
null!=triggermail.productData.trackingData.primarySportName)&&(c=triggermail.productData.trackingData.primarySportName.toLowerCase());"undefined"!=typeof triggermail.Partner.primarySportsMap[c]&&(c=triggermail.Partner.primarySportsMap[c]);for(a=0;a<triggermail.Partner.primarySports.length;a++)if(triggermail.Partner.primarySports[a]==c){b=triggermail.Partner.primarySports[a];break}return b}catch(f){return"lifestyle"}};
triggermail.fetcher.get_primary_sport_raw=function(a){try{return a?nike.globalData.pdpData.primarySport.toLowerCase():"undefined"!=typeof triggermail.productData.primarySport&&null!=triggermail.productData.primarySport?triggermail.productData.primarySport.toLowerCase():null!=triggermail.productData.trackingData&&"undefined"!=typeof triggermail.productData.trackingData.primarySportName&&null!=triggermail.productData.trackingData.primarySportName?triggermail.productData.trackingData.primarySportName.toLowerCase():
"none"}catch(b){return"none"}};
triggermail.Partner.commonProductView=function(){if(-1<window.location.href.indexOf("custom-converse-")||-1<window.location.href.indexOf("converse-custom-"))if(-1<window.location.href.indexOf("m.nike.com"))setTimeout(function(){triggermail.view({id:nike.globalData.pdpData.productId,is_custom_converse:"true"},{partial:!0})},1E3);else{var a=new triggermail.CustomConverseFetcher;""!=a.id()&&triggermail.view(a.to_dict())}if(-1<window.location.href.indexOf("-id-")||-1<window.location.href.indexOf("-id/"))-1<window.location.href.indexOf("m.nike.com")?
setTimeout(function(){triggermail.view({id:nike.globalData.pdpData.productId,is_nike_id:"true"},{partial:!0})},1E3):(a=new triggermail.NikeIdFetcher,""!=a.id()&&triggermail.view(a.to_dict()));if(null==document.querySelector("#trackingObject")){triggermail.productData=document.querySelector("#product-data")?JSON.parse(document.querySelector("#product-data").text):null;if(document.querySelector(".product-not-found-header"))try{var b={id:window.location.href.split("?")[0].split("/")[7].split("-")[1],
out_of_stock:!0};triggermail.view(b,{partial:!0})}catch(c){}if(document.querySelector('meta[property="og:type"]')&&"product"==document.querySelector('meta[property="og:type"]').content.toLowerCase()){a=new triggermail.fetcher;""!=a.id()&&(a=a.to_dict(),-1!=a.image.indexOf("undefined")||-1!=a.image.indexOf("NIKE_M_PDP")?(delete a.image,triggermail.view(a,{partial:!0})):triggermail.view(a));try{if(5>Math.floor(100*Math.random())){for(var f=nike.exp.pdp.PdpPage.currentProduct.outOfStockColorways||[],
a=[],b=0;b<f.length;b++)a.push({id:f[b].productId,out_of_stock:!0});0<a.length&&triggermail.patch({products:a})}}catch(g){}}}};
triggermail.Partner.cicProductView=function(){try{if(br_data&&br_data.prod_id&&"undefined"!==typeof br_data.prod_id){var a=window.location.pathname.split("/").pop().split("-");2==a.length&&triggermail.view({id:br_data.prod_id,style_id:a[0],style_color_id:a[1]},{partial:!0})}}catch(b){}document.querySelector("html").addEventListener("neo",function(a){if(("onLoad"==a.detail.event||"colorChange"==a.detail.event)&&"addToCart"!=a.detail.event){a=a.detail.product;var b,g,m;""!=a.selectedColor?(b=a.selectedColor.split("-")[0],
g=a.selectedColor.split("-")[1],m=window.location.href.split("/t/")[0]+"/t"+a.pathName):(b=a.colorsAvailable[0].split("-")[0],g=a.colorsAvailable[0].split("-")[1],m=window.location.href.split("/t/")[0]+"/t"+a.pathName+"/"+a.colorsAvailable[0]);triggermail.view({id:a.productId,style_id:b,style_color_id:g,url:m},{partial:!0})}})};
triggermail.Partner.doTrackAddToCart=function(){nike.deferredListen(nike.Event.ADD_TO_CART,function(a,b){triggermail.util.wrapEvent(function(){"undefined"!=typeof b.product&&"undefined"!=typeof b.product.isNikeId?triggermail.add_to_cart({id:nike.globalData.pdpData.productId}):"undefined"!=typeof nike.id&&"undefined"!=typeof nike.id.productData.productId?triggermail.add_to_cart({id:nike.id.productData.productId}):triggermail.add_to_cart({id:b.data.productId})},b)()})};
triggermail.Partner.cicAddToCart=function(){document.querySelector("html").addEventListener("neo",function(a){"addToCart"==a.detail.event&&triggermail.add_to_cart({id:a.detail.product.productId})})};triggermail.Partner.doCartView=function(){};triggermail.Partner.doRemoveFromCart=function(){};
var syncUserAudiences=function(){var a=function(){var a=new XMLHttpRequest,b;b="//bluecore.com/api/audiences/get_audience_info?namespace="+encodeURIComponent(triggermail.integ.keys.lytics);b+="&customer_alias="+encodeURIComponent(triggermail.lytics.get_distinct_id());b+="&_"+(new Date).getTime();a.open("GET",b);a.onreadystatechange=function(a){a=a.target;if(a.readyState===XMLHttpRequest.DONE){var b=[],c=!!a.responseText,f={};try{f=c?JSON.parse(a.responseText):{}}catch(A){}c&&triggermail.lytics._.each(f,
function(a,c){b.push(c);triggermail.util.cookie.get(c)||triggermail.util.cookie.set(c,"true",void 0,triggermail.lytics.cookie.get_cross_subdomain())});a=(a=triggermail.util.cookie.get("__bc_audience_sync"))?JSON.parse(a):{};triggermail.lytics._.each(a.audiences||[],function(a){-1===b.indexOf(a)&&triggermail.util.cookie.get(a)&&triggermail.util.cookie.remove(a,triggermail.lytics.cookie.get_cross_subdomain())});a={lastSyncTime:+new Date,audiences:b};triggermail.util.cookie.set("__bc_audience_sync",
JSON.stringify(a),void 0,triggermail.lytics.cookie.get_cross_subdomain())}};a.send()},b=triggermail.util.cookie.get("__bc_audience_sync"),b=b?JSON.parse(b):{};36E5<+new Date-+(b.lastSyncTime||0)&&a()};
triggermail.initialize=function(){triggermail.integ.keys={};var a=triggermail.Partner.env();triggermail.integ.keys.lytics=triggermail.Partner.keys.lytics[a];triggermail.integ.debug=!1;triggermail.integ.initServices();triggermail.init();-1<["124_rivington","reebok","lucy","design_within_reach"].indexOf(triggermail.integ.keys.lytics)&&syncUserAudiences();a=triggermail.util.getUrlParam("__distinct_id_override__");""!=a&&(triggermail.lytics.cookie.props.distinct_id=a,triggermail.lytics.cookie.save());
a=triggermail.util.getUrlParam("eton_distinct_id");""!=a&&(triggermail.lytics.cookie.props.distinct_id=a,triggermail.lytics.cookie.save());var a=triggermail.util.getUrlParam("mc_eid"),b=triggermail.lytics.cookie.props.distinct_id;a&&b!==a&&(a="mceid_"+a,b!==a&&(triggermail.merge({merge:{source:b,destination:a},customer:{distinct_id:a}}),triggermail.lytics.cookie.props.distinct_id=a,triggermail.lytics.cookie.save(),triggermail.lytics.register({mc_eid:a})));triggermail.integ.init();a=triggermail.util.getUrlParam("__auto_demo__");
""!=a&&(triggermail.demo(),triggermail.identify({email:a}));try{var c=JSON.parse(triggermail.util.cookie.get(triggermail.lytics.cookie.name));(-1<window.location.pathname.indexOf("/eton/")||"undefined"==typeof c.email)&&triggermail.eton.init()}catch(f){}};triggermail.__tm_initialized||(triggermail.initialize(),triggermail.__tm_initialized=!0);
